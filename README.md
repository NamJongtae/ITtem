# ğŸ“¦ ITtem

![thumbnail](https://github.com/NamJongtae/ITtem/assets/113427991/f996dd94-9c15-481f-a9e4-df3e4d936b1d)

#### ğŸˆ í…ŒìŠ¤íŠ¸ ê³„ì •

| ID         | PW         |
| ---------- | ---------- |
| test@a.com | asdzxc123! |

#### ğŸŒ ë°°í¬ URL : ğŸ“¦ [ITtem](https://ittem.vercel.app)

<br/>

### ğŸ“ƒ ëª©ì°¨ (í´ë¦­ ì‹œ í•´ë‹¹ ëª©ì°¨ë¡œ ì´ë™í•©ë‹ˆë‹¤.)

- [ğŸ™‹â€â™‚ í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ğŸ“† ê°œë°œê¸°ê°„](#-ê°œë°œê¸°ê°„)
- [âš™ ê°œë°œí™˜ê²½](#-ê°œë°œí™˜ê²½)
- [ğŸ”© ë²¡ì—”ë“œ&API](#-ë²¡ì—”ë“œ--api)

- [â›“ ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)

- [ğŸ’¡ í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì´ìœ ](#-í”„ë ˆì„ì›Œí¬-ë°-ë¼ì´ë¸ŒëŸ¬ë¦¬-ì‚¬ìš©-ì´ìœ )

- [ğŸ”¨ ë¦¬íŒ©í„°ë§](#-ë¦¬íŒ©í„°ë§)

  - [ğŸ—œ bundle ì‚¬ì´ì¦ˆ ìµœì í™”](#-bundle-ì‚¬ì´ì¦ˆ-ìµœì í™”)
  - [ğŸ­ query-key-factory ì ìš©](#-query-key-factory-ì ìš©)
  - [ğŸ§© customhook íŒ¨í„´ ë¡œì§ ë¶„ë¦¬](#-customhook-íŒ¨í„´-ë¡œì§-ë¶„ë¦¬)
  - [âŒ¨ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ í‚¤ë³´ë“œ ìµœì í™”](#-ëª¨ë‹¬-ë°-ë“œë¡­-ë‹¤ìš´-ë©”ë‰´-í‚¤ë³´ë“œ-ìµœì í™”)
  - [ğŸ“± ëª¨ë‹¬ ëª¨ë°”ì¼ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì ìš©](#-ëª¨ë‹¬-ëª¨ë°”ì¼-ë’¤ë¡œê°€ê¸°-ë²„íŠ¼-ì ìš©)

- [ğŸ”« íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
  - [ğŸª ssr ì¿ í‚¤ ì „ë‹¬ ë¬¸ì œ](#-ssr-ì¿ í‚¤-ì „ë‹¬-ë¬¸ì œ)
  - [ğŸŒ vercel ë°°í¬ ë¬¸ì œ](#-vercel-ë°°í¬-ë¬¸ì œ)
  - [ğŸ—œ middleware í† í° ì¸ì¦ ë¡œì§ êµ¬í˜„ ë¬¸ì œ](#-middleware-í† í°-ì¸ì¦-ë¡œì§-êµ¬í˜„-ë¬¸ì œ)
  - [ğŸ–Œ tailwindcss ë™ì  ìŠ¤íƒ€ì¼ë§ ë¬¸ì œ](#-tailwindcss-ë™ì -ìŠ¤íƒ€ì¼ë§-ë¬¸ì œ)

- [ğŸ‘€ êµ¬í˜„ ê¸°ëŠ¥ ë¯¸ë¦¬ë³´ê¸°](#-êµ¬í˜„-ê¸°ëŠ¥-ë¯¸ë¦¬ë³´ê¸°--ì œëª©-í´ë¦­-ì‹œ-í•´ë‹¹-ê¸°ëŠ¥-ìƒì„¸ì„¤ëª…ìœ¼ë¡œ-ì´ë™ë©ë‹ˆë‹¤-)

<br>

### ğŸ™‹â€â™‚ í”„ë¡œì íŠ¸ ì†Œê°œ

> **ITtemì€ ì¤‘ê³  ìƒí’ˆì„ ê±°ë˜í•˜ê³ , ë¬´ë£Œ ë‚˜ëˆ”í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.**

- ì¤‘ê³  ìƒí’ˆì„ íŒë§¤, êµ¬ë§¤ í•˜ê±°ë‚˜ ë¬´ë£Œ ë‚˜ëˆ” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì±„íŒ…ì„ í†µí•´ í¸ë¦¬í•˜ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì†Œí†µì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ë‹¤ì–‘í•œ ìƒí’ˆì„ í•©ë¦¬ì ì¸ ê°€ê²©ì— ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‹¤ì‹œê°„ ì•Œë¦¼ ê¸°ëŠ¥ìœ¼ë¡œ ê±°ë˜ ê³¼ì •ì„ ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

### ğŸ“† ê°œë°œê¸°ê°„

**ê°œë°œ ì‹œì‘ : 2024. 04. 05**

**ê°œë°œ ì™„ë£Œ : 2023. 06. 29**

<br>

### âš™ ê°œë°œí™˜ê²½

| í”„ë¡ íŠ¸ì—”ë“œ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ë²¡ì—”ë“œ                                                                                                                                                                                                                                                                                | ë””ìì¸                                                                                    | ë°°í¬, ê´€ë¦¬                                                                                                                                                            |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <img alt="Html" src ="https://img.shields.io/badge/HTML5-E34F26?logo=HTML5&logoColor=white"/> <img alt="CSS" src ="https://img.shields.io/badge/CSS3-1572B6?logo=CSS3&logoColor=white"/> <img alt="TypeScript" src ="https://img.shields.io/badge/TypeScript-3178C6?logo=TypeScript&logoColor=white"/> <img src="https://img.shields.io/badge/react-61DAFB?logo=react&logoColor=black"> <img src ="https://img.shields.io/badge/next.js-000000?logo=nextdotjs&logoColor=white"/> <img src="https://img.shields.io/badge/redux_toolkit-764ABC?&logo=redux&logoColor=white"> <img src="https://img.shields.io/badge/reactquery-FF4154?&logo=reactquery&logoColor=fff"> <img src="https://img.shields.io/badge/tailwindcss-0F172A?&logo=tailwindcss"> | <img src ="https://img.shields.io/badge/-MongoDB-13aa52?logo=mongodb&logoColor=white"/> <img src ="https://img.shields.io/badge/next.js_API_Routers-000000?logo=nextdotjs&logoColor=white"/> <img src ="https://img.shields.io/badge/firebase-ffca28?logo=firebase&logoColor=black"/> | <img src="https://img.shields.io/badge/figma-F24E1E?logo=figma&logoColor=white" width=70> | <img src="https://img.shields.io/badge/vercel-000000?logo=vercel&logoColor=white"> <img src="https://img.shields.io/badge/github-181717?logo=github&logoColor=white"> |

<br>

### ğŸ”© ë²¡ì—”ë“œ & API

Serverlessë¡œ ë²¡ì—”ë“œ APIë¥¼ êµ¬ì¶•í•˜ì˜€ìŠµë‹ˆë‹¤.

- Nextjs api routersë¥¼ í†µí•´ api ì—”ë“œ í¬ì¸íŠ¸ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- firebaseë¥¼ í†µí•´ ì‹¤ì‹œê°„ ì±„íŒ… ë° ì•Œë¦¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ë³„ë„ì˜ ì„œë²„ ê´€ë¦¬ê°€ í•„ìš” ì—†ëŠ” firebase, mogodbë¥¼ ì´ìš©í•˜ì—¬ dbë¥¼ êµ¬ì¶•í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

### â›“ ì•„í‚¤í…ì²˜

![architecture](https://github.com/NamJongtae/ITtem/assets/113427991/2aac45da-4f19-40f4-a98f-466d6af1095e)

### ğŸ’¡ í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì´ìœ 

#### Next.js

- **SSR, SSG, ISR ì œê³µ**: ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR), ì •ì  ì‚¬ì´íŠ¸ ìƒì„±(SSG), ì ì§„ì  ì •ì  ì¬ìƒì„±(ISR)ì„ ì§€ì›í•˜ì—¬ ë‹¤ì–‘í•œ ë Œë”ë§ ë°©ì‹ ì œê³µ.
- **SEO ìµœì í™”**: Pre-renderingì„ í†µí•´ SEO(ê²€ìƒ‰ ì—”ì§„ ìµœì í™”)ì— ìœ ë¦¬.
- **ì´ë¯¸ì§€ ìµœì í™” ë° ì½”ë“œ ë¶„í• **: ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ì´ë¯¸ì§€ ìµœì í™” ë° ì½”ë“œ ë¶„í•  ê¸°ëŠ¥ ì œê³µ.
- **í˜ì´ì§€ ê¸°ë°˜ ë¼ìš°íŒ…**: ë³„ë„ì˜ ë¼ìš°íŒ… ì„¤ì • ì—†ì´ í˜ì´ì§€ íŒŒì¼ ìƒì„±ë§Œìœ¼ë¡œ ë¼ìš°íŒ… ê°€ëŠ¥.
- **Serverless í™˜ê²½ ì§€ì›**: API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì†ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ” API Routes ì œê³µ.

#### React Query

- **ì¿¼ë¦¬ í‚¤ ë° í•¨ìˆ˜ ê´€ë¦¬ ìš©ì´**: ì¿¼ë¦¬ í‚¤ì™€ ì¿¼ë¦¬ í•¨ìˆ˜ë¥¼ ê¸°ëŠ¥ë³„ë¡œ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ ë³´ìˆ˜ ë° ê´€ë¦¬ê°€ ìš©ì´.
- **ìºì‹± ë° ë™ê¸°í™”**: ì„œë²„ ìƒíƒœ ê´€ë¦¬ì™€ ìºì‹±, ë™ê¸°í™”ë¥¼ í†µí•´ íš¨ìœ¨ì ì¸ ë°ì´í„° í˜ì¹­ ë° ìƒíƒœ ê´€ë¦¬ ê°€ëŠ¥.
- **ìë™ ë¦¬í˜ì¹­**: ë°ì´í„° ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ë¦¬í˜ì¹­í•˜ì—¬ ìµœì‹  ìƒíƒœ ìœ ì§€.
- **ë°°ê²½ ë°ì´í„° ì—…ë°ì´íŠ¸**: ì‚¬ìš©ìê°€ ë³´ëŠ” ë™ì•ˆ ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ ë°°ê²½ì—ì„œ ì²˜ë¦¬.

#### Redux Toolkit

- **ì „ì—­ ìƒíƒœ ê´€ë¦¬**: ì „ì—­ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ê°•ë ¥í•œ ë„êµ¬ë¡œ, ì¼ë°˜ Reduxë³´ë‹¤ ì‚¬ìš©ì´ ê°„í¸.
- **ì½”ë“œ ê°„ì†Œí™”**: ë³µì¡í•œ ì„¤ì • ì—†ì´ ê°„ê²°í•˜ê²Œ ìƒíƒœ ê´€ë¦¬ ë¡œì§ êµ¬í˜„ ê°€ëŠ¥.

#### MongoDB

- **ë¬´ì„œë²„ ë°ì´í„° ê´€ë¦¬**: ë³„ë„ì˜ ì„œë²„ ê´€ë¦¬ ì—†ì´ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ë°ì´í„°ë¥¼ í¸ë¦¬í•˜ê²Œ ê´€ë¦¬.
- **ê°„ë‹¨í•œ ì‚¬ìš© ë°©ë²•**: ì‚¬ìš©ì´ ì‰¬ì›Œ ë¹ ë¥´ê²Œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ë° ìš´ì˜ ê°€ëŠ¥.
- **ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„±**: NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ ìŠ¤í‚¤ë§ˆê°€ ìœ ì—°í•˜ì—¬ ë‹¤ì–‘í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì‰½ê²Œ ì €ì¥.

#### Firebase

- **ì‹¤ì‹œê°„ ë°ì´í„° í†µì‹ **: ì±„íŒ… ë° ì•Œë¦¼ ê¸°ëŠ¥ì„ ìœ„í•œ ì‹¤ì‹œê°„ ë°ì´í„° í†µì‹  ì§€ì›.

#### Jsonwebtoken

- **ì‚¬ìš©ì ì¸ì¦ ë° ì¸ê°€**: ë¬´ìƒíƒœ(stateless) ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì¸ì¦ ë° ì¸ê°€ êµ¬í˜„ ê°€ëŠ¥.
- **ì„œë²„ ì„¸ì…˜ ë¶ˆí•„ìš”**: ì„œë²„ì— ë³„ë„ì˜ ì„¸ì…˜ ì €ì¥ì†Œê°€ í•„ìš”í•˜ì§€ ì•ŠìŒ.
- **ë³´ì•ˆ ê°•í™”**: ì„œëª…ëœ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥.

#### Redis

- **í† í° ê´€ë¦¬ ë° ë³´ì•ˆ ê°•í™”**: ë¡œê·¸ì¸ í™•ì¸ ë° í† í° íƒˆì·¨ ì‹œ í† í° ë¬´íš¨í™” ì²˜ë¦¬ ê°€ëŠ¥.
- **ë¹ ë¥¸ ì„±ëŠ¥**: ë©”ëª¨ë¦¬ ê¸°ë°˜ ë°ì´í„° ì €ì¥ì†Œë¡œ ë¹ ë¥¸ ì†ë„ ì œê³µ.
- **TTL ê¸°ëŠ¥**: í† í° ë§Œë£Œ ì‹œê°„ì„ ì„¤ì •í•  ìˆ˜ ìˆì–´ ë³´ì•ˆ ë° ê´€ë¦¬ ìš©ì´.
- **ë¬´ì„œë²„ ì‚¬ìš© ê°€ëŠ¥**: ë³„ë„ì˜ ì„œë²„ ì—†ì´ë„ ì‚¬ìš© ê°€ëŠ¥.

#### Query Key Factory

- **ì¿¼ë¦¬ í‚¤ ë° í•¨ìˆ˜ ê´€ë¦¬ ìš©ì´**: ê¸°ëŠ¥ë³„ë¡œ ì¿¼ë¦¬ í‚¤ì™€ ì¿¼ë¦¬ í•¨ìˆ˜ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ ë³´ìˆ˜ ë° ê´€ë¦¬ê°€ ìš©ì´.
- **íš¨ìœ¨ì  ê´€ë¦¬**: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ì˜ íš¨ìœ¨ì ì´ê³  ëª…í™•í•œ ê´€ë¦¬ ê°€ëŠ¥.
- **ì½”ë“œ ì¬ì‚¬ìš©ì„± ì¦ê°€**: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ì—¬ ì½”ë“œ ì¤‘ë³µ ê°ì†Œ.

<br>

### ğŸ”¨ ë¦¬íŒ©í„°ë§

#### ğŸ—œ bundle ì‚¬ì´ì¦ˆ ìµœì í™”

> **ì ìš©ì´ìœ **

- bundle analyzeë¡œ ë²ˆë“¤ì„ ë¶„ì„í•˜ì˜€ì„ ë•Œ í•„ìš”ì—†ëŠ” bundleê³¼ ìš©ëŸ‰ì´ í° bundleì´ ì¡´ì¬í•˜ì˜€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- bundle analyzeë¡œ ë²ˆë“¤ ë¶„ì„ í›„ ìš©ëŸ‰ì´ ì‚¬ìš©í•˜ì§€ ì•Šì€ ë²ˆë“¤ê³¼ ìš©ëŸ‰ì´ í° ë²ˆë“¤ì„ ë¶„ì„í•˜ì˜€ê³ , ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸ ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ í†µí•´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë²ˆë“¤ì„ ì œê±°í•˜ê³  ë²ˆë“¤ ì‚¬ì´ì¦ˆë¥¼ ìµœì í™” í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì „ì²´ì ì¸ ë²ˆë“¤ ì‚¬ì´ì¦ˆ ê°ì†Œì™€ ê³µí†µ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ 588MBì—ì„œ 340MBë¡œ ì•½ 42%(248MB) ê°ì†Œí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì „í›„ ë¹„êµ**

**ì ìš© ì „**
![analyze1](https://github.com/NamJongtae/ITtem/assets/113427991/98f584c3-6dad-410e-8140-f60c97d172f5)

<details>
<summary>ë¶„ì„ ê²°ê³¼ ë³´ê¸°</summary>

| Route                                                            | Size    | First Load JS |
| ---------------------------------------------------------------- | ------- | ------------- |
| â—‹ /                                                              | 897 B   | 202 kB        |
| â—‹ /404                                                           | 774 B   | 164 kB        |
| â—‹ /signin                                                        | 3.5 kB  | 175 kB        |
| â—‹ /signin/google                                                 | 1.36 kB | 161 kB        |
| â—‹ /signin/kakao                                                  | 1.29 kB | 161 kB        |
| â—‹ /signup                                                        | 4.24 kB | 181 kB        |
| Î» /api/auth/changePassword                                       | 0 B     | 159 kB        |
| Î» /api/auth/checkEmail                                           | 0 B     | 159 kB        |
| Î» /api/auth/deleteToken                                          | 0 B     | 159 kB        |
| Î» /api/auth/duplication/email                                    | 0 B     | 159 kB        |
| Î» /api/auth/duplication/nickname                                 | 0 B     | 159 kB        |
| Î» /api/auth/refreshToken                                         | 0 B     | 159 kB        |
| Î» /api/auth/sendVerifyEmail                                      | 0 B     | 159 kB        |
| Î» /api/auth/session                                              | 0 B     | 159 kB        |
| Î» /api/auth/signin                                               | 0 B     | 159 kB        |
| Î» /api/auth/signin/google                                        | 0 B     | 159 kB        |
| Î» /api/auth/signin/google/user                                   | 0 B     | 159 kB        |
| Î» /api/auth/signin/kakao                                         | 0 B     | 159 kB        |
| Î» /api/auth/signin/kakao/user                                    | 0 B     | 159 kB        |
| Î» /api/auth/signout                                              | 0 B     | 159 kB        |
| Î» /api/auth/signup                                               | 0 B     | 159 kB        |
| Î» /api/auth/user                                                 | 0 B     | 159 kB        |
| Î» /api/auth/verifyEmail                                          | 0 B     | 159 kB        |
| Î» /api/chat                                                      | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]                                         | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/enter                                   | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/exit                                    | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/leave                                   | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/message                                 | 0 B     | 159 kB        |
| Î» /api/notification                                              | 0 B     | 159 kB        |
| Î» /api/notification/[messageId]                                  | 0 B     | 159 kB        |
| Î» /api/notification/[messageId]/read                             | 0 B     | 159 kB        |
| Î» /api/product                                                   | 0 B     | 159 kB        |
| Î» /api/product/[productId]                                       | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase                              | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/cancel                       | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/cancel/withdrawal            | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/product-receipt-confirmation | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/return                       | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/return/delivery-confirmation | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/return/withdrawal            | 0 B     | 159 kB        |
| Î» /api/product/[productId]/report                                | 0 B     | 159 kB        |
| Î» /api/product/[productId]/review                                | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/cancel-comfirmation             | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/cancel-reject                   | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/delivery-confirmation           | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/purchase-request-confirmation   | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/purchase-request-reject         | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/return-confirmation             | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/return-receipt-confirmation     | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/return-reject                   | 0 B     | 159 kB        |
| Î» /profile                                                       | 439 B   | 231 kB        |
| Î» /profile/[uid]                                                 | 354 B   | 231 kB        |
| Î» /search/product                                                | 2.73 kB | 204 kB        |
| Î» /product/[productId]                                           | 8.39 kB | 211 kB        |
| Î» /product/[productId]/edit                                      | 363 B   | 225 kB        |
| Î» /product/manage                                                | 10.1 kB | 197 kB        |
| â—‹ /product/upload                                                | 427 B   | 225 kB        |
| First Load JS shared by all                                      | 340 kB  |               |
| â”œ chunks/framework-03cd576e71e4cd66.js                           | 45.2 kB |               |
| â”œ chunks/main-2022d5fc3fdade3c.js                                | 31.9 kB |               |
| â”œ chunks/pages/\_app-0d627b907842ab6f.js                         | 80.1 kB |               |
| â”œ css/e523be9dea407922.css                                       | 181 kB  |               |
| â”” other shared chunks (total)                                    | 2.2 kB  |               |
| Middleware                                                       | 42.1 kB |               |

</details>

- clientì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” crypto, bcryptjs ëª¨ë“ˆì´ ë²ˆë“¤ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- firebase ëª¨ë“ˆì˜ ìš©ëŸ‰ì´ ë§¤ìš° í¬ê²Œ ë¶„í¬í•´ ìˆìŠµë‹ˆë‹¤.
- ë²ˆë“¤ ë¶„ì„ ê²°ê³¼ ê³µí†µ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ 588MBë¡œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.

<br>

**ì ìš© í›„**
![analyze2](https://github.com/NamJongtae/ITtem/assets/113427991/a4630da4-940c-44c9-95d9-fa7edb5e17ba)

<details>
<summary>ë¶„ì„ ê²°ê³¼ ë³´ê¸°</summary>

| Route                                                            | Size    | First Load JS |
| ---------------------------------------------------------------- | ------- | ------------- |
| â—‹ /                                                              | 897 B   | 449 kB        |
| /\_app                                                           | 0 B     | 407 kB        |
| â—‹ /404                                                           | 774 B   | 412 kB        |
| Î» /api/auth/changePassword                                       | 0 B     | 407 kB        |
| Î» /api/auth/checkEmail                                           | 0 B     | 407 kB        |
| Î» /api/auth/deleteToken                                          | 0 B     | 407 kB        |
| Î» /api/auth/duplication/email                                    | 0 B     | 407 kB        |
| Î» /api/auth/duplication/nickname                                 | 0 B     | 407 kB        |
| Î» /api/auth/refreshToken                                         | 0 B     | 407 kB        |
| Î» /api/auth/sendVerifyEmail                                      | 0 B     | 407 kB        |
| Î» /api/auth/session                                              | 0 B     | 407 kB        |
| Î» /api/auth/signin                                               | 0 B     | 407 kB        |
| Î» /api/auth/signin/google                                        | 0 B     | 407 kB        |
| Î» /api/auth/signin/google/user                                   | 0 B     | 407 kB        |
| Î» /api/auth/signin/kakao                                         | 0 B     | 407 kB        |
| Î» /api/auth/signin/kakao/user                                    | 0 B     | 407 kB        |
| Î» /api/auth/signout                                              | 0 B     | 407 kB        |
| Î» /api/auth/signup                                               | 0 B     | 407 kB        |
| Î» /api/auth/user                                                 | 0 B     | 407 kB        |
| Î» /api/auth/verifyEmail                                          | 0 B     | 407 kB        |
| Î» /api/chat                                                      | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]                                         | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/enter                                   | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/exit                                    | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/leave                                   | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/message                                 | 0 B     | 407 kB        |
| Î» /api/notification                                              | 0 B     | 407 kB        |
| Î» /api/notification/[messageId]                                  | 0 B     | 407 kB        |
| Î» /api/notification/[messageId]/read                             | 0 B     | 407 kB        |
| Î» /api/product                                                   | 0 B     | 407 kB        |
| Î» /api/product/[productId]                                       | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase                              | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/cancel                       | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/cancel/withdrawal            | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/product-receipt-confirmation | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/return                       | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/return/delivery-confirmation | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/return/withdrawal            | 0 B     | 407 kB        |
| Î» /api/product/[productId]/report                                | 0 B     | 407 kB        |
| Î» /api/product/[productId]/review                                | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/cancel-comfirmation             | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/cancel-reject                   | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/delivery-confirmation           | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/purchase-request-confirmation   | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/purchase-request-reject         | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/return-confirmation             | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/return-receipt-confirmation     | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/return-reject                   | 0 B     | 407 kB        |
| Î» /api/product/[productId]/view                                  | 0 B     | 407 kB        |
| Î» /api/product/[productId]/wish                                  | 0 B     | 407 kB        |
| Î» /api/product/search                                            | 0 B     | 407 kB        |
| Î» /api/product/today                                             | 0 B     | 407 kB        |
| Î» /api/product/upload                                            | 0 B     | 407 kB        |
| Î» /api/profile                                                   | 0 B     | 407 kB        |
| Î» /api/profile/[uid]                                             | 0 B     | 407 kB        |
| Î» /api/profile/[uid]/follow                                      | 0 B     | 407 kB        |
| Î» /api/profile/[uid]/review                                      | 0 B     | 407 kB        |
| Î» /api/profile/followers                                         | 0 B     | 407 kB        |
| Î» /api/profile/followings                                        | 0 B     | 407 kB        |
| Î» /api/profile/product                                           | 0 B     | 407 kB        |
| Î» /api/profile/wish                                              | 0 B     | 407 kB        |
| Î» /api/purchase-trading                                          | 0 B     | 407 kB        |
| Î» /api/sales-trading                                             | 0 B     | 407 kB        |
| â—‹ /chat                                                          | 2.8 kB  | 417 kB        |
| Î» /chat/[chatRoomId]                                             | 7.55 kB | 430 kB        |
| â—‹ /findpassword                                                  | 2.21 kB | 427 kB        |
| Î» /product                                                       | 3.78 kB | 452 kB        |
| Î» /product/[productId]                                           | 8.39 kB | 458 kB        |
| Î» /product/[productId]/edit                                      | 363 B   | 472 kB        |
| Î» /product/manage                                                | 10.1 kB | 444 kB        |
| â—‹ /product/upload                                                | 427 B   | 472 kB        |
| Î» /profile                                                       | 439 B   | 477 kB        |
| Î» /profile/[uid]                                                 | 354 B   | 477 kB        |
| Î» /search/product                                                | 2.73 kB | 451 kB        |
| â—‹ /signin                                                        | 3.49 kB | 423 kB        |
| â—‹ /signin/google                                                 | 1.36 kB | 409 kB        |
| â—‹ /signin/kakao                                                  | 1.29 kB | 408 kB        |
| â—‹ /signup                                                        | 4.24 kB | 429 kB        |
| First Load JS shared by all                                      |         | 588 kB        |
| â”œ chunks/framework-5429a50ba5373c56.js                           | 45.2 kB |               |
| â”œ chunks/main-2022d5fc3fdade3c.js                                | 31.9 kB |               |
| â”œ chunks/pages/\_app-aedf7feb874fe3ea.js                         | 328 kB  |               |
| â”œ css/a34982c1a8b93d6e.css                                       | 180 kB  |               |
| â”” other shared chunks (total)                                    | 2.06 kB |               |
| Middleware                                                       | 42.1 kB |               |

</details>

- clientì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” crypto, bcryptjs ëª¨ë“ˆì´ ë²ˆë“¤ì—ì„œ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤
- firebaseì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆë“¤ì€ ì²­í¬ë¡œ ë¶„ë¦¬ë˜ì–´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
- ë²ˆë“¤ ë¶„ì„ ê²°ê³¼ ì „ì²´ì ì¸ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ ê°ì†Œí•˜ì˜€ìœ¼ë©°, ê³µí†µ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ 588MBì—ì„œ 340MBë¡œ 248MB(ì•½ 42%) ê°ì†Œí•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

<br>

**1 ) ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸ë¥¼ í†µí•´ firebase instance ìƒì„±**

**ì ìš© ì „**

```javascript
import { initializeApp } from "firebase/app";
import { getDatabase } from "firebase/database";
import { Firestore, getFirestore } from "firebase/firestore";
import { getStorage } from "firebase/storage";

export const app = initializeApp(firebaseConfig);
export const firestoreDB = getFirestore(app);
export const database = getDatabase(app);
export const storage = getStorage(app);
```

<br>

**ì ìš© í›„**

```javascript
import { getApp, getApps, initializeApp } from "firebase/app";

const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();

export const getFirestoreDB = async () => {
  const { getFirestore } = await import("firebase/firestore");
  return getFirestore(app);
};
export const getRealtimeDB = async () => {
  const { getDatabase } = await import("firebase/database");
  return getDatabase(app);
};
export const getStorageInstance = async () => {
  const { getStorage } = await import("firebase/storage");
  return getStorage(app);
};
```

<br>

**2 ) api í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” firestore, database, storage ëª¨ë“ˆ ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸ ì ìš©**

**ì ìš© ì „**

```javascript
import { getRealtimeDB } from "../firebaseSetting";
import { push, set, ref: databaseRef } from "/firebase/database"

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const sendNotificationMessage = async (
  userId: string,
  message: string
) => {
  if (!userId) return;
  const firebaseDatabase = await import("firebase/database");
  const database = await getRealtimeDB();
  const messageObj: Omit<NotificationMessageData, "id"> = {
    content: message,
    isRead: false,
    isNotification: false,
    timestamp: Date.now(),
  };

  const messageRef = databaseRef(database, `notification/${userId}/messages`);

  const newMessageRef = push(messageRef);
  set(newMessageRef, messageObj);
};

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢
```

<br>

**ì ìš© í›„**

```javascript
import { getRealtimeDB } from "../firebaseSetting";

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const sendNotificationMessage = async (
  userId: string,
  message: string
) => {
  if (!userId) return;
  const firebaseDatabase = await import("firebase/database");
  const database = await getRealtimeDB();
  const { push, set, ref: databaseRef } = firebaseDatabase;
  const messageObj: Omit<NotificationMessageData, "id"> = {
    content: message,
    isRead: false,
    isNotification: false,
    timestamp: Date.now(),
  };

  const messageRef = databaseRef(database, `notification/${userId}/messages`);

  const newMessageRef = push(messageRef);
  set(newMessageRef, messageObj);
};

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢
```

<br>

**3 ) bcryptjs ëª¨ë“ˆ ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸**

**ì ìš© ì „**

```javascript
import { hash, compare } from "bcryptjs";

export async function getHasdPassword(password: string) {
  try {
    const hashedPassword = await hash(password, 12);
    return hashedPassword;
  } catch (error) {
    console.log(error);
    throw error;
  }
}

export async function verifyPassword(password: string, hashedPassword: string) {
  try {
    const isVerify = await compare(password, hashedPassword);
    return isVerify;
  } catch (error) {
    throw error;
  }
}
```

<br>

**ì ìš© í›„**

```javascript
export async function getHasdPassword(password: string) {
  try {
    const { hash } = await import("bcryptjs");

    const hashedPassword = await hash(password, 12);
    return hashedPassword;
  } catch (error) {
    console.log(error);
    throw error;
  }
}

export async function verifyPassword(password: string, hashedPassword: string) {
  try {
    const { compare } = await import("bcryptjs");

    const isVerify = await compare(password, hashedPassword);
    return isVerify;
  } catch (error) {
    throw error;
  }
}
```

</details>

<br>

#### ğŸ­ query-key-factory ì ìš©

> **ì ìš©ì´ìœ **

- ì´ì „ì— ì‚¬ìš©í–ˆë˜ ë°©ì‹ìœ¼ë¡œëŠ” ì¿¼ë¦¬ í‚¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ê´€ë¦¬í•´ì•¼ í–ˆê¸° ë•Œë¬¸ì— ì¼ê´€ì„± ìˆê³  ëª…í™•í•œ ê´€ë¦¬ê°€ ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ë˜í•œ ì¿¼ë¦¬ í‚¤ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- @lukemorales/query-key-factory ë¼ì´ë¸ŒëŸ¬ë¦¬ì„ ì„¤ì¹˜í•˜ì—¬ ì¿¼ë¦¬í‚¤ì™€ ì¿¼ë¦¬ í•¨ìˆ˜ë¥¼ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.
- createQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë¥¼ ê·¸ë£¹í™”í•˜ê³  êµ¬ì¡°í™”í•˜ì˜€ìŠµë‹ˆë‹¤.
- mergeQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë ¨ëœ ì¿¼ë¦¬ í‚¤ë“¤ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì´ì „ì—ëŠ” ê° ì¿¼ë¦¬ í‚¤ë¥¼ ë³„ë„ì˜ ìƒìˆ˜ë‚˜ í•¨ìˆ˜ë¡œ ìˆ˜ë™ìœ¼ë¡œ ì •ì˜í–ˆì§€ë§Œ, createQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë¥¼ ë” ì²´ê³„ì ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- mergeQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë“¤ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì¤‘ì•™ì—ì„œ ì¿¼ë¦¬ í‚¤ë¥¼ ì •ì˜í•˜ì—¬ ì¼ê´€ì„± ìˆê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆê³ , ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì¡Œìœ¼ë©°, ìœ ì§€ ë³´ìˆ˜ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

<br>

**ì ìš© ì „**

```javascript
//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const getProductQueryKey = (productId: string) => {
  return ["product", productId];
};

export const getProfileQueryKey = (uid: string) => {
  return ["profile", uid];
};

export const MY_PROFILE_QUERY_KEY = ["profile", "my"];

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢
```

- ì¿¼ë¦¬í‚¤ì™€ ì¿¼ë¦¬í‚¤ ìƒì„± í•¨ìˆ˜ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì§ì ‘ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

**ì ìš© í›„**

```javascript
import { ProductManageMenu } from "@/components/product-manage/product-manage-page";
import { getSessionCookies, getUser } from "@/lib/api/auth";
import { getNotificationMessage } from "@/lib/api/notification";
import {
  getCategoryProductList,
  getProduct,
  getProfileProductList,
  getPurchaseTrading,
  getReview,
  getSalesTrading,
  getSearchProductList,
  getTodayProductList,
} from "@/lib/api/product";
import {
  getFollowers,
  getFollowings,
  getMyProfile,
  getProfileReviews,
  getProfileWish,
  getUserProfile,
} from "@/lib/api/profile";
import { ProductCategory, ProductListType } from "@/types/productTypes";
import {
  createQueryKeys,
  mergeQueryKeys,
} from "@lukemorales/query-key-factory";

export const authQueryKey = createQueryKeys("auth", {
  info: (userId?: string) => ({
    queryKey: [userId],
    queryFn: getUser,
  }),
});

export const productQueryKey = createQueryKeys("product", {
  list: ({
    productListType,
    produdctCategory,
    location,
    limit,
  }: {
    productListType?: ProductListType;
    produdctCategory?: ProductCategory;
    location?: string;
    limit: number;
  }) => ({
    queryKey: productListType
      ? [productListType]
      : produdctCategory && location
      ? [produdctCategory, location]
      : [produdctCategory],
    queryFn: produdctCategory
      ? async ({ pageParam }) => {
          const response = await getCategoryProductList({
            category: produdctCategory,
            cursor: pageParam,
            limit,
            location,
          });
          return response.data.products;
        }
      : async ({ pageParam }) => {
          const response = await getTodayProductList(pageParam, limit);
          return response.data.products;
        },
  }),
  search: ({
    keyword,
    category,
    limit,
  }: {
    keyword?: string;
    category: ProductCategory;
    limit: number;
  }) => ({
    queryKey: [keyword, category],
    queryFn: async ({ pageParam }) => {
      const response = await getSearchProductList({
        category,
        cursor: pageParam,
        limit,
        keyword: (keyword as string) || "",
      });
      return response.data.products;
    },
  }),
  detail: (productId: string) => ({
    queryKey: [productId],
    queryFn: async () => {
      const response = await getProduct(productId);
      return response.data.product;
    },
  }),
  review: (productId: string) => ({
    queryKey: [productId],
    queryFn: async () => {
      const response = await getReview(productId);
      return response.data.review;
    },
  }),
  manage: ({
    currentMenu,
    status,
    search,
    menu,
    limit,
  }: {
    currentMenu: "sale" | "purchase";
    status: string;
    search: string | undefined;
    menu: ProductManageMenu;
    limit: number;
  }) => ({
    queryKey: [currentMenu, status, search],
    queryFn: async ({ pageParam }) => {
      if (menu === "íŒë§¤") {
        const response = await getSalesTrading({
          status,
          cursor: pageParam,
          search,
          limit,
        });
        return response.data.saleTrading;
      } else {
        const response = await getPurchaseTrading({
          status,
          cursor: pageParam,
          search,
          limit,
        });
        return response.data.purchaseTrading;
      }
    },
  }),
});

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const queryKeys = mergeQueryKeys(
  authQueryKey,
  productQueryKey,
  profileQueryKey,
  sessionQueryKey,
  notificationQueryKey
);
```

- query-key-factory ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì¿¼ë¦¬í‚¤ì™€ ì¿¼ë¦¬í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.
- mergeQueryKeys í•¨ìˆ˜ë¥¼ í†µí•´ ì¿¼ë¦¬ í‚¤ë“¤ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

</details>

<br>

#### ğŸ§© customhook íŒ¨í„´ ë¡œì§ ë¶„ë¦¬

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ì—ì„œ UIì™€ ë¡œì§ ì½”ë“œê°€ í•¨ê»˜ ì¡´ì¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ ë° ì½”ë“œ ê°€ë…ì„±ì´ ì•ˆì¢‹ì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ë¡œì§ì€ ì»´í¬ë„ŒíŠ¸ ë§ˆë‹¤ ë³„ë„ì˜ customhookë¥¼ ìƒì„±í•˜ì—¬ ê´€ë¦¬ í•˜ë„ë¡ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- UIì™€ ë¡œì§ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì–´, ìœ ì§€ ë³´ìˆ˜ ë° ê°€ë…ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- customhook íŒ¨í„´ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ê³µí†µëœ ë¡œì§ì˜ ì¬ì‚¬ìš©ì„±ì´ ì¦ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

**ì ìš© ì „**

```javascript
import ProfileUserInfo from "./profileUserInfo/profile-userInfo";
import ProfileDetail from "./profile-detail";
import { useState } from "react";
import useProfileQuery from "@/hooks/reactQuery/querys/profile/useProfileQuery";
import Loading from "../commons/loading";
import Empty from "../commons/Empty";
import { isAxiosError } from "axios";
import useMyProfileQuery from "@/hooks/reactQuery/querys/profile/useMyProfileQuery";

export type ProfileMenu = "íŒë§¤ìƒí’ˆ" | "ê±°ë˜í›„ê¸°" | "íŒ”ë¡œì‰" | "íŒ”ë¡œì›Œ" | "ì°œ";

interface IProps {
  my?: boolean;
}

export default function ProfilePage({ my }: IProps) {
  const [profileMenu, setProfileMenu] = useState < ProfileMenu > "íŒë§¤ìƒí’ˆ";
  const { profileData, loadProfileDataLoading, loadProfileDataError } =
    useProfileQuery();

  const { myProfileData, loadMyProfileLoading } = useMyProfileQuery();

  const handleClickMenu = (menu: ProfileMenu) => {
    setProfileMenu(menu);
  };

  if (loadProfileDataLoading || loadMyProfileLoading) {
    return <Loading />;
  }

  if (loadProfileDataError) {
    return (
      <Empty
        message={
          (isAxiosError < { message: string } > loadProfileDataError &&
            loadProfileDataError.response?.data.message) ||
          ""
        }
      />
    );
  }
  return (
    <>
      <ProfileUserInfo
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
      />
      <ProfileDetail
        profileMenu={profileMenu}
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
        my={my}
      />
    </>
  );
}
```

- í˜„ì¬ í•„ìš”í•œ ë¡œì§ê³¼ UIê°€ ì»´í¬ë„ŒíŠ¸ì— ê°™ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

<br>

**ì ìš© í›„**

```javascript
import ProfileUserInfo from "./profileUserInfo/profile-userInfo";
import ProfileDetail from "./profile-detail";
import Loading from "../commons/loading";
import Empty from "../commons/Empty";
import { isAxiosError } from "axios";
import useProfilePage from "@/hooks/profile/useProfilePage";

export type ProfileMenu = "íŒë§¤ìƒí’ˆ" | "ê±°ë˜í›„ê¸°" | "íŒ”ë¡œì‰" | "íŒ”ë¡œì›Œ" | "ì°œ";

interface IProps {
  my?: boolean;
}

export default function ProfilePage({ my }: IProps) {
  const {
    profileMenu,
    profileData,
    myProfileData,
    isLoading,
    error,
    handleClickMenu,
  } = useProfilePage();

  if (isLoading) {
    return <Loading />;
  }

  if (error) {
    return (
      <Empty
        message={
          (isAxiosError < { message: string } > error &&
            error.response?.data.message) ||
          ""
        }
      />
    );
  }
  return (
    <>
      <ProfileUserInfo
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
      />
      <ProfileDetail
        profileMenu={profileMenu}
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
        my={my}
      />
    </>
  );
}
```

- í˜„ì¬ í•„ìš”í•œ ë¡œì§ì´ í•˜ë‚˜ì˜ customhookìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ UIì™€ ë¡œì§ì´ ì˜ ë¶„ë¦¬ë˜ì–´ìˆìŠµë‹ˆë‹¤.

<br>

</details>

<br>

#### âŒ¨ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ í‚¤ë³´ë“œ ìµœì í™”

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ì—ì„œ tab í¬ì»¤ì‹±ì´ ë²—ì–´ë‚˜ëŠ” í˜„ìƒì´ ìˆì—ˆê³ , í‚¤ë³´ë“œ ì ‘ê·¼ì„±ì„ í–¥ìƒ ì‹œí‚¤ê³ ì ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ë³„ë„ì˜ ìœ í‹¸í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ keyDown ì´ë²¤íŠ¸ì— ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- ref ê°ì²´ë¥¼ í†µí•´ ìš”ì†Œë“¤ì— í¬ì»¤ì‹±ì„ ì¡°ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
- escí‚¤ë¥¼ ëˆ„ë¥¼ì‹œ í•´ë‹¹ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ê°€ ë‹«íˆë„ë¡ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ì—ì„œ tab í¬ì»¤ì‹±ì´ ë²—ì–´ë‚˜ëŠ” í˜„ìƒì´ ì—†ì—ˆê³ , í‚¤ë³´ë“œ ì ‘ê·¼ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì „í›„ ë¹„êµ**

**ì ìš© ì „**

![optKeyboard_before](https://github.com/NamJongtae/ITtem/assets/113427991/d9f7833f-9d71-45d9-b4d5-1ba4d6e0ac61)

- ë©”ë‰´ì—ì„œ í¬ì»¤ì‹±ì´ ë²—ì–´ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

**ì ìš© í›„**

![optKeyboard_after](https://github.com/NamJongtae/ITtem/assets/113427991/cf1123e7-a80f-4ea3-8e37-21224ef8396c)

- ë©”ë‰´ì—ì„œ í¬ì»¤ì‹±ì´ ë” ì´ìƒ ë²—ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- escí‚¤ë¥¼ ëˆ„ë¥´ë©´ ë©”ë‰´ê°€ ë‹«íˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**1 ) ìœ í‹¸ í•¨ìˆ˜**

```javascript
/**
 * @param {React.KeyboardEvent<HTMLElement>} params.event - í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ê°ì²´ì…ë‹ˆë‹¤.
 * @param {HTMLElement | null} params.previousTarget - ì´ì „ í¬ì»¤ì‹± ëŒ€ìƒì…ë‹ˆë‹¤.
 * @param {HTMLElement | null} [params.nextTarget] - ë‹¤ìŒ í¬ì»¤ì‹± ëŒ€ìƒì…ë‹ˆë‹¤.
 */
export const optimizationTabFocus = ({
  event,
  previousTarget,
  nextTarget,
}: {
  event: React.KeyboardEvent<HTMLElement>,
  previousTarget: HTMLElement | null,
  nextTarget?: HTMLElement | null,
}) => {
  if (event.shiftKey && event.keyCode === 9 && previousTarget) {
    event.preventDefault();
    console.log(previousTarget);
    previousTarget.focus();
  } else if (nextTarget && event.keyCode === 9) {
    event.preventDefault();
    nextTarget.focus();
  }
};

export const escKeyClose = ({
  event,
  closeCb,
}: {
  event: React.KeyboardEvent<HTMLElement>,
  closeCb: () => void,
}) => {
  if (event.keyCode === 27) {
    closeCb();
  }
};
```

<br>

**2 ) ìœ í‹¸ í•¨ìˆ˜ ì ìš© ì½”ë“œ**

```javascript
import { CATEGORY } from "@/constants/constant";
import useCateogryMobileList from "@/hooks/commons/layout/useCateogryMobileList";
import { escKeyClose } from "@/lib/optimizationKeyboard";
import React, { forwardRef } from "react";

interface IProps {
  isOpenCategory: boolean;
  toggleMenu: () => void;
  handleSelectCategory: (
    e: React.MouseEvent<HTMLButtonElement, MouseEvent>
  ) => void;
  currentCategory: string;
}

const CategoryMobileList = forwardRef<HTMLUListElement, IProps>(
  (
    { isOpenCategory, toggleMenu, handleSelectCategory, currentCategory },
    ref
  ) => {
    const { setCategoryClassName, setCategoryBtnRef, categoryOnKeyDown } =
      useCateogryMobileList({ currentCategory });

    return (
      isOpenCategory && (
        <ul
          className="absolute sm:hidden right-[10px] mt-10 w-[105px] rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none overflow-x-hidden overflow-y-scroll p-1 max-h-[222px] scrollbar-hide animate-entering"
          role="menu"
          ref={ref}
          aria-orientation="vertical"
          aria-labelledby="menu-button"
          onKeyDown={(e) => escKeyClose({ event: e, closeCb: toggleMenu })}
        >
          {CATEGORY.map((category, index) => (
            <li key={category} className="">
              <button
                type="button"
                data-category={category}
                onClick={handleSelectCategory}
                className={setCategoryClassName(category)}
                role="menuitem"
                ref={setCategoryBtnRef(index)}
                onKeyDown={(e) => categoryOnKeyDown(e, index)}
              >
                {category}
              </button>
            </li>
          ))}
        </ul>
      )
    );
  }
);

CategoryMobileList.displayName = "CategoryMobileList";
export default CategoryMobileList;

```

```javascript
// categoryKeyDown í•¨ìˆ˜

const categoryOnKeyDown = (
  e: React.KeyboardEvent<HTMLElement>,
  index: number
) => {
  if (index === CATEGORY.length - 1) {
    optimizationTabFocus({
      event: e,
      previousTarget: lastCategoryPreviousRef.current,
      nextTarget: firstCategoryRef.current,
    });
  } else if (index === 0) {
    optimizationTabFocus({
      event: e,
      previousTarget: lastCategoryRef.current,
    });
  }
};
```

<br>

</details>

<br>

#### ğŸ“± ëª¨ë‹¬ ëª¨ë°”ì¼ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì ìš©

> **ì ìš©ì´ìœ **

- ëª¨ë‹¬ì°½ì—ì„œ ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸° ì•Šê³  ëª¨ë‹¬ì°½ì´ ë‹«íˆë„ë¡ êµ¬í˜„í•˜ì—¬, ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒ ì‹œí‚¤ê³ ì ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- history apië¥¼ ì´ìš©í•˜ì—¬ ë¹ˆ íˆìŠ¤í† ë¦¬ë¥¼ ìƒì„±í•˜ê³  ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆŒë €ì„ ê²½ìš° ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” ê²ƒì„ ë§‰ê³ , ëª¨ë‹¬ì°½ì„ ë‹«íˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ì¬ì‚¬ìš©ì„ ìœ„í•´ ë³„ë„ì˜ customhookë¥¼ ë§Œë“¤ì–´ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ëª¨ë°”ì¼ í™˜ê²½ì—ì„œì˜ ì‚¬ìš©ì ê²½í—˜ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
import { useEffect } from "react";
import { isMobile } from "react-device-detect";

interface IParams {
  closeModal: () => void;
  isOpenModal: boolean;
}
export const useModalMobileBackBtn = ({ closeModal, isOpenModal }: IParams) => {
  // ëª¨ë°”ì¼ ë’¤ë¡œê°€ê¸° êµ¬í˜„ì„ ìœ„í•´ ë¹ˆ íˆìŠ¤í† ë¦¬ ìƒì„±
  // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ í˜„ì¬ í˜ì´ì§€ê°€ ìœ ì§€
  useEffect(() => {
    if (isMobile && isOpenModal) {
      window.history.pushState(null, "", window.location.href);
    }
  }, [isOpenModal]);

  useEffect(() => {
    if (isMobile && isOpenModal) {
      const handlePopState = () => {
        closeModal();
      };

      window.onpopstate = handlePopState;

      return () => {
        window.onpopstate = null;
      };
    }
  }, [closeModal, isOpenModal]);
};
```

- íŒŒë¼ë¯¸í„°ë¡œ closeModal ì½œë°±í•¨ìˆ˜ë¥¼ ë°›ì•„ ë’¤ë¡œê°€ê¸°ê°€ ê°ì§€ëœ ê²½ìš° ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- window.onpopstate ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ë’¤ë¡œê°€ê¸°ë¥¼ ê°ì§€í•˜ì˜€ìŠµë‹ˆë‹¤.
- íŒŒë¼ë¯¸í„°ë¡œ isOpenModal ì¡°ê±´ì„ ë°›ì•„ ëª¨ë‹¬ì°½ì´ ì—´ë ¸ì„ ê²½ìš°ì—ë§Œ ì ìš©ë˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- react-device-detect ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ isMobileë¥¼ ì´ìš©í•˜ì—¬ ëª¨ë°”ì¼ í™˜ê²½ì¼ ê²½ìš°ì—ë§Œ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

</details>

<br>

### ğŸ”« íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

#### ğŸª SSR ì¿ í‚¤ ì „ë‹¬ ë¬¸ì œ

> ë¬¸ì œ ìƒí™©

- SSRì—ì„œ prefetchë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ, ìœ ì € í† í°ì´ ë§Œë£Œë˜ì—ˆì„ ê²½ìš° ë¦¬í”„ë ˆì‰¬ í† í°ì„ í†µí•´ ì—‘ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰ ë°›ëŠ” ë¡œì§ì´ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ, í† í°ì´ ë§Œë£Œë˜ê³ ë‚˜ë©´ prefetchê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> ë¬¸ì œ ì›ì¸

- SSRì—ì„œ api ì‹¤í–‰ì‹œ í—¤ë”ì— ì¿ í‚¤ê°€ ì „ë‹¬ë˜ì§€ ì•Šì•„ ë°œìƒí•œ ë¬¸ì œì…ë‹ˆë‹¤.
- SSRì—ì„œëŠ” ì„œë²„ì‚¬ì´ë“œì˜ ì¿ í‚¤ë§Œì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì˜ ì¿ í‚¤ë¥¼ ì „ë‹¬ ë°›ì„ ìˆ˜ ì—†ì–´ ë°œìƒí•œ ë¬¸ì œì…ë‹ˆë‹¤.

> í•´ê²° ë°©ë²•

- SSRì—ì„œ **context.req.cookies** ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì˜ ì¿ í‚¤ë¥¼ ì§ì ‘ ì„œë²„ ì‚¬ì´ë“œë¡œ ì „ë‹¬í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

> í•´ê²° ì½”ë“œ

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```javascript
export const getServerSideProps: GetServerSideProps = async (context) => {
  const queryClient = new QueryClient();
  const { getIronSession } = await import("iron-session");
  const session = await getIronSession<IronSessionData>(
    context.req,
    context.res,
    sessionOptions
  );
  const cookie = context.req.headers.cookie;
  const myProfuileQueryKeyConfig = queryKeys.profile.my;

  if (session.refreshToken) {
    // headersì— ì¿ í‚¤ë¥¼ ì§ì ‘ ì „ë‹¬
    customAxios.
    await queryClient.prefetchQuery({
      queryKey: myProfuileQueryKeyConfig.queryKey,
      queryFn: async () => {
        try {
          const response = await customAxios("/api/profile", {
            headers: {
              Cookie: cookie,
            },
          });
          return response.data.profile;
        } catch (error) {
          console.error(error);
        }
      },
    });
  }
  return {
    props: { dehydratedState: dehydrate(queryClient) },
  };
};
```

</details>

<br>

#### ğŸŒ vercel ë°°í¬ ë¬¸ì œ

> ë¬¸ì œ ìƒí™©

- vercelì— í”„ë¡œì íŠ¸ ë°°í¬í›„ 504 gateway timeoutê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> ë¬¸ì œ ì›ì¸

- vercelì˜ ë¬´ë£Œ ë²„ì „ì˜ ê²½ìš° ì‘ë‹µ ì‹œê°„ì´ 10s ì´ìƒì¼ ê²½ìš° nextjsì—ì„œëŠ” 504 ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ê³  ì„œë²„ë¥¼ ì¤‘ë‹¨í•˜ê²Œë©ë‹ˆë‹¤.
- í˜„ì¬ vercel CDN ì§€ì—­ì´ ë¯¸êµ­ ì›Œì‹±í„´ DCë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ì‘ë‹µ ì‹œê°„ ì§€ì—°ì´ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> í•´ê²° ë°©ë²•

- í•´ê²°ë°©ë²•ì€ ì‘ë‹µ ì§€ì—°ì‹œê°„ì„ ëŠ˜ë ¤ì£¼ëŠ” pro ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œì™€ ì„œë²„ ìœ„ì¹˜ ë³€ê²½ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
- í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— vercel.json íŒŒì¼ ìƒì„±í•˜ì—¬ ì§€ì—­ ì„¤ì • ì½”ë“œë¥¼ ë„£ìœ¼ë©´ ì§€ì—­ì„ ë³€ê²½í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- vercel CDN ì§€ì—­ì„ ì„œìš¸ë¡œ ë³€ê²½í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

> í•´ê²° ì½”ë“œ

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
// vercel.json
{
  "regions": ["icn1"],
}
```
- í”„ë¡œì íŠ¸ ìµœìƒë‹¨ vercel.jsonë¥¼ ì¶”ê°€í•´ì£¼ê³  ì§€ì—­ì„¤ì •ì„ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.
</details>

<br>

#### ğŸ—œ middleware í† í° ì¸ì¦ ë¡œì§ êµ¬í˜„ ë¬¸ì œ
>ë¬¸ì œ ìƒí™©
- nextjsì—ì„œ ì œê³µí•˜ëŠ” middlewareë¡œ api í•¨ìˆ˜ ìš”ì²­ì‹œ ë§ˆë‹¤ í† í° ì¸ì¦ ë¡œì§ì„ ë§Œë“¤ì–´ ì ìš©í•˜ë ¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ nextjsì—ì„œ ì œê³µí•˜ëŠ” middlewareì—ì„œ í† í° ì¸ì¦ í›„ ë§Œë£Œëœ í† í° ì¬ë°œê¸‰ ë¡œì§, í† ê¸‰ ì¬ë°œê¸‰ í›„ ê¸°ì¡´ ìš”ì²­ ì¬ì‹¤í–‰ êµ¬í˜„ì— í•œê³„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

>í•´ê²° ë°©ë²•
- middlewareì—ì„œ í† í° ì¸ì¦ ë¡œì§ì„ ì‹¤í–‰ í•˜ì§€ ì•Šê³ , ë¼ìš°í„° ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬ë§Œì„ ë‹´ë‹¹í•˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.
- ëŒ€ì‹  í† í° ì¸ì¦ì´ í•„ìš”í•œ api routerë§ˆë‹¤ í† í° ì¸ì¦ ë¡œì§ì´ í¬í•¨ ë³„ë„ì˜ ìœ í‹¸ í•¨ìˆ˜ë¥¼ ì ìš©í•˜ì—¬ ì¸ì¦ì´ ì²˜ë¦¬ë˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- axios intercetorë¥¼ ì´ìš©í•˜ì—¬ api ìš”ì²­ì‹œ í† í° ë§Œë£Œ ì—ëŸ¬ ë°œìƒì‹œ ë¦¬í”„ë ˆì‰¬ í† í°ì„ í†µí•´ ì—‘ì„¸ìŠ¤ í† í°ì„ ì¬ë°œê¸‰í•˜ê³ , ê¸°ì¡´ ìš”ì²­ì„ ì‹¤í–‰í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

>í•´ê²° ì½”ë“œ

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

**1 ) ì¸ì¦ ë¡œì§ ìœ í‹¸ í•¨ìˆ˜** 
```javascript
export async function checkAuthorization(
  req: NextApiRequest,
  res: NextApiResponse
) {
  const { getIronSession } = await import("iron-session");
  const session = await getIronSession<IronSessionType>(
    req,
    res,
    sessionOptions
  );
  const accessToken = session.accessToken;

  const decodeAccessToken = await verifyToken(
    accessToken as string,
    process.env.NEXT_SECRET_ACCESS_TOKEN_KEY as string
  );

  if (!decodeAccessToken?.isValid) {
    return { isValid: false, message: "ë§Œë£Œëœ í† í°ì´ì—ìš”." };
  }

  const redisAccessToken = await getToken(
    decodeAccessToken?.data?.user.uid as string,
    "accessToken"
  );

  if (accessToken && accessToken !== redisAccessToken) {
    return { isValid: false, message: "ë§Œë£Œëœ í† í°ì´ì—ìš”." };
  } else {
    return {
      isValid: true,
      auth: decodeAccessToken.data?.user,
      message: "ìœ íš¨í•œ í† í°ì´ì—ìš”.",
    };
  }
}
```

<br>

**2 ) axios interceptor ì„¤ì •**
```javascript
const BASE_URL = process.env.NEXT_PUBLIC_BASE_URL as string;
const customAxios = axios.create({
  baseURL: BASE_URL,
});

customAxios.interceptors.response.use(
  (response) => {
    return response;
  },
  async (error: AxiosError) => {
    const originalRequest = error.config;
    if (isAxiosError<RegenerateAccessTokenResponseData>(error)) {
      if (
        error.response?.status === 401 &&
        error.response?.data.message === "ë§Œë£Œëœ í† í°ì´ì—ìš”."
      ) {
        try {
          const cookies = originalRequest?.headers["Cookie"];
          const response = await axios(`${BASE_URL}/api/auth/refreshToken`, {
            headers: {
              Cookie: cookies,
            },
          });
          const reposeCookies = response.headers["set-cookie"];
          if (reposeCookies) {
            originalRequest!.headers["Cookie"] = reposeCookies.join("; ");
          }
          if (originalRequest) return axios(originalRequest);
        } catch (refreshError) {
          if (isAxiosError<RegenerateAccessTokenResponseData>(refreshError)) {
            if (refreshError.response?.status === 401) {
              if (typeof window !== "undefined") {
                toast.warn("ë¡œê·¸ì¸ì´ ë§Œë£Œë¬ì–´ìš”.", {
                  autoClose: 3000,
                });
                window.location.replace("/signin");
              }
            }
            return Promise.reject(refreshError);
          }
        }
      }
    }

    return Promise.reject(error);
  }
);

export default customAxios;
``` 

</details>

<br>

#### ğŸ–Œ tailwindCSS ë™ì  ìŠ¤íƒ€ì¼ë§ ë¬¸ì œ

> ë¬¸ì œ ìƒí™©

- tailwindCSSì—ì„œ ë™ì ìœ¼ë¡œ ìŠ¤íƒ€ì¼ë§ ì ìš©ì‹œ ì ìš©ì´ ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> ë¬¸ì œ ì›ì¸

- tailwindCSSëŠ” ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ì˜ CSS í”„ë ˆì„ì›Œí¬ë¡œ, ê¸°ë³¸ì ìœ¼ë¡œ ì •ì  í´ë˜ìŠ¤ ì´ë¦„ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë™ì ìœ¼ë¡œ í´ë˜ìŠ¤ëª…ì´ ì ìš©ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

> í•´ê²° ë°©ë²•

- ë™ì ìœ¼ë¡œ ì ìš©í•  í´ë˜ìŠ¤ëª…ì„ safelistì— ë¯¸ë¦¬ ì¶”ê°€ ì„¤ì •í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

> í•´ê²° ì½”ë“œ

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
  safelist: [
    "animate-slideOutRight",
    "animate-slideOutLeft",
    "animate-entering",
    "animate-leaving",
    "animate-slideFadeOutRight",
    "animate-bounceOpacity",
    "animate-slideUp",
    "animate-slideDown",
    "bg-red-400",
    "before:content-['íŒë§¤ì™„ë£Œ']",
    "before:content-['ê±°ë˜ì¤‘']",
    "before:text-3xl",
  ],

```

</details>

<br>

### ğŸ‘€ êµ¬í˜„ ê¸°ëŠ¥ ë¯¸ë¦¬ë³´ê¸° ( ì œëª© í´ë¦­ ì‹œ í•´ë‹¹ ê¸°ëŠ¥ ìƒì„¸ì„¤ëª…ìœ¼ë¡œ ì´ë™ë©ë‹ˆë‹¤. )
