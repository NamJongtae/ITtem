# ğŸ“¦ ITtem

![thumbnail](https://github.com/NamJongtae/ITtem/assets/113427991/f996dd94-9c15-481f-a9e4-df3e4d936b1d)

#### ğŸˆ í…ŒìŠ¤íŠ¸ ê³„ì •

| ID         | PW         |
| ---------- | ---------- |
| test@a.com | asdzxc123! |

#### ğŸŒ ë°°í¬ URL : ğŸ“¦ [ITtem](https://ittem.vercel.app)

<br/>

### ğŸ“ƒ ëª©ì°¨ (í´ë¦­ ì‹œ í•´ë‹¹ ëª©ì°¨ë¡œ ì´ë™í•©ë‹ˆë‹¤.)

- [ğŸ™‹â€â™‚ í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)

- [ğŸ“† ê°œë°œê¸°ê°„](#-ê°œë°œê¸°ê°„)

- [âš™ ê°œë°œí™˜ê²½](#-ê°œë°œí™˜ê²½)

- [ğŸ”© ë²¡ì—”ë“œ&API](#-ë²¡ì—”ë“œ--api)

- [ğŸ“œ API Router ëª…ì„¸](#-api-router-ëª…ì„¸)

- [â›“ ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)

- [ğŸ’¡ í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì´ìœ ](#-í”„ë ˆì„ì›Œí¬-ë°-ë¼ì´ë¸ŒëŸ¬ë¦¬-ì‚¬ìš©-ì´ìœ )

- [ğŸ”¨ ë¦¬íŒ©í† ë§](#-ë¦¬íŒ©í† ë§)

  - [ğŸ—œ bundle ì‚¬ì´ì¦ˆ ìµœì í™”](#-bundle-ì‚¬ì´ì¦ˆ-ìµœì í™”)
  - [ğŸ­ query-key-factory ì ìš©](#-query-key-factory-ì ìš©)
  - [ğŸ§© customhook íŒ¨í„´ ë¡œì§ ë¶„ë¦¬](#-customhook-íŒ¨í„´-ë¡œì§-ë¶„ë¦¬)
  - [âŒ¨ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ í‚¤ë³´ë“œ ìµœì í™”](#-ëª¨ë‹¬-ë°-ë“œë¡­-ë‹¤ìš´-ë©”ë‰´-í‚¤ë³´ë“œ-ìµœì í™”)
  - [ğŸ“± ëª¨ë‹¬ ëª¨ë°”ì¼ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì ìš©](#-ëª¨ë‹¬-ëª¨ë°”ì¼-ë’¤ë¡œê°€ê¸°-ë²„íŠ¼-ì ìš©)
  - [ğŸ“¤ App Router ë§ˆì´ê·¸ë ˆì´ì…˜](#-app-router-ë§ˆì´ê·¸ë ˆì´ì…˜)
  - [ğŸ—ƒ í´ë”ëª… ë° íŒŒì¼ëª… ì¼ê´€ëœ ê·œì¹™ ì ìš©](#-í´ë”ëª…-ë°-íŒŒì¼ëª…-ì¼ê´€ëœ-ê·œì¹™-ì ìš©)
  - [ğŸ”„ redux-toolkit zustandë¡œ ì „í™˜](#-redux-toolkit-zustandë¡œ-ì „í™˜)
  - [ğŸš¹ ìœ ì € ì •ë³´ ê´€ë¦¬ ë¡œì§ ìˆ˜ì •](#-ìœ ì €-ì •ë³´-ê´€ë¦¬-ë¡œì§-ìˆ˜ì •)
  - [ğŸ”‘ QueryKey ê´€ë¦¬ ê°œì„ ](#-querykey-ê´€ë¦¬-ê°œì„ )
  - [âœ¨ Any íƒ€ì…ì„ ëª…í™•í•œ íƒ€ì…ìœ¼ë¡œ ì „í™˜](#-any-íƒ€ì…ì„-ëª…í™•í•œ-íƒ€ì…ìœ¼ë¡œ-ì „í™˜)
  - [ğŸ—‚ ë¹„ë™ê¸° ì²˜ë¦¬ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ ë° Suspense Fallback UI ê°œì„ ](#-ë¹„ë™ê¸°-ì²˜ë¦¬-ì»´í¬ë„ŒíŠ¸-ë¶„ë¦¬-ë°-suspense-fallback-ui-ê°œì„ )
  - [ğŸ”¨ Next.js v15 ë§ˆì´ê·¸ë ˆì´ì…˜](#-nextjs-v15-ë§ˆì´ê·¸ë ˆì´ì…˜)
  - [ğŸ”§ react-infinite-scroller â†’ react-intersection-observerë¡œ ëŒ€ì²´](#-react-infinite-scroller--react-intersection-observerë¡œ-ëŒ€ì²´)
  - [ğŸˆ pageë³„ SkeletonUI Loading ì»´í¬ë„ŒíŠ¸ ì ìš©](#-pageë³„-skeletonui-loading-ì»´í¬ë„ŒíŠ¸-ì ìš©)
  - [ğŸ’« ì „ì—­ ë¡œë”© ì»´í¬ë„ŒíŠ¸ ë° ë¡œë”© ìƒíƒœ ì¶”ê°€](#-ì „ì—­-ë¡œë”©-ì»´í¬ë„ŒíŠ¸-ë°-ë¡œë”©-ìƒíƒœ-ì¶”ê°€)
  - [ğŸ¯ SRP ì›ì¹™ì— ë”°ë¼ custom hook ì½”ë“œ ë¶„ë¦¬ ë° hookëª… ìˆ˜ì •](#-srp-ì›ì¹™ì—-ë”°ë¼-custom-hook-ì½”ë“œ-ë¶„ë¦¬-ë°-hookëª…-ìˆ˜ì •)
  - [ğŸ” Zustand ì´ë©”ì¼ ì¸ì¦ ìƒíƒœ Context APIë¡œ ì „í™˜](#-zustand-ì´ë©”ì¼-ì¸ì¦-ìƒíƒœ-context-apië¡œ-ì „í™˜)
  - [ğŸ—‚ ë„ë©”ì¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì ìš©](#-ë„ë©”ì¸-ë””ë ‰í† ë¦¬-êµ¬ì¡°-ì ìš©)
  - [ğŸ—ƒ ë„ë©”ì¸ ë””ë ‰í† ë¦¬ ë‚´ë¶€ êµ¬ì¡° í˜ì´ì§€ë³„ ì„¸ë¶„í™” ë° ë„¤ì´ë° ê·œì¹™ ì¼ê´€í™”](#-ë„ë©”ì¸-ë””ë ‰í† ë¦¬-ë‚´ë¶€-êµ¬ì¡°-í˜ì´ì§€ë³„-ì„¸ë¶„í™”-ë°-ë„¤ì´ë°-ê·œì¹™-ì¼ê´€í™”)
  - [ğŸ§ª ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±](#-ë‹¨ìœ„-í…ŒìŠ¤íŠ¸-ì½”ë“œ-ì‘ì„±)
  - [ğŸ‘¾ GitHub Actionsë¥¼ í™œìš©í•œ CI/CD êµ¬ì¶•ì„ í†µí•œ ê°œë°œí™˜ê²½ ê°œì„ ](#-github-actionsë¥¼-í™œìš©í•œ-cicd-êµ¬ì¶•ì„-í†µí•œ-ê°œë°œí™˜ê²½-ê°œì„ )
  - [ğŸSentry ì—°ë™ì„ í†µí•œ ì—ëŸ¬ ê´€ë¦¬ ê°œì„ ](#-sentry-ì—°ë™ì„-í†µí•œ-ì—ëŸ¬-ê´€ë¦¬-ê°œì„ )
  - [ğŸª„ ë¶ˆí•„ìš”í•œ SSR í˜ì´ì§€ SSG/ISR í˜ì´ì§€ë¡œ ì „í™˜](#-ë¶ˆí•„ìš”í•œ-ssr-í˜ì´ì§€-ssgisr-í˜ì´ì§€ë¡œ-ì „í™˜)
  - [ğŸ” JWT ë¡œê·¸ì¸ ì¸ì¦ DB Session ë¡œê·¸ì¸ ì¸ì¦ ë°©ì‹ìœ¼ë¡œ ë³€ê²½](#-jwt-ë¡œê·¸ì¸-ì¸ì¦-db-session-ë¡œê·¸ì¸-ì¸ì¦-ë°©ì‹ìœ¼ë¡œ-ë³€ê²½)

- [ğŸ”« íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)

  - [ğŸª Client to SSR cookie ì „ë‹¬ ë¬¸ì œ](#-client-to-ssr-cookie-ì „ë‹¬-ë¬¸ì œ)
  - [ğŸ’« Hydrate Redux state ì´ˆê¸°í™” ë¬¸ì œ](#-hydrate-redux-state-ì´ˆê¸°í™”-ë¬¸ì œ)
  - [ğŸŒ vercel ë°°í¬ ë¬¸ì œ](#-vercel-ë°°í¬-ë¬¸ì œ)
  - [â— 504 Gateway Timeout Error](#-504-gateway-timeout-error)
  - [ğŸ—œ middleware í† í° ì¸ì¦ ë¡œì§ êµ¬í˜„ ë¬¸ì œ](#-middleware-í† í°-ì¸ì¦-ë¡œì§-êµ¬í˜„-ë¬¸ì œ)
  - [ğŸ–Œ tailwindcss ë™ì  ìŠ¤íƒ€ì¼ë§ ë¬¸ì œ](#-tailwindcss-ë™ì -ìŠ¤íƒ€ì¼ë§-ë¬¸ì œ)
  - [âŒ ë°°í¬ í›„ Hydrate ë¶ˆì¼ì¹˜ ë¬¸ì œ](#-ë°°í¬-í›„-hydrate-ë¶ˆì¼ì¹˜-ë¬¸ì œ)
  - [ğŸª SSR to Client cookie ì „ë‹¬ ë¬¸ì œ](#-ssr-to-client-cookie-ì „ë‹¬-ë¬¸ì œ)
  - [ğŸ§¨ CustomAxios acceessToken ì¬ë°œê¸‰ ì¤‘ë³µ ìš”ì²­ ë¬¸ì œ](#-customaxios-accesstoken-ì¬ë°œê¸‰-ì¤‘ë³µ-ìš”ì²­-ë¬¸ì œ)
  - [ğŸ”´ Layout ì»´í¬ë„ŒíŠ¸ Invalid hook call ì—ëŸ¬](#-layout-ì»´í¬ë„ŒíŠ¸-invalid-hook-call-ì—ëŸ¬)
  - [ğŸ•³ ë¡œê·¸ì•„ì›ƒ ì‹œ ë¹ˆ ìœ ì € ì •ë³´ê°€ í˜ì´ì§€ì— ë…¸ì¶œë˜ëŠ” ë¬¸ì œ](#-ë¡œê·¸ì•„ì›ƒ-ì‹œ-ë¹ˆ-ìœ ì €-ì •ë³´ê°€-í˜ì´ì§€ì—-ë…¸ì¶œë˜ëŠ”-ë¬¸ì œ)
  - [ğŸ›‘ useSuspenseQuery SSR í™˜ê²½ì—ì„œì˜ ë¬¸ì œ](#-usesuspensequery-ssr-í™˜ê²½ì—ì„œì˜-ë¬¸ì œ)

- [ğŸ‘€ êµ¬í˜„ ê¸°ëŠ¥ ë¯¸ë¦¬ë³´ê¸°](#-êµ¬í˜„-ê¸°ëŠ¥-ë¯¸ë¦¬ë³´ê¸°--ì œëª©-í´ë¦­-ì‹œ-í•´ë‹¹-ê¸°ëŠ¥-ìƒì„¸ì„¤ëª…ìœ¼ë¡œ-ì´ë™ë©ë‹ˆë‹¤-)

<br>

### ğŸ™‹â€â™‚ í”„ë¡œì íŠ¸ ì†Œê°œ

> **ITtemì€ ì¤‘ê³  ìƒí’ˆì„ ê±°ë˜í•˜ê³ , ë¬´ë£Œ ë‚˜ëˆ”í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.**

- ì¤‘ê³  ìƒí’ˆì„ íŒë§¤, êµ¬ë§¤ í•˜ê±°ë‚˜ ë¬´ë£Œ ë‚˜ëˆ” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì±„íŒ…ì„ í†µí•´ í¸ë¦¬í•˜ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì†Œí†µì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ë‹¤ì–‘í•œ ìƒí’ˆì„ í•©ë¦¬ì ì¸ ê°€ê²©ì— ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‹¤ì‹œê°„ ì•Œë¦¼ ê¸°ëŠ¥ìœ¼ë¡œ ê±°ë˜ ê³¼ì •ì„ ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

### ğŸ“† ê°œë°œê¸°ê°„

**ê°œë°œ ì‹œì‘ : 2024. 04. 05**

**ê°œë°œ ì™„ë£Œ : 2024. 06. 29**

<br>

### âš™ ê°œë°œí™˜ê²½

| í”„ë¡ íŠ¸ì—”ë“œ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ë²¡ì—”ë“œ                                                                                                                                                                                                                                                                                | ë””ìì¸                                                                                    | ë°°í¬, ê´€ë¦¬                                                                                                                                                            |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <img alt="Html" src ="https://img.shields.io/badge/HTML5-E34F26?logo=HTML5&logoColor=white"/> <img alt="CSS" src ="https://img.shields.io/badge/CSS3-1572B6?logo=CSS3&logoColor=white"/> <img alt="TypeScript" src ="https://img.shields.io/badge/TypeScript-3178C6?logo=TypeScript&logoColor=white"/> <img src="https://img.shields.io/badge/react-61DAFB?logo=react&logoColor=black"> <img src ="https://img.shields.io/badge/next.js-000000?logo=nextdotjs&logoColor=white"/> <img src="https://img.shields.io/badge/redux_toolkit-764ABC?&logo=redux&logoColor=white"> <img src="https://img.shields.io/badge/reactquery-FF4154?&logo=reactquery&logoColor=fff"> <img src="https://img.shields.io/badge/tailwindcss-0F172A?&logo=tailwindcss"> | <img src ="https://img.shields.io/badge/-MongoDB-13aa52?logo=mongodb&logoColor=white"/> <img src ="https://img.shields.io/badge/next.js_API_Routers-000000?logo=nextdotjs&logoColor=white"/> <img src ="https://img.shields.io/badge/firebase-ffca28?logo=firebase&logoColor=black"/> | <img src="https://img.shields.io/badge/figma-F24E1E?logo=figma&logoColor=white" width=70> | <img src="https://img.shields.io/badge/vercel-000000?logo=vercel&logoColor=white"> <img src="https://img.shields.io/badge/github-181717?logo=github&logoColor=white"> |

<br>

### ğŸ”© ë²¡ì—”ë“œ & API

Serverlessë¡œ ë²¡ì—”ë“œ APIë¥¼ êµ¬ì¶•í•˜ì˜€ìŠµë‹ˆë‹¤.

- Nextjs api routersë¥¼ í†µí•´ api ì—”ë“œ í¬ì¸íŠ¸ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- firebaseë¥¼ í†µí•´ ì‹¤ì‹œê°„ ì±„íŒ… ë° ì•Œë¦¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ë³„ë„ì˜ ì„œë²„ ê´€ë¦¬ê°€ í•„ìš” ì—†ëŠ” firebase, mongodbë¥¼ ì´ìš©í•˜ì—¬ dbë¥¼ êµ¬ì¶•í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

### â›“ ì•„í‚¤í…ì²˜

![project-architecture](https://github.com/user-attachments/assets/9290621e-fa4e-4be9-bd19-254f17260267)

### ğŸ“œ API Router ëª…ì„¸

<details>
<summary>API ì „ì²´ ì—”ë“œ í¬ì¸íŠ¸ ë³´ê¸°</summary>

<br>

| ê¸°ëŠ¥                    | ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸                                                                              |
| ----------------------- | ------ | --------------------------------------------------------------------------------------- |
| **ìœ ì €(auth)**          |
| ë¡œê·¸ì¸                  | POST   | /api/auth/signin                                                                        |
| Kakao ì†Œì…œ ë¡œê·¸ì¸       | POST   | /api/auth/signin/kakao                                                                  |
| Kakao ê³„ì • ë°ì´í„° ì¡°íšŒ  | POST   | /api/auth/signin/kakao/user                                                             |
| Google ì†Œì…œ ë¡œê·¸ì¸      | POST   | /api/auth/signin/google                                                                 |
| Google ê³„ì • ë°ì´í„° ì¡°íšŒ | POST   | /api/auth/signin/google/user                                                            |
| íšŒì›ê°€ì…                | POST   | /api/auth/signup                                                                        |
| ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸        | POST   | /api/auth/dulication/email                                                              |
| ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸        | POST   | /api/auth/dulication/nickname                                                           |
| ì´ë©”ì¼ í™•ì¸             | POST   | /api/auth/check-email                                                                   |
| ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°/ë³€ê²½      | PATCH  | /api/auth/change-password                                                               |
| ì´ë©”ì¼ ì¸ì¦ ë©”ì¼ ì „ì†¡   | POST   | /api/auth/send-verify-email                                                             |
| ì´ë©”ì¼ ì¸ì¦             | POST   | /api/auth/verify-email                                                                  |
| ìœ ì € ì¸ì¦               | GET    | /api/auth/user                                                                          |
| ì„¸ì…˜ ì¿ í‚¤ í™•ì¸          | GET    | /api/auth/session                                                                       |
| í† í° ì¬ë°œê¸‰             | POST   | /api/auth/refresh-token                                                                 |
| í† í° ì‚­ì œ               | DELETE | /api/auth/delete-token                                                                  |
| ë¡œê·¸ì•„ì›ƒ                | POST   | /api/auth/signout                                                                       |
| **í”„ë¡œí•„(profile)**     |
| ë‚˜ì˜ í”„ë¡œí•„ ì¡°íšŒ        | GET    | /api/profile                                                                            |
| í”„ë¡œí•„ ìˆ˜ì •             | PATCH  | /api/profile                                                                            |
| í”„ë¡œí•„ íŒ”ë¡œì›Œ ëª©ë¡ ì¡°íšŒ | POST   | /api/profile/followers?cursor={cursor}&limit={limit}                                    |
| í”„ë¡œí•„ íŒ”ë¡œì‰ ëª©ë¡ ì¡°íšŒ | POST   | /api/profile/followings                                                                 |
| í”„ë¡œí•„ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ   | POST   | /api/profile/product?category={category}&limit={limit}&cursor={cursor}                  |
| í”„ë¡œí•„ ì°œ ëª©ë¡ ì¡°íšŒ     | POST   | /api/profile/wish?cursor={cursor}&limit={limit}                                         |
| ìœ ì € ì°œ ëª©ë¡ ì‚­ì œ       | DELETE | /api/profile/wish                                                                       |
| ìœ ì € í”„ë¡œí•„ ì¡°íšŒ        | GET    | /api/:uid/profile                                                                       |
| ìœ ì € íŒ”ë¡œìš°             | POST   | /api/profile/:uid/follow                                                                |
| ìœ ì € ì–¸íŒ”ë¡œìš°           | POST   | /api/profile/:uid/follow                                                                |
| ìœ ì € ë¦¬ë·° ëª©ë¡ ì¡°íšŒ     | GET    | /api/profile/:uid/review                                                                |
| **ìƒí’ˆ(product)**       |
| ìƒí’ˆ ì¡°íšŒ               | GET    | /api/product                                                                            |
| ìƒí’ˆ ê²€ìƒ‰               | GET    | /api/product/search?cursor={cursor}&limit={limit}&category={category}&keyword={keyword} |
| ì˜¤ëŠ˜ì˜ ìƒí’ˆ ì¡°íšŒ        | GET    | /api/product/today?cursor={cursor}&limit={limit}                                        |
| ìƒí’ˆ ì—…ë¡œë“œ             | POST   | /api/product/upload                                                                     |
| ìƒí’ˆ ìƒì„¸               | GET    | /api/product/:produId                                                                   |
| ìƒí’ˆ ìˆ˜ì •               | PATCH  | /api/product/:produId                                                                   |
| ìƒí’ˆ ì‚­ì œ               | DELETE | /api/product/:produId                                                                   |
| ìƒí’ˆ êµ¬ë§¤               | GET    | /api/product/:productId/purchase                                                        |
| ìƒí’ˆ ì‹ ê³                | PATCH  | /api/product/:productId/report                                                          |
| ìƒí’ˆ ë¦¬ë·° ì¡°íšŒ          | GET    | /api/product/:prodcutId/review                                                          |
| ìƒí’ˆ ë¦¬ë·° ì‘ì„±          | POST   | /api/product/:productId/review                                                          |
| ìƒí’ˆ ì°œ                 | PATCH  | /api/product/:productId/wish                                                            |
| ìƒí’ˆ ì°œí•´ì œ             | DELETE | /api/product/:productId/wish                                                            |
| ìƒí’ˆ ì¡°íšŒìˆ˜ ì¦ê°€        | PATCH  | /api/product/:productId/view                                                            |
| ìƒí’ˆ êµ¬ë§¤ ì·¨ì†Œ          | PATCH  | /api/product/:productId/purchase/cancel                                                 |
| ìƒí’ˆ êµ¬ë§¤ ì·¨ì†Œ ì² íšŒ     | PATCH  | /api/product/:productId/purchase/cancel/withdrawal                                      |
| ìƒí’ˆ ì¸ìˆ˜ í™•ì¸          | PATCH  | /api/product/:productId/purchase/product-receipt-confirmation                           |
| ìƒí’ˆ ë°˜í’ˆ               | PATCH  | /api/product/:productId/purchase/return                                                 |
| ìƒí’ˆ ë°˜í’ˆ ì² íšŒ          | PATCH  | /api/product/:productId/purchase/return/withdrawal                                      |
| ìƒí’ˆ ë°˜í’ˆ ì „ë‹¬ í™•ì¸     | PATCH  | /api/product/:productId/purchase/return/delivery-confirmation                           |
| ìƒí’ˆ êµ¬ë§¤ ìš”ì²­ í™•ì¸     | PATCH  | /api/product/:productId/sales/purchase-request-confirmation                             |
| ìƒí’ˆ êµ¬ë§¤ ìš”ì²­ ê±°ì ˆ     | PATCH  | /api/product/:productId/sales/purchase-request-reject                                   |
| ìƒí’ˆ ì „ë‹¬ í™•ì¸          | PATCH  | /api/product/:productId/sales/delivery-confirmation                                     |
| ìƒí’ˆ ì·¨ì†Œ ìš”ì²­ í™•ì¸     | PATCH  | /api/product/:productId/sales/cancel-comfirmation                                       |
| ìƒí’ˆ ì·¨ì†Œ ìš”ì²­ ê±°ì ˆ     | PATCH  | /api/product /:productId/sales/cancel-reject                                            |
| ìƒí’ˆ ë°˜í’ˆ ìš”ì²­ í™•ì¸     | PATCH  | /api/product/:productId/sales/return-confirmation                                       |
| ìƒí’ˆ ë°˜í’ˆ ìš”ì²­ ê±°ì ˆ     | PATCH  | /api/product/:productId/sales/return-reject                                             |
| **ê±°ë˜ ì •ë³´(trading)**  |
| íŒë§¤ ê±°ë˜ ì •ë³´ ì¡°íšŒ     | GET    | /api/trading/sales?cursor={cursor}&limit={limt}&status={status}&search={search}         |
| êµ¬ë§¤ ê±°ë˜ ì •ë³´ ì¡°íšŒ     | GET    | /api/trading/purchase?cursor={cursor}&limit={limt}&status={status}&search={search}      |
| **ì±„íŒ…(chat)**          |
| ì±„íŒ…ë°© ì¡°íšŒ             | POST   | /api/chat                                                                               |
| ì±„íŒ…ë°© ì‚­ì œ             | DELETE | /api/chat/:chatRoomId                                                                   |
| ì±„íŒ…ë°© ì…ì¥             | PATCH  | /api/chat/:chatRoomId/join                                                              |
| ì±„íŒ…ë°© í‡´ì¥             | PATCH  | /api/chat/:chatRoomId/exit                                                              |
| ì±„íŒ…ë°© ë‚˜ê°€ê¸°           | PATCH  | /api/chat/:chatRoomId/leave                                                             |
| ì±„íŒ…ë°© ë©”ì„¸ì§€ ì „ì†¡      | POST   | /api/chat/:chatRoomId/message                                                           |
| **ì•Œë¦¼(notification)**  |
| ì•Œë¦¼ ë©”ì„¸ì§€ ì¡°íšŒ        | GET    | /api/notification                                                                       |
| ì•Œë¦¼ ë©”ì„¸ì§€ ì „ì²´ ì‚­ì œ   | DELETE | /api/notification                                                                       |
| ì•Œë¦¼ ë©”ì„¸ì§€ ì „ì²´ ì½ìŒ   | PATCH  | /api/notification                                                                       |
| ì•Œë¦¼ ë©”ì„¸ì§€ ì‚­ì œ        | DELETE | /api/notification/:messageId                                                            |
| ì•Œë¦¼ ë©”ì„¸ì§€ ì½ìŒ        | PATCH  | /api/notification /:messageId                                                           |

</details>

[ğŸ‘‰ API Router ìƒì„¸ ëª…ì„¸ ë³´ê¸°](https://github.com/NamJongtae/ITtem/wiki/API-Router-%EB%AA%85%EC%84%B8)

<br>

### ğŸ’¡ í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì´ìœ 

#### Axios

- Fetch API ë¹„í•´ ì§ê´€ì ì¸ ë¬¸ë²• ë° í¸ì˜ ê¸°ëŠ¥(ì—ëŸ¬ í•¸ë“¤ë§, JSON ìë™ ë³€í™˜ ë“±)ì„ ì œê³µ.
- ìš”ì²­ì´ë‚˜ ì‘ë‹µì „ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” intercetor ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” í† í° ê´€ë¦¬ ë¡œì§ì„ ìˆ˜í–‰.

#### Next.js

- **SSR, SSG, ISR ì œê³µ**: ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR), ì •ì  ì‚¬ì´íŠ¸ ìƒì„±(SSG), ì ì§„ì  ì •ì  ì¬ìƒì„±(ISR)ì„ ì§€ì›í•˜ì—¬ ë‹¤ì–‘í•œ ë Œë”ë§ ë°©ì‹ ì œê³µ.
- **SEO ìµœì í™”**: Pre-renderingì„ í†µí•´ SEO(ê²€ìƒ‰ ì—”ì§„ ìµœì í™”)ì— ìœ ë¦¬.
- **ì´ë¯¸ì§€ ìµœì í™” ë° ì½”ë“œ ë¶„í• **: ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ì´ë¯¸ì§€ ìµœì í™” ë° ì½”ë“œ ë¶„í•  ê¸°ëŠ¥ ì œê³µ.
- **í˜ì´ì§€ ê¸°ë°˜ ë¼ìš°íŒ…**: ë³„ë„ì˜ ë¼ìš°íŒ… ì„¤ì • ì—†ì´ í˜ì´ì§€ íŒŒì¼ ìƒì„±ë§Œìœ¼ë¡œ ë¼ìš°íŒ… ê°€ëŠ¥.
- **Serverless í™˜ê²½ ì§€ì›**: API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì†ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ” API Routes ì œê³µ.

#### React Query

- **ì¿¼ë¦¬ í‚¤ ë° í•¨ìˆ˜ ê´€ë¦¬ ìš©ì´**: ì¿¼ë¦¬ í‚¤ì™€ ì¿¼ë¦¬ í•¨ìˆ˜ë¥¼ ê¸°ëŠ¥ë³„ë¡œ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ ë³´ìˆ˜ ë° ê´€ë¦¬ê°€ ìš©ì´.
- **ìºì‹± ë° ë™ê¸°í™”**: ì„œë²„ ìƒíƒœ ê´€ë¦¬ì™€ ìºì‹±, ë™ê¸°í™”ë¥¼ í†µí•´ íš¨ìœ¨ì ì¸ ë°ì´í„° í˜ì¹­ ë° ìƒíƒœ ê´€ë¦¬ ê°€ëŠ¥.
- **ìë™ ë¦¬í˜ì¹­**: ë°ì´í„° ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ë¦¬í˜ì¹­í•˜ì—¬ ìµœì‹  ìƒíƒœ ìœ ì§€.
- **ë°°ê²½ ë°ì´í„° ì—…ë°ì´íŠ¸**: ì‚¬ìš©ìê°€ ë³´ëŠ” ë™ì•ˆ ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ ë°°ê²½ì—ì„œ ì²˜ë¦¬.

#### Zustand

- **ì „ì—­ ìƒíƒœ ê´€ë¦¬**: ì „ì—­ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ê°•ë ¥í•œ ë„êµ¬ë¡œ, ì¼ë°˜ Reduxë³´ë‹¤ ì‚¬ìš©ì´ ê°„í¸í•˜ê³  ê°€ë²¼ì›€.
- **ì½”ë“œ ê°„ì†Œí™”**: ë³µì¡í•œ ì„¤ì • ì—†ì´ ê°„ê²°í•˜ê²Œ ìƒíƒœ ê´€ë¦¬ ë¡œì§ êµ¬í˜„ ê°€ëŠ¥.

#### MongoDB

- **ë¬´ì„œë²„ ë°ì´í„° ê´€ë¦¬**: ë³„ë„ì˜ ì„œë²„ ê´€ë¦¬ ì—†ì´ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ë°ì´í„°ë¥¼ í¸ë¦¬í•˜ê²Œ ê´€ë¦¬.
- **ê°„ë‹¨í•œ ì‚¬ìš© ë°©ë²•**: ì‚¬ìš©ì´ ì‰¬ì›Œ ë¹ ë¥´ê²Œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ë° ìš´ì˜ ê°€ëŠ¥.
- **ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„±**: NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ ìŠ¤í‚¤ë§ˆê°€ ìœ ì—°í•˜ì—¬ ë‹¤ì–‘í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì‰½ê²Œ ì €ì¥.

#### Firebase

- **ì‹¤ì‹œê°„ ë°ì´í„° í†µì‹ **: ì±„íŒ… ë° ì•Œë¦¼ ê¸°ëŠ¥ì„ ìœ„í•œ ì‹¤ì‹œê°„ ë°ì´í„° í†µì‹  ì§€ì›.

#### Jsonwebtoken

- **ì‚¬ìš©ì ì¸ì¦ ë° ì¸ê°€**: ë¬´ìƒíƒœ(stateless) ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì¸ì¦ ë° ì¸ê°€ êµ¬í˜„ ê°€ëŠ¥.
- **ì„œë²„ ì„¸ì…˜ ë¶ˆí•„ìš”**: ì„œë²„ì— ë³„ë„ì˜ ì„¸ì…˜ ì €ì¥ì†Œê°€ í•„ìš”í•˜ì§€ ì•ŠìŒ.
- **ë³´ì•ˆ ê°•í™”**: ì„œëª…ëœ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥.

#### IronSession

- Access Token ë° Refresh Tokenì´ ë¸Œë¼ìš°ì €ì— ì§ì ‘ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ í•˜ì—¬ ë³´ì•ˆì„ ê°•í™”.
- Next.js í™˜ê²½ì— ìµœì í™”ëœ ì„¸ì…˜ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, App Routerì™€ API Routes ë“± ë‹¤ì–‘í•œ ê³³ì—ì„œ ì‚¬ìš©ì´ ìš©ì´.
- ë³„ë„ì˜ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€(Redis, DB ë“±) ì—†ì´ë„, ìƒíƒœ ê¸°ë°˜ ì¸ì¦ ì„¸ì…˜ì„ ê°„ë‹¨í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆì–´ êµ¬í˜„ì´ ê°„í¸.

#### Redis

- **í† í° ê´€ë¦¬ ë° ë³´ì•ˆ ê°•í™”**: ë¡œê·¸ì¸ í™•ì¸ ë° í† í° íƒˆì·¨ ì‹œ í† í° ë¬´íš¨í™” ì²˜ë¦¬ ê°€ëŠ¥.
- **ë¹ ë¥¸ ì„±ëŠ¥**: ë©”ëª¨ë¦¬ ê¸°ë°˜ ë°ì´í„° ì €ì¥ì†Œë¡œ ë¹ ë¥¸ ì†ë„ ì œê³µ.
- **TTL ê¸°ëŠ¥**: í† í° ë§Œë£Œ ì‹œê°„ì„ ì„¤ì •í•  ìˆ˜ ìˆì–´ ë³´ì•ˆ ë° ê´€ë¦¬ ìš©ì´.
- **ë¬´ì„œë²„ ì‚¬ìš© ê°€ëŠ¥**: ë³„ë„ì˜ ì„œë²„ ì—†ì´ë„ ì‚¬ìš© ê°€ëŠ¥.

#### Query Key Factory

- **ì¿¼ë¦¬ í‚¤ ë° í•¨ìˆ˜ ê´€ë¦¬ ìš©ì´**: ê¸°ëŠ¥ë³„ë¡œ ì¿¼ë¦¬ í‚¤ì™€ ì¿¼ë¦¬ í•¨ìˆ˜ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ ë³´ìˆ˜ ë° ê´€ë¦¬ê°€ ìš©ì´.
- **íš¨ìœ¨ì  ê´€ë¦¬**: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ì˜ íš¨ìœ¨ì ì´ê³  ëª…í™•í•œ ê´€ë¦¬ ê°€ëŠ¥.
- **ì½”ë“œ ì¬ì‚¬ìš©ì„± ì¦ê°€**: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ì—¬ ì½”ë“œ ì¤‘ë³µ ê°ì†Œ.

<br>

### ğŸ”¨ ë¦¬íŒ©í† ë§

#### ğŸ—œ bundle ì‚¬ì´ì¦ˆ ìµœì í™”

> **ì ìš©ì´ìœ **

- webpack-bundle-analyzerë¥¼ í†µí•´ ë²ˆë“¤ì„ ë¶„ì„í•˜ì˜€ì„ ì´ˆê¸°ì— ë¶ˆí•„ìš”í•œ ë²ˆë“¤ì´ í¬í•¨ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- webpack-bundle-analyzerë¥¼ í†µí•´ ë²ˆë“¤ì„ ë¶„ì„í•˜ê³ , ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆì„ ì‹ë³„í•œ í›„, dynamic importë¥¼ í™œìš©í•œ code splittingì„ ì ìš©í•˜ì—¬ ì´ˆê¸° ë¡œë”© ì‹œì ì— í•„ìš”í•˜ì§€ ì•Šì€ ë²ˆë“¤ì„ ì œê±°í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì „ì²´ì ì¸ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ ê°ì†Œí•˜ì˜€ìœ¼ë©°, ê³µí†µ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ 588KB â†’ 340KB (ì•½ 248KB, 42%) ê°ì†Œí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì „í›„ ë¹„êµ**

**ì ìš© ì „**
![analyze1](https://github.com/NamJongtae/ITtem/assets/113427991/98f584c3-6dad-410e-8140-f60c97d172f5)

<details>
<summary>ë¶„ì„ ê²°ê³¼ ë³´ê¸°</summary>

| Route                                                            | Size    | First Load JS |
| ---------------------------------------------------------------- | ------- | ------------- |
| â—‹ /                                                              | 897 B   | 449 kB        |
| /\_app                                                           | 0 B     | 407 kB        |
| â—‹ /404                                                           | 774 B   | 412 kB        |
| Î» /api/auth/changePassword                                       | 0 B     | 407 kB        |
| Î» /api/auth/checkEmail                                           | 0 B     | 407 kB        |
| Î» /api/auth/deleteToken                                          | 0 B     | 407 kB        |
| Î» /api/auth/duplication/email                                    | 0 B     | 407 kB        |
| Î» /api/auth/duplication/nickname                                 | 0 B     | 407 kB        |
| Î» /api/auth/refreshToken                                         | 0 B     | 407 kB        |
| Î» /api/auth/sendVerifyEmail                                      | 0 B     | 407 kB        |
| Î» /api/auth/session                                              | 0 B     | 407 kB        |
| Î» /api/auth/signin                                               | 0 B     | 407 kB        |
| Î» /api/auth/signin/google                                        | 0 B     | 407 kB        |
| Î» /api/auth/signin/google/user                                   | 0 B     | 407 kB        |
| Î» /api/auth/signin/kakao                                         | 0 B     | 407 kB        |
| Î» /api/auth/signin/kakao/user                                    | 0 B     | 407 kB        |
| Î» /api/auth/signout                                              | 0 B     | 407 kB        |
| Î» /api/auth/signup                                               | 0 B     | 407 kB        |
| Î» /api/auth/user                                                 | 0 B     | 407 kB        |
| Î» /api/auth/verifyEmail                                          | 0 B     | 407 kB        |
| Î» /api/chat                                                      | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]                                         | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/enter                                   | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/exit                                    | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/leave                                   | 0 B     | 407 kB        |
| Î» /api/chat/[chatRoomId]/message                                 | 0 B     | 407 kB        |
| Î» /api/notification                                              | 0 B     | 407 kB        |
| Î» /api/notification/[messageId]                                  | 0 B     | 407 kB        |
| Î» /api/notification/[messageId]/read                             | 0 B     | 407 kB        |
| Î» /api/product                                                   | 0 B     | 407 kB        |
| Î» /api/product/[productId]                                       | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase                              | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/cancel                       | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/cancel/withdrawal            | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/product-receipt-confirmation | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/return                       | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/return/delivery-confirmation | 0 B     | 407 kB        |
| Î» /api/product/[productId]/purchase/return/withdrawal            | 0 B     | 407 kB        |
| Î» /api/product/[productId]/report                                | 0 B     | 407 kB        |
| Î» /api/product/[productId]/review                                | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/cancel-comfirmation             | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/cancel-reject                   | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/delivery-confirmation           | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/purchase-request-confirmation   | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/purchase-request-reject         | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/return-confirmation             | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/return-receipt-confirmation     | 0 B     | 407 kB        |
| Î» /api/product/[productId]/sales/return-reject                   | 0 B     | 407 kB        |
| Î» /api/product/[productId]/view                                  | 0 B     | 407 kB        |
| Î» /api/product/[productId]/wish                                  | 0 B     | 407 kB        |
| Î» /api/product/search                                            | 0 B     | 407 kB        |
| Î» /api/product/today                                             | 0 B     | 407 kB        |
| Î» /api/product/upload                                            | 0 B     | 407 kB        |
| Î» /api/profile                                                   | 0 B     | 407 kB        |
| Î» /api/profile/[uid]                                             | 0 B     | 407 kB        |
| Î» /api/profile/[uid]/follow                                      | 0 B     | 407 kB        |
| Î» /api/profile/[uid]/review                                      | 0 B     | 407 kB        |
| Î» /api/profile/followers                                         | 0 B     | 407 kB        |
| Î» /api/profile/followings                                        | 0 B     | 407 kB        |
| Î» /api/profile/product                                           | 0 B     | 407 kB        |
| Î» /api/profile/wish                                              | 0 B     | 407 kB        |
| Î» /api/purchase-trading                                          | 0 B     | 407 kB        |
| Î» /api/sales-trading                                             | 0 B     | 407 kB        |
| â—‹ /chat                                                          | 2.8 kB  | 417 kB        |
| Î» /chat/[chatRoomId]                                             | 7.55 kB | 430 kB        |
| â—‹ /findpassword                                                  | 2.21 kB | 427 kB        |
| Î» /product                                                       | 3.78 kB | 452 kB        |
| Î» /product/[productId]                                           | 8.39 kB | 458 kB        |
| Î» /product/[productId]/edit                                      | 363 B   | 472 kB        |
| Î» /product/manage                                                | 10.1 kB | 444 kB        |
| â—‹ /product/upload                                                | 427 B   | 472 kB        |
| Î» /profile                                                       | 439 B   | 477 kB        |
| Î» /profile/[uid]                                                 | 354 B   | 477 kB        |
| Î» /search/product                                                | 2.73 kB | 451 kB        |
| â—‹ /signin                                                        | 3.49 kB | 423 kB        |
| â—‹ /signin/google                                                 | 1.36 kB | 409 kB        |
| â—‹ /signin/kakao                                                  | 1.29 kB | 408 kB        |
| â—‹ /signup                                                        | 4.24 kB | 429 kB        |
| First Load JS shared by all                                      |         | 588 kB        |
| â”œ chunks/framework-5429a50ba5373c56.js                           | 45.2 kB |               |
| â”œ chunks/main-2022d5fc3fdade3c.js                                | 31.9 kB |               |
| â”œ chunks/pages/\_app-aedf7feb874fe3ea.js                         | 328 kB  |               |
| â”œ css/a34982c1a8b93d6e.css                                       | 180 kB  |               |
| â”” other shared chunks (total)                                    | 2.06 kB |               |
| Middleware                                                       | 42.1 kB |               |

</details>

- clientì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” crypto, bcryptjs ëª¨ë“ˆì´ ë²ˆë“¤ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- firebase ëª¨ë“ˆì˜ ìš©ëŸ‰ì´ ë§¤ìš° í¬ê²Œ ë¶„í¬í•´ ìˆìŠµë‹ˆë‹¤.
- ë²ˆë“¤ ë¶„ì„ ê²°ê³¼ ê³µí†µ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ 588KBë¡œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.

<br>

**ì ìš© í›„**
![analyze2](https://github.com/NamJongtae/ITtem/assets/113427991/a4630da4-940c-44c9-95d9-fa7edb5e17ba)

<details>
<summary>ë¶„ì„ ê²°ê³¼ ë³´ê¸°</summary>

| Route                                                            | Size    | First Load JS |
| ---------------------------------------------------------------- | ------- | ------------- |
| â—‹ /                                                              | 897 B   | 202 kB        |
| â—‹ /404                                                           | 774 B   | 164 kB        |
| â—‹ /signin                                                        | 3.5 kB  | 175 kB        |
| â—‹ /signin/google                                                 | 1.36 kB | 161 kB        |
| â—‹ /signin/kakao                                                  | 1.29 kB | 161 kB        |
| â—‹ /signup                                                        | 4.24 kB | 181 kB        |
| Î» /api/auth/changePassword                                       | 0 B     | 159 kB        |
| Î» /api/auth/checkEmail                                           | 0 B     | 159 kB        |
| Î» /api/auth/deleteToken                                          | 0 B     | 159 kB        |
| Î» /api/auth/duplication/email                                    | 0 B     | 159 kB        |
| Î» /api/auth/duplication/nickname                                 | 0 B     | 159 kB        |
| Î» /api/auth/refreshToken                                         | 0 B     | 159 kB        |
| Î» /api/auth/sendVerifyEmail                                      | 0 B     | 159 kB        |
| Î» /api/auth/session                                              | 0 B     | 159 kB        |
| Î» /api/auth/signin                                               | 0 B     | 159 kB        |
| Î» /api/auth/signin/google                                        | 0 B     | 159 kB        |
| Î» /api/auth/signin/google/user                                   | 0 B     | 159 kB        |
| Î» /api/auth/signin/kakao                                         | 0 B     | 159 kB        |
| Î» /api/auth/signin/kakao/user                                    | 0 B     | 159 kB        |
| Î» /api/auth/signout                                              | 0 B     | 159 kB        |
| Î» /api/auth/signup                                               | 0 B     | 159 kB        |
| Î» /api/auth/user                                                 | 0 B     | 159 kB        |
| Î» /api/auth/verifyEmail                                          | 0 B     | 159 kB        |
| Î» /api/chat                                                      | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]                                         | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/enter                                   | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/exit                                    | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/leave                                   | 0 B     | 159 kB        |
| Î» /api/chat/[chatRoomId]/message                                 | 0 B     | 159 kB        |
| Î» /api/notification                                              | 0 B     | 159 kB        |
| Î» /api/notification/[messageId]                                  | 0 B     | 159 kB        |
| Î» /api/notification/[messageId]/read                             | 0 B     | 159 kB        |
| Î» /api/product                                                   | 0 B     | 159 kB        |
| Î» /api/product/[productId]                                       | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase                              | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/cancel                       | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/cancel/withdrawal            | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/product-receipt-confirmation | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/return                       | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/return/delivery-confirmation | 0 B     | 159 kB        |
| Î» /api/product/[productId]/purchase/return/withdrawal            | 0 B     | 159 kB        |
| Î» /api/product/[productId]/report                                | 0 B     | 159 kB        |
| Î» /api/product/[productId]/review                                | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/cancel-comfirmation             | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/cancel-reject                   | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/delivery-confirmation           | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/purchase-request-confirmation   | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/purchase-request-reject         | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/return-confirmation             | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/return-receipt-confirmation     | 0 B     | 159 kB        |
| Î» /api/product/[productId]/sales/return-reject                   | 0 B     | 159 kB        |
| Î» /profile                                                       | 439 B   | 231 kB        |
| Î» /profile/[uid]                                                 | 354 B   | 231 kB        |
| Î» /search/product                                                | 2.73 kB | 204 kB        |
| Î» /product/[productId]                                           | 8.39 kB | 211 kB        |
| Î» /product/[productId]/edit                                      | 363 B   | 225 kB        |
| Î» /product/manage                                                | 10.1 kB | 197 kB        |
| â—‹ /product/upload                                                | 427 B   | 225 kB        |
| First Load JS shared by all                                      | 340 kB  |               |
| â”œ chunks/framework-03cd576e71e4cd66.js                           | 45.2 kB |               |
| â”œ chunks/main-2022d5fc3fdade3c.js                                | 31.9 kB |               |
| â”œ chunks/pages/\_app-0d627b907842ab6f.js                         | 80.1 kB |               |
| â”œ css/e523be9dea407922.css                                       | 181 kB  |               |
| â”” other shared chunks (total)                                    | 2.2 kB  |               |
| Middleware                                                       | 42.1 kB |               |

</details>

- clientì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” crypto, bcryptjs ëª¨ë“ˆì´ ë²ˆë“¤ì—ì„œ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤
- firebaseì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆë“¤ì€ ì²­í¬ë¡œ ë¶„ë¦¬ë˜ì–´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
- ë²ˆë“¤ ë¶„ì„ ê²°ê³¼ ì „ì²´ì ì¸ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ ê°ì†Œí•˜ì˜€ìœ¼ë©°, ê³µí†µ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ 588KBì—ì„œ 340KBë¡œ 248KB(ì•½ 42%) ê°ì†Œí•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

<br>

**1 ) ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸ë¥¼ í†µí•´ firebase instance ìƒì„±**

**ì ìš© ì „**

```javascript
import { initializeApp } from "firebase/app";
import { getDatabase } from "firebase/database";
import { Firestore, getFirestore } from "firebase/firestore";
import { getStorage } from "firebase/storage";

export const app = initializeApp(firebaseConfig);
export const firestoreDB = getFirestore(app);
export const database = getDatabase(app);
export const storage = getStorage(app);
```

<br>

**ì ìš© í›„**

```javascript
import { getApp, getApps, initializeApp } from "firebase/app";

const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();

export const getFirestoreDB = async () => {
  const { getFirestore } = await import("firebase/firestore");
  return getFirestore(app);
};
export const getRealtimeDB = async () => {
  const { getDatabase } = await import("firebase/database");
  return getDatabase(app);
};
export const getStorageInstance = async () => {
  const { getStorage } = await import("firebase/storage");
  return getStorage(app);
};
```

<br>

**2 ) api í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” firestore, database, storage ëª¨ë“ˆ ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸ ì ìš©**

**ì ìš© ì „**

```javascript
import { getRealtimeDB } from "../firebaseSetting";
import { push, set, ref: databaseRef } from "/firebase/database"

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const sendNotificationMessage = async (
  userId: string,
  message: string
) => {
  if (!userId) return;
  const firebaseDatabase = await import("firebase/database");
  const database = await getRealtimeDB();
  const messageObj: Omit<NotificationMessageData, "id"> = {
    content: message,
    isRead: false,
    isNotification: false,
    timestamp: Date.now(),
  };

  const messageRef = databaseRef(database, `notification/${userId}/messages`);

  const newMessageRef = push(messageRef);
  set(newMessageRef, messageObj);
};

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢
```

<br>

**ì ìš© í›„**

```javascript
import { getRealtimeDB } from "../firebaseSetting";

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const sendNotificationMessage = async (
  userId: string,
  message: string
) => {
  if (!userId) return;
  const firebaseDatabase = await import("firebase/database");
  const database = await getRealtimeDB();
  const { push, set, ref: databaseRef } = firebaseDatabase;
  const messageObj: Omit<NotificationMessageData, "id"> = {
    content: message,
    isRead: false,
    isNotification: false,
    timestamp: Date.now(),
  };

  const messageRef = databaseRef(database, `notification/${userId}/messages`);

  const newMessageRef = push(messageRef);
  set(newMessageRef, messageObj);
};

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢
```

<br>

**3 ) bcryptjs ëª¨ë“ˆ ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸**

**ì ìš© ì „**

```javascript
import { hash, compare } from "bcryptjs";

export async function getHasdPassword(password: string) {
  try {
    const hashedPassword = await hash(password, 12);
    return hashedPassword;
  } catch (error) {
    console.log(error);
    throw error;
  }
}

export async function verifyPassword(password: string, hashedPassword: string) {
  try {
    const isVerify = await compare(password, hashedPassword);
    return isVerify;
  } catch (error) {
    throw error;
  }
}
```

<br>

**ì ìš© í›„**

```javascript
export async function getHasdPassword(password: string) {
  try {
    const { hash } = await import("bcryptjs");

    const hashedPassword = await hash(password, 12);
    return hashedPassword;
  } catch (error) {
    console.log(error);
    throw error;
  }
}

export async function verifyPassword(password: string, hashedPassword: string) {
  try {
    const { compare } = await import("bcryptjs");

    const isVerify = await compare(password, hashedPassword);
    return isVerify;
  } catch (error) {
    throw error;
  }
}
```

</details>

<br>

#### ğŸ­ query-key-factory ì ìš©

> **ì ìš©ì´ìœ **

- ì´ì „ì— ì‚¬ìš©í–ˆë˜ ë°©ì‹ìœ¼ë¡œëŠ” ì¿¼ë¦¬ í‚¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ê´€ë¦¬í•´ì•¼ í–ˆê¸° ë•Œë¬¸ì— ì¼ê´€ì„± ìˆê³  ëª…í™•í•œ ê´€ë¦¬ê°€ ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ë˜í•œ ì¿¼ë¦¬ í‚¤ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- @lukemorales/query-key-factory ë¼ì´ë¸ŒëŸ¬ë¦¬ì„ ì„¤ì¹˜í•˜ì—¬ ì¿¼ë¦¬í‚¤ì™€ ì¿¼ë¦¬ í•¨ìˆ˜ë¥¼ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.
- createQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë¥¼ ê·¸ë£¹í™”í•˜ê³  êµ¬ì¡°í™”í•˜ì˜€ìŠµë‹ˆë‹¤.
- mergeQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë ¨ëœ ì¿¼ë¦¬ í‚¤ë“¤ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì´ì „ì—ëŠ” ê° ì¿¼ë¦¬ í‚¤ë¥¼ ë³„ë„ì˜ ìƒìˆ˜ë‚˜ í•¨ìˆ˜ë¡œ ìˆ˜ë™ìœ¼ë¡œ ì •ì˜í–ˆì§€ë§Œ, createQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë¥¼ ë” ì²´ê³„ì ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- mergeQueryKeys í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë“¤ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì¤‘ì•™ì—ì„œ ì¿¼ë¦¬ í‚¤ë¥¼ ì •ì˜í•˜ì—¬ ì¼ê´€ì„± ìˆê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆê³ , ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì¡Œìœ¼ë©°, ìœ ì§€ ë³´ìˆ˜ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

<br>

**ì ìš© ì „**

```javascript
//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const getProductQueryKey = (productId: string) => {
  return ["product", productId];
};

export const getProfileQueryKey = (uid: string) => {
  return ["profile", uid];
};

export const MY_PROFILE_QUERY_KEY = ["profile", "my"];

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢
```

- ì¿¼ë¦¬í‚¤ì™€ ì¿¼ë¦¬í‚¤ ìƒì„± í•¨ìˆ˜ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì§ì ‘ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

**ì ìš© í›„**

```javascript
import { ProductManageMenu } from "@/components/product-manage/product-manage-page";
import { getSessionCookies, getUser } from "@/lib/api/auth";
import { getNotificationMessage } from "@/lib/api/notification";
import {
  getCategoryProductList,
  getProduct,
  getProfileProductList,
  getPurchaseTrading,
  getReview,
  getSalesTrading,
  getSearchProductList,
  getTodayProductList,
} from "@/lib/api/product";
import {
  getFollowers,
  getFollowings,
  getMyProfile,
  getProfileReviews,
  getProfileWish,
  getUserProfile,
} from "@/lib/api/profile";
import { ProductCategory, ProductListType } from "@/types/productTypes";
import {
  createQueryKeys,
  mergeQueryKeys,
} from "@lukemorales/query-key-factory";

export const authQueryKey = createQueryKeys("auth", {
  info: (userId?: string) => ({
    queryKey: [userId],
    queryFn: getUser,
  }),
});

export const productQueryKey = createQueryKeys("product", {
  list: ({
    productListType,
    produdctCategory,
    location,
    limit,
  }: {
    productListType?: ProductListType;
    produdctCategory?: ProductCategory;
    location?: string;
    limit: number;
  }) => ({
    queryKey: productListType
      ? [productListType]
      : produdctCategory && location
      ? [produdctCategory, location]
      : [produdctCategory],
    queryFn: produdctCategory
      ? async ({ pageParam }) => {
          const response = await getCategoryProductList({
            category: produdctCategory,
            cursor: pageParam,
            limit,
            location,
          });
          return response.data.products;
        }
      : async ({ pageParam }) => {
          const response = await getTodayProductList(pageParam, limit);
          return response.data.products;
        },
  }),
  search: ({
    keyword,
    category,
    limit,
  }: {
    keyword?: string;
    category: ProductCategory;
    limit: number;
  }) => ({
    queryKey: [keyword, category],
    queryFn: async ({ pageParam }) => {
      const response = await getSearchProductList({
        category,
        cursor: pageParam,
        limit,
        keyword: (keyword as string) || "",
      });
      return response.data.products;
    },
  }),
  detail: (productId: string) => ({
    queryKey: [productId],
    queryFn: async () => {
      const response = await getProduct(productId);
      return response.data.product;
    },
  }),
  review: (productId: string) => ({
    queryKey: [productId],
    queryFn: async () => {
      const response = await getReview(productId);
      return response.data.review;
    },
  }),
  manage: ({
    currentMenu,
    status,
    search,
    menu,
    limit,
  }: {
    currentMenu: "sale" | "purchase";
    status: string;
    search: string | undefined;
    menu: ProductManageMenu;
    limit: number;
  }) => ({
    queryKey: [currentMenu, status, search],
    queryFn: async ({ pageParam }) => {
      if (menu === "íŒë§¤") {
        const response = await getSalesTrading({
          status,
          cursor: pageParam,
          search,
          limit,
        });
        return response.data.saleTrading;
      } else {
        const response = await getPurchaseTrading({
          status,
          cursor: pageParam,
          search,
          limit,
        });
        return response.data.purchaseTrading;
      }
    },
  }),
});

//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export const queryKeys = mergeQueryKeys(
  authQueryKey,
  productQueryKey,
  profileQueryKey,
  sessionQueryKey,
  notificationQueryKey
);
```

- query-key-factory ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì¿¼ë¦¬í‚¤ì™€ ì¿¼ë¦¬í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.
- mergeQueryKeys í•¨ìˆ˜ë¥¼ í†µí•´ ì¿¼ë¦¬ í‚¤ë“¤ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

</details>

<br>

#### ğŸ§© customhook íŒ¨í„´ ë¡œì§ ë¶„ë¦¬

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ì—ì„œ UIì™€ ë¡œì§ì´ í•¨ê»˜ ì¡´ì¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ ë° ì½”ë“œ ê°€ë…ì„±ì´ ì¢‹ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ì»´í¬ë„ŒíŠ¸ ë§ˆë‹¤ ë³„ë„ì˜ ë¡œì§ customhookë¥¼ ìƒì„±í•˜ì—¬ UIê³¼ ë¡œì§ì„ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- UIì™€ ë¡œì§ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì–´, ìœ ì§€ ë³´ìˆ˜ ë° ê°€ë…ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- customhook íŒ¨í„´ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ê³µí†µëœ ë¡œì§ì˜ ì¬ì‚¬ìš©ì„±ì´ ì¦ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

**ì ìš© ì „**

```javascript
import ProfileUserInfo from "./profileUserInfo/profile-userInfo";
import ProfileDetail from "./profile-detail";
import { useState } from "react";
import useProfileQuery from "@/hooks/reactQuery/querys/profile/useProfileQuery";
import Loading from "../commons/loading";
import Empty from "../commons/Empty";
import { isAxiosError } from "axios";
import useMyProfileQuery from "@/hooks/reactQuery/querys/profile/useMyProfileQuery";

export type ProfileMenu = "íŒë§¤ìƒí’ˆ" | "ê±°ë˜í›„ê¸°" | "íŒ”ë¡œì‰" | "íŒ”ë¡œì›Œ" | "ì°œ";

interface IProps {
  my?: boolean;
}

export default function ProfilePage({ my }: IProps) {
  const [profileMenu, setProfileMenu] = useState < ProfileMenu > "íŒë§¤ìƒí’ˆ";
  const { profileData, loadProfileDataLoading, loadProfileDataError } =
    useProfileQuery();

  const { myProfileData, loadMyProfileLoading } = useMyProfileQuery();

  const handleClickMenu = (menu: ProfileMenu) => {
    setProfileMenu(menu);
  };

  if (loadProfileDataLoading || loadMyProfileLoading) {
    return <Loading />;
  }

  if (loadProfileDataError) {
    return (
      <Empty
        message={
          (isAxiosError < { message: string } > loadProfileDataError &&
            loadProfileDataError.response?.data.message) ||
          ""
        }
      />
    );
  }
  return (
    <>
      <ProfileUserInfo
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
      />
      <ProfileDetail
        profileMenu={profileMenu}
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
        my={my}
      />
    </>
  );
}
```

- í˜„ì¬ í•„ìš”í•œ ë¡œì§ê³¼ UIê°€ ì»´í¬ë„ŒíŠ¸ì— ê°™ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

<br>

**ì ìš© í›„**

```javascript
import ProfileUserInfo from "./profileUserInfo/profile-userInfo";
import ProfileDetail from "./profile-detail";
import Loading from "../commons/loading";
import Empty from "../commons/Empty";
import { isAxiosError } from "axios";
import useProfilePage from "@/hooks/profile/useProfilePage";

export type ProfileMenu = "íŒë§¤ìƒí’ˆ" | "ê±°ë˜í›„ê¸°" | "íŒ”ë¡œì‰" | "íŒ”ë¡œì›Œ" | "ì°œ";

interface IProps {
  my?: boolean;
}

export default function ProfilePage({ my }: IProps) {
  const {
    profileMenu,
    profileData,
    myProfileData,
    isLoading,
    error,
    handleClickMenu,
  } = useProfilePage();

  if (isLoading) {
    return <Loading />;
  }

  if (error) {
    return (
      <Empty
        message={
          (isAxiosError < { message: string } > error &&
            error.response?.data.message) ||
          ""
        }
      />
    );
  }
  return (
    <>
      <ProfileUserInfo
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
      />
      <ProfileDetail
        profileMenu={profileMenu}
        handleClickMenu={handleClickMenu}
        userProfileData={my ? myProfileData : profileData}
        myProfileData={myProfileData}
        my={my}
      />
    </>
  );
}
```

- í˜„ì¬ í•„ìš”í•œ ë¡œì§ì´ í•˜ë‚˜ì˜ customhookìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ UIì™€ ë¡œì§ì´ ì˜ ë¶„ë¦¬ë˜ì–´ìˆìŠµë‹ˆë‹¤.

<br>

</details>

<br>

#### âŒ¨ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ í‚¤ë³´ë“œ ìµœì í™”

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ì—ì„œ tab í¬ì»¤ì‹±ì´ ë²—ì–´ë‚˜ëŠ” í˜„ìƒì´ ìˆì—ˆê³ , í‚¤ë³´ë“œ ì ‘ê·¼ì„±ì„ í–¥ìƒ ì‹œí‚¤ê³ ì ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ë³„ë„ì˜ ìœ í‹¸í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ keyDown ì´ë²¤íŠ¸ì— ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- ref ê°ì²´ë¥¼ í†µí•´ ìš”ì†Œë“¤ì— í¬ì»¤ì‹±ì„ ì¡°ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
- escí‚¤ë¥¼ ëˆ„ë¥¼ì‹œ í•´ë‹¹ ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ê°€ ë‹«íˆë„ë¡ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ëª¨ë‹¬ ë° ë“œë¡­ ë‹¤ìš´ ë©”ë‰´ì—ì„œ tab í¬ì»¤ì‹±ì´ ë²—ì–´ë‚˜ëŠ” í˜„ìƒì´ ì—†ì—ˆê³ , í‚¤ë³´ë“œ ì ‘ê·¼ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì „í›„ ë¹„êµ**

**ì ìš© ì „**

![optKeyboard_before](https://github.com/NamJongtae/ITtem/assets/113427991/d9f7833f-9d71-45d9-b4d5-1ba4d6e0ac61)

- ë©”ë‰´ì—ì„œ í¬ì»¤ì‹±ì´ ë²—ì–´ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

**ì ìš© í›„**

![optKeyboard_after](https://github.com/NamJongtae/ITtem/assets/113427991/cf1123e7-a80f-4ea3-8e37-21224ef8396c)

- ë©”ë‰´ì—ì„œ í¬ì»¤ì‹±ì´ ë” ì´ìƒ ë²—ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- escí‚¤ë¥¼ ëˆ„ë¥´ë©´ ë©”ë‰´ê°€ ë‹«íˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**1 ) ìœ í‹¸ í•¨ìˆ˜**

```javascript
/**
 * @param {React.KeyboardEvent<HTMLElement>} params.event - í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ê°ì²´ì…ë‹ˆë‹¤.
 * @param {HTMLElement | null} params.previousTarget - ì´ì „ í¬ì»¤ì‹± ëŒ€ìƒì…ë‹ˆë‹¤.
 * @param {HTMLElement | null} [params.nextTarget] - ë‹¤ìŒ í¬ì»¤ì‹± ëŒ€ìƒì…ë‹ˆë‹¤.
 */
export const optimizationTabFocus = ({
  event,
  previousTarget,
  nextTarget,
}: {
  event: React.KeyboardEvent<HTMLElement>,
  previousTarget: HTMLElement | null,
  nextTarget?: HTMLElement | null,
}) => {
  if (event.shiftKey && event.keyCode === 9 && previousTarget) {
    event.preventDefault();
    console.log(previousTarget);
    previousTarget.focus();
  } else if (nextTarget && event.keyCode === 9) {
    event.preventDefault();
    nextTarget.focus();
  }
};

export const escKeyClose = ({
  event,
  closeCb,
}: {
  event: React.KeyboardEvent<HTMLElement>,
  closeCb: () => void,
}) => {
  if (event.keyCode === 27) {
    closeCb();
  }
};
```

<br>

**2 ) ìœ í‹¸ í•¨ìˆ˜ ì ìš© ì½”ë“œ**

```javascript
import { CATEGORY } from "@/constants/constant";
import useCateogryMobileList from "@/hooks/commons/layout/useCateogryMobileList";
import { escKeyClose } from "@/lib/optimizationKeyboard";
import React, { forwardRef } from "react";

interface IProps {
  isOpenCategory: boolean;
  toggleMenu: () => void;
  handleSelectCategory: (
    e: React.MouseEvent<HTMLButtonElement, MouseEvent>
  ) => void;
  currentCategory: string;
}

const CategoryMobileList = forwardRef<HTMLUListElement, IProps>(
  (
    { isOpenCategory, toggleMenu, handleSelectCategory, currentCategory },
    ref
  ) => {
    const { setCategoryClassName, setCategoryBtnRef, categoryOnKeyDown } =
      useCateogryMobileList({ currentCategory });

    return (
      isOpenCategory && (
        <ul
          className="absolute sm:hidden right-[10px] mt-10 w-[105px] rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none overflow-x-hidden overflow-y-scroll p-1 max-h-[222px] scrollbar-hide animate-entering"
          role="menu"
          ref={ref}
          aria-orientation="vertical"
          aria-labelledby="menu-button"
          onKeyDown={(e) => escKeyClose({ event: e, closeCb: toggleMenu })}
        >
          {CATEGORY.map((category, index) => (
            <li key={category} className="">
              <button
                type="button"
                data-category={category}
                onClick={handleSelectCategory}
                className={setCategoryClassName(category)}
                role="menuitem"
                ref={setCategoryBtnRef(index)}
                onKeyDown={(e) => categoryOnKeyDown(e, index)}
              >
                {category}
              </button>
            </li>
          ))}
        </ul>
      )
    );
  }
);

CategoryMobileList.displayName = "CategoryMobileList";
export default CategoryMobileList;

```

```javascript
// categoryKeyDown í•¨ìˆ˜

const categoryOnKeyDown = (
  e: React.KeyboardEvent<HTMLElement>,
  index: number
) => {
  if (index === CATEGORY.length - 1) {
    optimizationTabFocus({
      event: e,
      previousTarget: lastCategoryPreviousRef.current,
      nextTarget: firstCategoryRef.current,
    });
  } else if (index === 0) {
    optimizationTabFocus({
      event: e,
      previousTarget: lastCategoryRef.current,
    });
  }
};
```

<br>

</details>

<br>

#### ğŸ“± ëª¨ë‹¬ ëª¨ë°”ì¼ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì ìš©

> **ì ìš©ì´ìœ **

- ëª¨ë°”ì¼ í™˜ê²½ ëª¨ë‹¬ì°½ì´ ì—´ë¦° ìƒíƒœì—ì„œ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸° ì•Šê³  ëª¨ë‹¬ì°½ì´ ë‹«íˆë„ë¡ ì²˜ë¦¬í•˜ì—¬, UXë¥¼ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•´ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- history apië¥¼ ì´ìš©í•˜ì—¬ ë¹ˆ íˆìŠ¤í† ë¦¬ë¥¼ ìƒì„±í•˜ê³  ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆŒë €ì„ ê²½ìš° ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” ê²ƒì„ ë§‰ê³ , ëª¨ë‹¬ì°½ì„ ë‹«íˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ì¬ì‚¬ìš©ì„ ìœ„í•´ ë³„ë„ì˜ customhookë¥¼ ë§Œë“¤ì–´ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ëª¨ë°”ì¼ í™˜ê²½ì—ì„œì˜ UXê°€ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
import { useEffect } from "react";
import { isMobile } from "react-device-detect";

interface IParams {
  closeModal: () => void;
  isOpenModal: boolean;
}
export const useModalMobileBackBtn = ({ closeModal, isOpenModal }: IParams) => {
  // ëª¨ë°”ì¼ ë’¤ë¡œê°€ê¸° êµ¬í˜„ì„ ìœ„í•´ ë¹ˆ íˆìŠ¤í† ë¦¬ ìƒì„±
  // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ í˜„ì¬ í˜ì´ì§€ê°€ ìœ ì§€
  useEffect(() => {
    if (isMobile && isOpenModal) {
      window.history.pushState(null, "", window.location.href);
    }
  }, [isOpenModal]);

  useEffect(() => {
    if (isMobile && isOpenModal) {
      const handlePopState = () => {
        closeModal();
      };

      window.onpopstate = handlePopState;

      return () => {
        window.onpopstate = null;
      };
    }
  }, [closeModal, isOpenModal]);
};
```

- íŒŒë¼ë¯¸í„°ë¡œ closeModal ì½œë°±í•¨ìˆ˜ë¥¼ ë°›ì•„ ë’¤ë¡œê°€ê¸°ê°€ ê°ì§€ëœ ê²½ìš° ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- window.onpopstate ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ë’¤ë¡œê°€ê¸°ë¥¼ ê°ì§€í•˜ì˜€ìŠµë‹ˆë‹¤.
- íŒŒë¼ë¯¸í„°ë¡œ isOpenModal ì¡°ê±´ì„ ë°›ì•„ ëª¨ë‹¬ì°½ì´ ì—´ë ¸ì„ ê²½ìš°ì—ë§Œ ì ìš©ë˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- react-device-detect ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ isMobileë¥¼ ì´ìš©í•˜ì—¬ ëª¨ë°”ì¼ í™˜ê²½ì¼ ê²½ìš°ì—ë§Œ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

</details>

<br>

#### ğŸ“¤ App Router ë§ˆì´ê·¸ë ˆì´ì…˜

> **ì ìš©ì´ìœ **

- App Router ë§ˆì´ê·¸ë ˆì´ì…˜ì„ í†µí•´ `Server Component`ë¥¼ ì‚¬ìš©í•˜ì—¬ **bundle size ê°ì†Œ**ë° **ì´ˆê¸° ë¡œë”© ì†ë„ ê°œì„ **ì„ ìœ„í•´ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- `Streaming SSR`, `Suspense` ê¸°ëŠ¥ì„ í†µí•´ UXì„ í–¥ìƒì‹œí‚¤ê³ ì ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- **parallel routes & interceptor routes**ë¥¼ ì´ìš©í•˜ì—¬ ëª¨ë‹¬ì°½ì„ êµ¬í˜„í•˜ì—¬ **UX ë° SEO í–¥ìƒ**ì„ ìœ„í•´ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì „ì²´ì ì¸ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ ê°ì†Œí•˜ì˜€ìœ¼ë©°, ê³µí†µ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ **340MBì—ì„œ 84.8MBë¡œ ì•½ 76% ê°ì†Œ**í•˜ì˜€ìŠµë‹ˆë‹¤.
- `Streaming SSR`, `Suspnse` ê¸°ëŠ¥ìœ¼ë¡œ SSRì´ ì§„í–‰ë˜ëŠ” ë™ì•ˆ fallback UIë¥¼ í‘œì‹œí•  ìˆ˜ ìˆì–´ UXê°€ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- **parallel routes & interceptor routes**ë¥¼ ì´ìš©í•˜ì—¬ ëª¨ë‹¬ì°½ì„ êµ¬í˜„í•˜ì—¬ **UX ë° SEO í–¥ìƒ**ë˜ì—ˆìœ¼ë©°, ë³„ë„ë¡œ ëª¨ë°”ì¼ì˜ ë’¤ë¡œê°€ê¸° êµ¬í˜„ì´ í•„ìš”ì—†ì–´ì¡ŒìŠµë‹ˆë‹¤.

<br>

**1 ) ë²ˆë“¤ ì‚¬ì´ì¦ˆ ë¶„ì„ ê²°ê³¼**

<details>
<summary>ë¶„ì„ ê²°ê³¼ ë³´ê¸°</summary>
  
<br>
  
| Route                                                   | Size   | First Load JS |
|---------------------------------------------------------|--------|---------------|
| â—‹ /                                                     | 4.36 kB | 186 kB        |
| â”œ â—‹ /_not-found                                         | 0 B    | 0 B           |
| â”œ â—‹ /(.)signin                                          | 533 B  | 163 kB        |
| â”œ Î» /api/auth/changePassword                            | 0 B    | 0 B           |
| â”œ Î» /api/auth/checkEmail                                | 0 B    | 0 B           |
| â”œ Î» /api/auth/deleteToken                               | 0 B    | 0 B           |
| â”œ Î» /api/auth/duplication/email                         | 0 B    | 0 B           |
| â”œ Î» /api/auth/duplication/nickname                      | 0 B    | 0 B           |
| â”œ Î» /api/auth/refreshToken                              | 0 B    | 0 B           |
| â”œ Î» /api/auth/sendVerifyEmail                           | 0 B    | 0 B           |
| â”œ Î» /api/auth/session                                   | 0 B    | 0 B           |
| â”œ Î» /api/auth/signin                                    | 0 B    | 0 B           |
| â”œ Î» /api/auth/signin/google                             | 0 B    | 0 B           |
| â”œ Î» /api/auth/signin/google/user                        | 0 B    | 0 B           |
| â”œ Î» /api/auth/signin/kakao                              | 0 B    | 0 B           |
| â”œ Î» /api/auth/signin/kakao/user                         | 0 B    | 0 B           |
| â”œ Î» /api/auth/signout                                   | 0 B    | 0 B           |
| â”œ Î» /api/auth/signup                                    | 0 B    | 0 B           |
| â”œ Î» /api/auth/user                                      | 0 B    | 0 B           |
| â”œ Î» /api/auth/verifyEmail                               | 0 B    | 0 B           |
| â”œ Î» /api/chat                                           | 0 B    | 0 B           |
| â”œ Î» /api/chat/[chatRoomId]                              | 0 B    | 0 B           |
| â”œ Î» /api/chat/[chatRoomId]/exit                         | 0 B    | 0 B           |
| â”œ Î» /api/chat/[chatRoomId]/join                         | 0 B    | 0 B           |
| â”œ Î» /api/chat/[chatRoomId]/leave                        | 0 B    | 0 B           |
| â”œ Î» /api/chat/[chatRoomId]/message                      | 0 B    | 0 B           |
| â”œ Î» /api/notification                                   | 0 B    | 0 B           |
| â”œ Î» /api/notification/[messageId]                       | 0 B    | 0 B           |
| â”œ Î» /api/product                                        | 0 B    | 0 B           |
| â”œ Î» /api/product/[productId]                            | 0 B    | 0 B           |
| â”œ Î» /api/product/[productId]/purchase                   | 0 B    | 0 B           |
| â”œ Î» /api/product/[productId]/report                     | 0 B    | 0 B           |
| â”œ Î» /api/product/[productId]/review                     | 0 B    | 0 B           |
| â”œ Î» /api/product/[productId]/view                       | 0 B    | 0 B           |
| â”œ Î» /api/product/[productId]/wish                       | 0 B    | 0 B           |
| â”œ Î» /api/product/search                                 | 0 B    | 0 B           |
| â”œ Î» /api/product/today                                  | 0 B    | 0 B           |
| â”œ Î» /api/product/upload                                 | 0 B    | 0 B           |
| â”œ Î» /api/profile                                        | 0 B    | 0 B           |
| â”œ Î» /api/profile/[uid]                                  | 0 B    | 0 B           |
| â”œ Î» /api/profile/[uid]/follow                           | 0 B    | 0 B           |
| â”œ Î» /api/profile/[uid]/review                           | 0 B    | 0 B           |
| â”œ Î» /api/profile/followers                              | 0 B    | 0 B           |
| â”œ Î» /api/profile/followings                             | 0 B    | 0 B           |
| â”œ Î» /api/profile/product                                | 0 B    | 0 B           |
| â”œ Î» /api/profile/wish                                   | 0 B    | 0 B           |
| â”œ Î» /api/trading/purchase                               | 0 B    | 0 B           |
| â”œ Î» /api/trading/purchase/[productId]/cancel            | 0 B    | 0 B           |
| â”œ Î» /api/trading/purchase/[productId]/cancel/withdrawal | 0 B    | 0 B           |
| â”œ Î» /api/trading/purchase/[productId]/product-receipt-confirmation | 0 B | 0 B |
| â”œ Î» /api/trading/purchase/[productId]/return            | 0 B    | 0 B           |
| â”œ Î» /api/trading/purchase/[productId]/return/delivery-confirmation | 0 B | 0 B |
| â”œ Î» /api/trading/purchase/[productId]/return/withdrawal | 0 B    | 0 B           |
| â”œ Î» /api/trading/sales                                  | 0 B    | 0 B           |
| â”œ Î» /api/trading/sales/[productId]/cancel-comfirmation  | 0 B    | 0 B           |
| â”œ Î» /api/trading/sales/[productId]/cancel-reject        | 0 B    | 0 B           |
| â”œ Î» /api/trading/sales/[productId]/delivery-confirmation| 0 B    | 0 B           |
| â”œ Î» /api/trading/sales/[productId]/purchase-request-confirmation | 0 B | 0 B |
| â”œ Î» /api/trading/sales/[productId]/purchase-request-reject | 0 B  | 0 B           |
| â”œ Î» /api/trading/sales/[productId]/return-confirmation  | 0 B    | 0 B           |
| â”œ Î» /api/trading/sales/[productId]/return-receipt-confirmation | 0 B | 0 B |
| â”œ Î» /api/trading/sales/[productId]/return-reject        | 0 B    | 0 B           |
| â”œ â—‹ /chat                                               | 2.48 kB | 149 kB        |
| â”œ Î» /chat/[chatRoomId]                                  | 25.9 kB| 184 kB        |
| â”œ â—‹ /findpassword                                       | 2.19 kB | 154 kB        |
| â”œ Î» /product                                            | 4.46 kB | 198 kB        |
| â”œ Î» /product/[productId]                                | 12 kB   | 199 kB        |
| â”œ Î» /product/[productId]/edit                           | 178 B  | 210 kB        |
| â”œ Î» /product/manage                                     | 12.4 kB| 173 kB        |
| â”œ â—‹ /product/upload                                     | 176 B  | 210 kB        |
| â”œ Î» /profile                                            | 2.47 kB | 195 kB        |
| â”œ â—‹ /profile/(.)edit                                    | 1.07 kB | 166 kB        |
| â”œ â—‹ /profile/(.)passwordChange                          | 491 B  | 149 kB        |
| â”œ Î» /profile/[uid]                                      | 226 B  | 193 kB        |
| â”œ Î» /profile/edit                                       | 3.93 kB | 169 kB        |
| â”œ â—‹ /profile/passwordChange                             | 188 B  | 149 kB        |
| â”œ Î» /search/product                                     | 3.34 kB | 189 kB        |
| â”œ â—‹ /signin                                             | 199 B  | 163 kB        |
| â”œ â—‹ /signin/google                                      | 3.09 kB | 138 kB        |
| â”œ â—‹ /signin/kakao                                       | 3.01 kB | 138 kB        |
| â”” â—‹ /signup                                             | 4.59 kB | 161 kB        |
| **First Load JS shared by all**                         |        | 84.8 kB       |
| â”œ chunks/8069-edc8d10e59d09018.js                       | 29 kB  |               |
| â”œ chunks/fd9d1056-47f05366a5e29db8.js                   | 53.4 kB|               |
| â”” other shared chunks (total)                           |        | 2.33 kB        |
| **Middleware**                                          |        | 99.1 kB       |
| â—‹ (Static)                                               |        |               |
| Î» (Dynamic)                                              |        |               |

<br>

</details>

<br>

**2 ) Streaming SSR, Suspense ì ìš©**

ìƒí’ˆ ëª©ë¡ ì²« í˜ì´ì§€ë¥¼ SSRë¡œ prefetching í•˜ê³ , `Streaming SSR`ê³¼ `Suspense`ë¥¼ í†µí•´ fallback Loading UIë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

```javascript
// app/product/page.tsx

import ProductPage from "@/components/product/product-page";
import { queryKeys } from "@/queryKeys";
import { ProductCategory } from "@/types/productTypes";
import {
  HydrationBoundary,
  QueryClient,
  dehydrate,
} from "@tanstack/react-query";
import Loading from '../loading';
import { Suspense } from 'react';

async function prefetchProductList({
  category = ProductCategory.ì „ì²´,
  queryClient,
}: {
  category: ProductCategory;
  queryClient: QueryClient;
}) {
  const queryKeyConfig = queryKeys.product.list({
    produdctCategory: category || ProductCategory.ì „ì²´,
  });
  await queryClient.prefetchInfiniteQuery({
    queryKey: queryKeyConfig.queryKey,
    queryFn: queryKeyConfig.queryFn,
    initialPageParam: null,
  });
}

export default async function Product({
  searchParams,
}: {
  searchParams: { category: string | undefined };
}) {
  const queryClient = new QueryClient();
  const category = searchParams.category || null;

  await prefetchProductList({
    category: category as ProductCategory,
    queryClient,
  });

  return (
    <Suspense fallback={<Loading />}>
      <HydrationBoundary state={dehydrate(queryClient)}>
        <ProductPage />
      </HydrationBoundary>
    </Suspense>
  );
}
```

</details>

<br>

**3 ) parallel routes & interceptor routes ëª¨ë‹¬ ì ìš©**

ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ **parallel routes & interceptor routes**ë¥¼ í†µí•´ ëª¨ë‹¬ì°½ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**parallerl routes default.tsx** : ìƒˆë¡œê³ ì¹¨ì‹œ parallerl routesê°€ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê²½ìš° unmatched route ì˜¤ë¥˜ í•´ê²°ì„ ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
// /app/@sign/default.tsx

export default function SigninModalDefault() {
  return null;
}
```

<br>

**interceptor routes page.tsx** : signin ê²½ë¡œë¥¼ ëŒ€ì‹ í•  í˜ì´ì§€ RootLayoutì— ë ˆì´ì•„ì›ƒì„ ê³µìœ í•˜ì—¬, ë¡œê·¸ì¸ ëª¨ë‹¬ì°½ì´ ë‚˜íƒ€ë‚˜ë„ë¡í•©ë‹ˆë‹¤.

```javascript
// /app/@sign/(.)signin/page.tsx

import SigninModal from "@/components/signin/modal/signin-modal";

export default function Modal() {
  return <SigninModal />;
}
```

<br>

**RootLayout.tsx** : ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì— signin ëª¨ë‹¬ì°½ì„ ê³µìœ í•©ë‹ˆë‹¤.

```javascript
// /app/layout.tsx
//                             â€¢
//                             â€¢
//                           (ìƒëµ)
//                             â€¢
//                             â€¢

export default async function RootLayout({
  children,
  signin,
}: Readonly<{
  children: React.ReactNode;
  signin: React.ReactNode;
}>) {
  return (
    <html lang="ko">
      <body className={inter.className}>
        <ReduxProvider>
          <ReactQueryProvider>
            <Suspense fallback={<Loading />}>
              <Layout>
                {signin}
                <main className={"flex-grow mt-[113px] md:mt-[127px]"}>
                  {children}
                </main>

                <ToastContainer
                  position="top-center"
                  limit={1}
                  closeOnClick={true}
                  closeButton={true}
                  pauseOnHover={false}
                  draggable={true}
                  autoClose={2000}
                  pauseOnFocusLoss={false}
                  theme="light"
                  hideProgressBar={true}
                />
              </Layout>
            </Suspense>
          </ReactQueryProvider>
        </ReduxProvider>
        <div id="portal-root"></div>
      </body>
    </html>
  );
}
```

</details>

<br>

#### ğŸ—ƒ í´ë”ëª… ë° íŒŒì¼ëª… ì¼ê´€ëœ ê·œì¹™ ì ìš©

> **ì ìš©ì´ìœ **

- í´ë”ëª… ë° íŒŒì¼ëª…ì´ ì¼ê´€ì„± ì—†ì´ ì ìš©ë˜ì§€ ì•Šì•„, ìœ ì§€ ë³´ìˆ˜ì™€ ê°€ë…ì„±ì´ ì €í•˜ë˜ë©° í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì´í•´í•˜ëŠ” ë° ì–´ë ¤ì›€ì´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ì¼ê´€ëœ ëª…ëª… ê·œì¹™ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- í´ë”ëª… ë° íŒŒì¼ëª…ì— ì¼ì •í•œ ê·œì¹™ì„ ì •í•˜ì—¬ ì´ë¥¼ í† ëŒ€ë¡œ í´ë”ëª… ë° íŒŒì¼ëª…ì„ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
- í´ë”ëª…ê³¼ íŒŒì¼ëª… ëª¨ë‘ ì¼€ë°¥ ì¼€ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª…ëª…í•©ë‹ˆë‹¤.
- í´ë” í•˜ìœ„ì˜ íŒŒì¼ì˜ ì´ë¦„ì˜ ê²½ìš° êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ ìƒìœ„ í´ë”ëª…ì„ prefixì— í¬í•¨ì‹œì¼œ ëª…ëª…í•©ë‹ˆë‹¤.
- íŒŒì¼ëª… prefixëŠ” ìƒìœ„ í´ë”ê°€ ì—¬ëŸ¬ê°œ ì¼ì‹œ ê°€ì¥ ê°€ê¹Œìš´ í´ë”ëª…ì„ prefixì— í¬í•¨ì‹œí‚¤ë˜ íŒŒì¼ëª…ì´ ì¤‘ë³µë˜ê±°ë‚˜ ì¤‘ë³µë  ì—¬ì§€ê°€ ìˆëŠ” íŒŒì¼ëª…ì˜ ê²½ìš° ê·¸ ìƒìœ„ í´ë”ëª…ì˜ prefixë„ ì¶”ê°€ë¡œ í¬í•¨ì‹œí‚¤ë„ë¡ ëª…ëª…í•©ë‹ˆë‹¤.
- í´ë” ì•ˆì— íŒŒì¼ì´ ë§ì€ ê²½ìš° ìƒˆë¡œìš´ í•˜ìœ„ í´ë”ë¥¼ ìƒì„±í•˜ì—¬ ë¶„ë¦¬í•©ë‹ˆë‹¤.
- hook, DB model, ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬í˜„ í•¨ìˆ˜, Providerì˜ ê²½ìš° ì˜ˆì™¸ì ìœ¼ë¡œ ì¹´ë©œ ì¼€ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ëª…ì„ ëª…ëª…í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- í´ë”ëª… ë° íŒŒì¼ëª…ì„ ì¼ê´€ëœ ê·œì¹™ìœ¼ë¡œ ê´€ë¦¬í•˜ì—¬ ìœ ì§€ ë³´ìˆ˜ ì¸¡ë©´ì´ í–¥ìƒ ë˜ì—ˆìœ¼ë©°, í´ë” êµ¬ì¡° íŒŒì•…ì´ ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤.

<br>

#### ğŸ”„ redux-toolkit zustandë¡œ ì „í™˜

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ ì „ì—­ ìƒíƒœê´€ë¦¬ë¥¼ Redux-toolkitë¥¼ ì´ìš©í•´ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤. Redux-toolkitì˜ ë³µì¡í•œ ê¸°ëŠ¥ë“¤ì„ í™œìš©í•  í•„ìš”ì—†ì´ ë‹¨ìˆœíˆ ì „ì—­ ìƒíƒœê´€ë¦¬ë§Œ í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— Redux-toolkit ì‚¬ìš©ì´ ë¶ˆí•„ìš”í•˜ë‹¤ê³  ìƒê°í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ Redux-toolkit ë³´ë‹¤ ê°€ë³ê³ , ê°„ê²°í•œ Zustandë¥¼ ì ìš©í•˜ê²Œë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ê¸°ì¡´ Redux-toolkit slice ëŒ€ì‹  ê° Zustand storeë¥¼ ìƒì„±í•˜ì—¬ ì „ì—­ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
- ê¸°ì¡´ Redux-toolkit reducersì€ Zustand storeì— actions ê°ì²´ì— ë„£ì–´ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ê¸°ì¡´ Redux-toolkitì— ë¹„í•´ ì ì€ ìš©ëŸ‰ìœ¼ë¡œ ë²ˆë“¤ í¬ê¸°ë¥¼ ì¤„ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- ë³µì¡í•˜ê²Œ Provider, slice, reducerë¥¼ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ë˜ì–´ ì‚¬ìš©í•˜ê¸° ì‰½ê³  ê°„í¸í•´ì¡ŒìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**auth-store.ts**

```javascript
import { AuthData } from "@/types/auth-types";
import { create } from "zustand";
import { devtools } from "zustand/middleware";
import { immer } from "zustand/middleware/immer";

interface AuthState {
  user: AuthData | null;
  isLoading: boolean;
  actions: {
    setAuth: (user: AuthData) => void;
    resetAuth: () => void;
    setIsLoading: (isLoading: boolean) => void;
  };
}

const isClient = typeof window !== "undefined";

export const store = (set: any): AuthState => ({
  user: null,
  isLoading: true,
  actions: {
    setAuth: (user: AuthData) => {
      set((state: AuthState) => {
        state.user = user;
      }, false, "user/setAuth");
      if (isClient) {
        localStorage.setItem("uid", JSON.stringify(user.uid));
      }
    },
    resetAuth: () => {
      set((state: AuthState) => {
        state.user = null;
      }, false, "user/resetAuth");
      if (isClient) {
        localStorage.removeItem("uid");
      }
    },
    setIsLoading: (isLoading: boolean) => {
      set((state: AuthState) => {
        state.isLoading = isLoading;
      }, false, "user/setIsLoading");
    },
  },
});

const useAuthStore = create<AuthState>()(
  immer(process.env.NODE_ENV !== "production" ? devtools(store) : store)
);

export default useAuthStore;
```

</details>

<br>

#### ğŸš¹ ìœ ì € ì •ë³´ ê´€ë¦¬ ë¡œì§ ìˆ˜ì •

> **ì ìš©ì´ìœ **

- layout í—¤ë”ì—ì„œ tanstack-query(ì„œë²„ ìƒíƒœ ê´€ë¦¬)ì™€ zustand(ì „ì—­ ìƒíƒœ ê´€ë¦¬)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ì € ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ë¡œì§ì—ì„œ í˜ì´ì§€ ì „í™˜ì‹œ ë§ˆë‹¤ ìœ ì € ì •ë³´ë¥¼ ê°±ì‹ í•˜ì—¬ ë„ˆë¬´ ìì£¼ ìœ ì € ì •ë³´ë¥¼ ê°±ì‹ í•˜ì—¬ ë¶ˆí•„ìš”í•œ ìš”ì²­ì´ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ë¡œê·¸ì¸ì‹œ ìµœì´ˆ í•œ ë²ˆ ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ê³ , ì´í›„ ë¶€í„° ì €ì¥ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.
- tanstack-queryì˜ enable ì˜µì…˜ì„ falseë¡œ ì„¤ì •í•˜ê³ , staleTimeì„ Infinityë¡œ ë‘ê³ , ìµœì´ˆ ë¡œê·¸ì¸ì‹œ ìœ ì € ë°ì´í„°ë¥¼ ì €ì¥í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
- ì´ë¥¼ í†µí•´ ìµœì´ˆ ë¡œê·¸ì¸ì‹œì—ë§Œ ìœ ì € ë°ì´í„°ê°€ ì €ì¥ë˜ë„ë¡ í•˜ì˜€ê³ , ì´í›„ ë¡œê·¸ì¸ì´ ëœ ìƒíƒœì—ì„œë§Œ ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ ì„¸ì…˜ ì¿ í‚¤ë¥¼ ë¶ˆëŸ¬ì™€ ì„¸ì…˜ ì¿ í‚¤ê°€ ì¡´ì¬í•œë‹¤ë©´ ìœ ì € ì •ë³´ë¥¼ refetch í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- í˜ì´ì§€ ì „í™˜ ë§ˆë‹¤ ìœ ì € ì •ë³´ë¥¼ ê°±ì‹ í•˜ì§€ ì•Šì•„ ë¶ˆí•„ìš”í•œ ìš”ì²­ì´ ë°œìƒí•˜ì§€ ì•Šê²Œë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**useAuthQuery.tsx**

```javascript
import { queryKeys } from "@/query-keys/query-keys";
import useAuthStore from "@/store/auth-store";
import { useQuery } from "@tanstack/react-query";

export default function useAuthQuery() {
  const loading = useAuthStore((state) => state.isLoading);

  // ìœ ì €ë¥¼ í•œ ë²ˆë§Œ ì €ì¥í•˜ê³  ì´í›„ ìºì‹± ê°’ ì‚¬ìš© => staleTime: Infinity, enabled: false
  const {
    data: user,
    isLoading,
    error: authError,
    refetch: refetchAuth
  } = useQuery({
    ...queryKeys.auth.info,
    retry: 0,
    staleTime: Infinity,
    enabled: false
  });

  const authIsLoading = loading || isLoading;

  return { user, authIsLoading, authError, refetchAuth };
}
```

**useAuth.tsx**

```javascript
//...
useEffect(() => {
  if (
    sessionQueryIsSuccess &&
    pathname !== "/refresh-token" &&
    pathname !== "/session-expired"
  ) {
    // ì„¸ì…˜ ì¿ í‚¤ê°€ ì¡´ì¬í•  ë•Œ ìœ ì € refetch
    if (isExistSession) {
      refetchAuth();
    } else {
      actions.resetAuth();
    }
    actions.setIsLoading(false);
  }
}, [isExistSession, sessionQueryIsSuccess, pathname, actions, refetchAuth]);
```

//...

</details>

<br>

#### ğŸ”‘ QueryKey ê´€ë¦¬ ê°œì„ 

> **ì ìš©ì´ìœ **

- í˜„ì¬ queryKey ê´€ë¦¬ë¥¼ ì¼ê´€ì„± ìˆì§€ ì•Šê³  ìƒí’ˆ ëª©ë¡ queryKey ì„¤ì •ì—ì„œ ì‚¼í•­ ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ ì¿¼ë¦¬í‚¤ë¥¼ ì ìš©í•˜ë„ë¡ í•˜ì—¬ ê°€ë…ì„±ì´ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤.
- ë¼ì´ë¸ŒëŸ¬ë¦¬ íƒ€ì…ì„ ì œëŒ€ë¡œ íŒŒì•…í•˜ì§€ ëª»í•˜ì—¬ queryKey ì¤‘ ë‹¤ìˆ˜ì— any íƒ€ì…ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ëŠ” íƒ€ì… ì•ˆì „ì„±ì„ í•´ì¹ ìˆ˜ ìˆì–´ ìˆ˜ì •ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ìƒí’ˆ ëª©ë¡ queryKeyë¥¼ ì‚¼í•­ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ ì¿¼ë¦¬í‚¤ë¥¼ ì§€ì •í•˜ì§€ ì•Šê³ , ê° ìƒí’ˆ ëª©ë¡ queryKeyë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ê´€ë¦¬í•˜ë„ë¡ ìˆ˜ì •í•˜ì—¬ ê°€ë…ì„±ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.
- ë™ì  queryKeyì™€ ì •ì  queryKey íƒ€ì…ì— ì°¨ì´ê°€ ì¡´ì¬í•˜ë©°, ë™ì  queryKeyì—ëŠ” ì¿¼ë¦¬í‚¤ê°€ ë™ì ìœ¼ë¡œ ê³„ì‚°ë˜ì–´ í•˜ìœ„ í‚¤ë¡œ ë¹ˆ ë°°ì—´ì´ ì‚¬ìš©ë  ìˆ˜ ìˆì§€ë§Œ ì •ì  queryKeyëŠ” Tuple íƒ€ì…ì„ ê°€ì ¸ í•˜ë‚˜ ì´ìƒì˜ ë°°ì—´ í‚¤ê°’ì„ ê°€ì ¸ì•¼í•œë‹¤ëŠ” ê²ƒì„ íŒŒì•…í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¹ˆ ë°°ì—´ì¸ queryKeyë¥¼ ì±„ìš°ê³  ì¿¼ë¦¬í‚¤ íƒ€ì…ì„ any íƒ€ì…ì—ì„œ ì½ê¸°ì „ìš© íƒ€ì…ì¸ const íƒ€ì…ìœ¼ë¡œ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ìƒí’ˆ ëª©ë¡ queryKey ê´€ë¦¬ ë¶€ë¶„ì˜ ê°€ë…ì„±ì´ í–¥ìƒ ë˜ì—ˆìœ¼ë©°, íƒ€ì… ì•ˆì •ì„±ì´ í–¥ìƒ ë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**query-keys.ts**

```javascript
//...
export const productQueryKey = createQueryKeys("product", {
  today: (limit: number = 10) => ({
    queryKey: ["list"] as const,
    queryFn: async ({ pageParam }) => {
      const response = await getTodayProductList(pageParam, limit);
      return response.data.products;
    }
  }),
  category: ({
    category,
    location,
    limit = 10
  }: {
    category: ProductCategory;
    location?: string;
    limit?: number;
  }) => ({
    queryKey: (() => {
      if (location) {
        return [category, location, "list"] as const;
      }
      return [category, "list"] as const;
    })(),
    queryFn: async ({ pageParam }) => {
      const response = await getCategoryProductList({
        category,
        location,
        limit,
        cursor: pageParam
      });
      return response.data.products;
    }
  }),
  search: ({
    keyword,
    category = ProductCategory.ì „ì²´,
    limit = 10
  }: {
    keyword?: string;
    category?: ProductCategory;
    limit?: number;
  }) => ({
    queryKey: [keyword, category] as const,
    queryFn: async ({ pageParam }) => {
      const response = await getSearchProductList({
        category,
        cursor: pageParam,
        limit,
        keyword: (keyword as string) || ""
      });
      return response.data.products;
    }
  }),
  detail: (productId: string) => ({
    queryKey: [productId] as const,
    queryFn: async () => {
      const response = await getProduct(productId);
      return response.data.product;
    }
  }),
  review: (productId: string) => ({
    queryKey: [productId] as const,
    queryFn: async () => {
      const response = await getReview(productId);
      return response.data.review;
    }
  }),
  manage: ({
    currentMenu,
    status,
    search,
    menu,
    limit = 10
  }: {
    currentMenu: "sale" | "purchase";
    status: string;
    search: string | undefined;
    menu: ProductManageMenu;
    limit?: number;
  }) => ({
    queryKey: [currentMenu, status, search] as const,
    queryFn: async ({ pageParam }) => {
      if (menu === "íŒë§¤") {
        const response = await getSalesTrading({
          status,
          cursor: pageParam,
          search,
          limit
        });
        return response.data.saleTrading;
      } else {
        const response = await getPurchaseTrading({
          status,
          cursor: pageParam,
          search,
          limit
        });
        return response.data.purchaseTrading;
      }
    }
  })
});
// ...
```

</details>

<br>

#### âœ¨ Any íƒ€ì…ì„ ëª…í™•í•œ íƒ€ì…ìœ¼ë¡œ ì „í™˜

> **ì ìš©ì´ìœ **

- ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ íƒ€ì… ì •ì˜ë¥¼ ëª…í™•íˆ íŒŒì•…í•˜ì§€ ëª»í•œ ì±„ any íƒ€ì…ì„ ì‚¬ìš©í•œ ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆì—ˆê³ , ì´ë¡œ ì¸í•´ íƒ€ì… ì•ˆì •ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ê³µì‹ íƒ€ì… ì •ì˜ë¥¼ ì°¸ê³ í•˜ì—¬, anyë¥¼ ì œê±°í•˜ê³  ì •í™•í•œ íƒ€ì…ìœ¼ë¡œ ëŒ€ì²´í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íƒ€ì… ì•ˆì •ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- íƒ€ì… ì•ˆì •ì„±ì´ í–¥ìƒ ë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**zustand.d.ts**

immer + devtools ë¯¸ë“¤ì›¨ì–´ ì ìš© ìœ í‹¸ íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤.

```javascript
import { StateCreator } from "zustand";

declare module "zustand" {
  type ImmerDevtoolsStateCreator<T> = StateCreator<
    T,
    [["zustand/immer", never], ["zustand/devtools", never]]
  >;
}
```

**authStore.ts**

ImmerDevtoolsStateCreator ìœ í‹¸ íƒ€ì… ì ìš©, ìœ í‹¸ íƒ€ì… ì ìš© ë”°ë¥¸ devtool ì ìš© ë°©ì‹ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

```javascript
//...
export const store: ImmerDevtoolsStateCreator<AuthState> = (set) => ({
  //...
});

const useAuthStore =
  process.env.NODE_ENV !== "production"
    ? create<AuthState>()(devtools(immer(store)))
    : create<AuthState>()(immer(store));
```

</details>

<br/>

#### ğŸ—‚ ë¹„ë™ê¸° ì²˜ë¦¬ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ ë° Suspense Fallback UI ê°œì„ 

> **ì ìš©ì´ìœ **

- í˜„ì¬ ì¼ë¶€ í˜ì´ì§€ì—ì„œëŠ” ë¹„ë™ê¸° ë°ì´í„°ë¥¼ ìµœìƒìœ„ì—ì„œ ì²˜ë¦¬í•˜ê³  ìˆì–´, ë°ì´í„°ê°€ ë¡œë”©ë˜ê¸° ì „ê¹Œì§€ ì „ì²´ í˜ì´ì§€ê°€ ë¡œë”© ìƒíƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤.
- ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ë¹„ë™ê¸° ë°ì´í„°ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë§Œ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ê³ , í•„ìš” ì—†ëŠ” UIëŠ” ë¨¼ì € ë Œë”ë§ë˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.
- í˜„ì¬ ì¼ë¶€ ë¹„ë™ê¸° ì»´í¬ë„ŒíŠ¸ ë¡œë”© ì‹œ, ë‹¨ìˆœí•œ Loading ì»´í¬ë„ŒíŠ¸ë¥¼ í‘œì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‹¤ì œ ì½˜í…ì¸ ì˜ í˜•íƒœë¥¼ ì˜ˆì¸¡í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.
- ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ Loading ì»´í¬ë„ŒíŠ¸ë¥¼ Skeleton UIë¡œ êµì²´í•˜ì—¬ ë¡œë”© ì¤‘ì—ë„ ë ˆì´ì•„ì›ƒì´ ìœ ì§€ë˜ê³ , ì‚¬ìš©ìê°€ ì½˜í…ì¸ ë¥¼ ë” ë¹ ë¥´ê²Œ ì¸ì‹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ë¹„ë™ê¸° ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.
- Suspense Fallback UIë¥¼ Skeleton UIë¡œ êµì²´í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- SSR í˜ì´ì§€ì˜ ì´ˆê¸° ë Œë”ë§ ì†ë„ê°€ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- UXê°€ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**ProductDetailContiner.tsx**

ProductDetailContainer ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

```javascript
//...
export default async function ProductDetailContainer({
  params
}: {
  params: { productId: string | undefined };
}) {
  const myProfileQueryKeyConfig = queryKeys.profile.my;
  const queryClient = new QueryClient();
  const productId = params?.productId;

  if (productId) {
    await incrementViewCount(productId);
    await Promise.all([
      fetchProductData({ productId, queryClient }),
      queryClient.fetchQuery({
        queryKey: myProfileQueryKeyConfig.queryKey,
        queryFn: fetchProfileData
      })
    ]);
  }
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <ProductDetailPage />
    </HydrationBoundary>
  );
}
//...
```

**Prouct Detail page**

ProductDetailSkeletonUI ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ê³ , ProductDetailContainer ë¹„ë™ê¸° ì»´í¬ë„ŒíŠ¸ Suspense Fallbackì— SkeletonUI ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

```javascript
//...
export default async function ProductDetail({
  params
}: {
  params: { productId: string | undefined };
}) {
  return (
    <>
      <Suspense
        fallback={<ProductDetailSkeletonUI userUid={params.productId} />}
      >
        <ProductDetailContainer params={params} />
      </Suspense>
    </>
  );
}
```

</details>

> **ì ìš© ì „ í›„ UI ë¹„êµ**

**ì ìš© ì „**

<div align="center">
  <img src="https://github.com/user-attachments/assets/76b51059-3d05-4383-953b-b9215e339260"/>
</div>

**ì ìš© í›„**

<div align="center">
  <img src="https://github.com/user-attachments/assets/3542c5ef-0fb2-4ffb-87c8-9a9a5187f4d3"/>
</div>

<br/>

#### ğŸ”¨ Next.js v15 ë§ˆì´ê·¸ë ˆì´ì…˜

> **ì ìš©ì´ìœ **

- ê°œë°œ í¸ì˜ì„± í–¥ìƒê³¼ ë³´ì•ˆ ì·¨ì•½ì  í•´ê²°ì„ ìœ„í•´ Next.js v15ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- Next.js ê³µì‹ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì—¬ ì£¼ìš” ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜í•˜ì˜€ìŠµë‹ˆë‹¤.
- TurboPack ì„¤ì •ì„ ì ìš©í•˜ê³ , React 19 ë° ê¸°íƒ€ ì¢…ì†ì„± ì—…ë°ì´íŠ¸ë¥¼ í•¨ê»˜ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì•ˆì •ì ì¸ TurboPack ì‚¬ìš©ìœ¼ë¡œ ê°œë°œ ì„œë²„ êµ¬ë™ ì†ë„ê°€ í–¥ìƒë˜ê³ , ë²ˆë“¤ë§ ì‹œê°„ì´ ëŒ€í­ ë‹¨ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.
- Hydration Error ë©”ì‹œì§€ê°€ êµ¬ì²´ì ìœ¼ë¡œ ê°œì„ ë˜ì–´, ë¬¸ì œ ë°œìƒ ì‹œ ë””ë²„ê¹…ì´ í›¨ì”¬ ìˆ˜ì›”í•´ì¡ŒìŠµë‹ˆë‹¤.
- ë³´ì•ˆ ì·¨ì•½ì ì´ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.

<br/>

#### ğŸ”§ `react-infinite-scroller` â†’ `react-intersection-observer`ë¡œ ëŒ€ì²´

> **ì ìš©ì´ìœ **

- React 19 ë²„ì „ ì—…ë°ì´íŠ¸ ì´í›„ ì¢…ì†ì„± ì¶©ëŒ ë¬¸ì œê°€ ë°œìƒí•˜ì—¬, React 19ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” `react-infinite-scroller` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ `react-intersection-observer`ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- useInfiniteScrollObserver í›…ì„ ìƒì„±í•˜ì—¬ ê´€ì°° ëŒ€ìƒ ê°ì§€í•©ë‹ˆë‹¤.
- InfiniteScrollTarget ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ì°° ëŒ€ìƒ ì„¤ì •í•©ë‹ˆë‹¤.
- ê´€ì°° ëŒ€ìƒì´ ë·°í¬íŠ¸(Viewport) ë‚´ì— ì§„ì…í•  ê²½ìš°, ë‹¤ìŒ í˜ì´ì§€ ë°ì´í„°ë¥¼ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
- InfiniteScrollEndMessage ì»´í¬ë„ŒíŠ¸ë¡œ ë§ˆì§€ë§‰ ë°ì´í„° ë„ë‹¬ ì‹œ ë©”ì‹œì§€ ì¶œë ¥í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- React 19 ë²„ì „ ì—…ë°ì´íŠ¸ ì´í›„ ì¢…ì†ì„± ì¶©ëŒ ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br/>

**useInfiniteScrollObserver.ts**

```javascript
import { useEffect } from "react";
import { useInView } from "react-intersection-observer";

interface IParams {
  fetchNextPage: () => void;
  hasNextPage: boolean;
  isFetchingNextPage: boolean;
  threshold?: number;
}

export default function useInfiniteScrollObserver({
  fetchNextPage,
  hasNextPage,
  isFetchingNextPage,
  threshold = 0.8
}: IParams) {
  const { ref, inView } = useInView({
    threshold,
    triggerOnce: false
  });

  useEffect(() => {
    if (inView && hasNextPage && !isFetchingNextPage) {
      fetchNextPage();
    }
  }, [fetchNextPage, hasNextPage, inView, isFetchingNextPage]);

  return { ref };
}

```

**InfiniteScrollTarget.tsx**

```tsx
import React, { forwardRef } from "react";

const InfiniteScrollTarget = forwardRef<
  HTMLDivElement | null,
  { hasNextPage: boolean }
>(({ hasNextPage }, ref) => {
  return hasNextPage ? (
    <li>
      <div ref={ref} className="h-10" />
    </li>
  ) : null;
});

InfiniteScrollTarget.displayName = "InfiniteScrollTarget";

export default InfiniteScrollTarget;
```

**InfiniteScrollEndMessage.tsx**

```tsx
import React from "react";

export default function InfiniteScrollEndMessage({
  hasNextPage,
  data,
  message = "ë” ì´ìƒ ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
}: {
  hasNextPage: boolean;
  data: unknown[] | undefined;
  message?: string;
}) {
  return data && data.length > 0 && !hasNextPage ? (
    <div className="flex justify-center items-center my-8 border-b mx-8">
      <p className="absolute text-center text-xs sm:text-sm text-gray-400 bg-white px-4 sm:px-8">
        {message}
      </p>
    </div>
  ) : null;
}
```

</details>

<br/>

#### ğŸˆ pageë³„ SkeletonUI Loading ì»´í¬ë„ŒíŠ¸ ì ìš©

> **ì ìš©ì´ìœ **

- í˜„ì¬ í˜ì´ì§€ë³„ Loading ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•˜ê³ , Loading ì»´í¬ë„ŒíŠ¸ê°€ ì „ì²´ í˜ì´ì§€ UXê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ì‚¬ìš©ìê°€ UI í˜•íƒœë¥¼ ë¯¸ë¦¬ ë³¼ ìˆ˜ ì—†ì–´ UX ê°œì„ ì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°ë˜ì–´ Loading ì»´í¬ë„ŒíŠ¸ë¥¼ Skeleton UIë¡œ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

ì•„ë˜ í˜ì´ì§€ë“¤ì— SkeletonUI Loading ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

- home í˜ì´ì§€ Skeleton UI ìƒì„±
- Product í˜ì´ì§€ Skeleton UI ìƒì„±
- Product Serach í˜ì´ì§€ Skeleton UI ìƒì„±
- Product manage í˜ì´ì§€ Skeleton UI ìƒì„±
- Product Upload/Edit í˜ì´ì§€ Skeleton UI ìƒì„±
- Product Detail í˜ì´ì§€ Skeleton UI ìƒì„±
- Profile í˜ì´ì§€ Skeleton UI ìƒì„±
- Chat í˜ì´ì§€ Skeleton UI ìƒì„±
- Chat Detail í˜ì´ì§€ Skeleton UI ìƒì„±

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì‚¬ìš©ìì—ê²Œ í˜ì´ì§€ UI í˜•íƒœë¥¼ ë¹ ë¥´ê²Œ ë³´ì—¬ ì¤„ ìˆ˜ ìˆì–´ UXê°€ ê°œì„ ë©ë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ ëŠë¼ëŠ” ë¡œë”© ì‹œê°„ì´ ë‹¨ì¶•ë©ë‹ˆë‹¤.

> **ì ìš© ì „ í›„ UI ë¹„êµ**

**ì ìš© ì „**

<div align="center">
  <img src="https://github.com/user-attachments/assets/ddc5ccb1-5a3d-4ef2-80e2-77191a8e8380"/>
</div>

**ì ìš© í›„**

<div align="center">
  <img src="https://github.com/user-attachments/assets/ac5d96ba-acb3-4be3-984e-da4ae782f17a"/>
</div>

<br/>

#### ğŸ’« ì „ì—­ ë¡œë”© ì»´í¬ë„ŒíŠ¸ ë° ë¡œë”© ìƒíƒœ ì¶”ê°€

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ ë¹„ë™ê¸° ì‘ì—… ì¤‘ Loading ì»´í¬ë„ŒíŠ¸ëŠ” í˜ì´ì§€ í•˜ìœ„ì—ì„œ ë Œë”ë§ë˜ê¸° ë•Œë¬¸ì— ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ë¥¼ í¬í•¨í•˜ì§€ ì•Šì•„, ë¡œë”© ì¤‘ì—ë„ ë ˆì´ì•„ì›ƒì´ ë…¸ì¶œë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
- ì´ë¡œ ì¸í•´ ì‚¬ìš©ìê°€ ë¡œë”© ì¤‘ì— ë ˆì´ì•„ì›ƒê³¼ ìƒí˜¸ì‘ìš©í•˜ê±°ë‚˜ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆì–´ ì˜ˆê¸°ì¹˜ ì•Šì€ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥ì„±ì´ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ì „ì—­ ë¡œë”© ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ì—¬ root layout ì»´í¬ë„ŒíŠ¸ì— ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.
- ë¡œë”© ìƒíƒœ ê´€ë¦¬ëŠ” Zustandë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ì—ì„œ ì¼ê´€ì„± ìˆê²Œ ì œì–´í•©ë‹ˆë‹¤.
- ì „ì—­ ë¡œë”© ìƒíƒœê°€ í•„ìš”í•œ ê²½ìš° useMutation ë‚´ë¶€ì—ì„œ ì „ì—­ ë¡œë”© ìƒíƒœë¥¼ ì œì–´í•©ë‹ˆë‹¤.

**â“ Zustandë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ **

ë¡œë”© ìƒíƒœëŠ” ì—¬ëŸ¬ ê³³ì—ì„œ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ë¯€ë¡œ, Context APIë¥¼ ì‚¬ìš©í•  ê²½ìš° ë§ì€ ì»´í¬ë„ŒíŠ¸ê°€ êµ¬ë…í•˜ê³  ìˆì–´ ì „ì²´ ë¦¬ë Œë”ë§ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ZustandëŠ” ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë§Œ ë¦¬ë Œë”ë§ë˜ë¯€ë¡œ ì„±ëŠ¥ ìµœì í™”ì— ìœ ë¦¬í•©ë‹ˆë‹¤.
ì„¤ì •ì´ ê°„ë‹¨í•˜ë©°, ì „ì—­ ìƒíƒœë¥¼ ë¹ ë¥´ê²Œ ë„ì…í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

**ğŸ Race Condition ë¬¸ì œ í•´ê²°í•˜ê¸°**

useMutation ë‚´ë¶€ì—ì„œ ì „ì—­ ë¡œë”©ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ í•œ í˜ì´ì§€ ë‚´ì—ì„œ useMutationì´ ë™ì‹œì— ì—¬ëŸ¬ê°œ ì‹¤í–‰ë˜ë©´ race Condition ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì•„ë˜ì™€ ê°™ì€ ìƒí™©ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤:

- mutation A ì‹¤í–‰ â†’ loading = true
- mutation B ì‹¤í–‰ â†’ loading = true
- mutation A ì™„ë£Œ â†’ loading = false âŒ â† ì´ ì‹œì ì—” Bê°€ ì•„ì§ ì•ˆ ëë‚¬ëŠ”ë° ë¡œë”©ì´ êº¼ì ¸ë²„ë¦¼
- mutation B ì™„ë£Œ â†’ ì›ë˜ ì´ë•Œ loading = falseê°€ ë˜ì–´ì•¼ ì •ìƒ

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ loading countë¥¼ ë„ì…í•˜ì—¬ countê°€ 1 ì´ìƒì´ë©´ loading ìƒíƒœë¥¼ ìœ ì§€ í•˜ë„ë¡í•©ë‹ˆë‹¤.

- mutation A ì‹¤í–‰ â†’ loading = true â† count = 1
- mutation B ì‹¤í–‰ â†’ loading = true â† count = 2
- mutation A ì™„ë£Œ â†’ loading = false â† count = 1
- mutation B ì™„ë£Œ â†’ count = 0 â†’ loading = false

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ë¹„ë™ê¸° ì‘ì—… ì¤‘ ë ˆì´ì•„ì›ƒ ë…¸ì¶œì„ ë°©ì§€í•˜ì—¬ ì‚¬ìš©ì í˜¼ë€ì„ ì¤„ì´ê³ , ì˜ˆê¸°ì¹˜ ì•Šì€ í–‰ë™ì„ ì˜ˆë°©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br/>

**global-loading-store.ts**

```javascript
import { create, ImmerDevtoolsStateCreator } from "zustand";
import { devtools } from "zustand/middleware";
import { immer } from "zustand/middleware/immer";

interface LoadingState {
  isLoading: boolean;
  loadingCount: number;
  actions: {
    startLoading: () => void;
    stopLoading: () => void;
  };
}

export const store: ImmerDevtoolsStateCreator<LoadingState> = (set) => ({
  isLoading: false,
  loadingCount: 0,
  actions: {
    startLoading: () => {
      set(
        (state: LoadingState) => {
          state.loadingCount++;
          state.isLoading = true;
        },
        false,
        "loading/startLoading"
      );
    },
    stopLoading: () => {
      set(
        (state: LoadingState) => {
          state.loadingCount = Math.max(0, state.loadingCount - 1);
          state.isLoading = state.loadingCount > 0;
        },
        false,
        "loading/stopLoading"
      );
    }
  }
});

const useGlobalLoadingStore =
  process.env.NODE_ENV !== "production"
    ? create<LoadingState>()(immer(devtools(store)))
    : create<LoadingState>()(immer(store));

export default useGlobalLoadingStore;
```

**GlobalLoading.tsx**

```javascript
"use client";

import useGlobalLoadingStore from "@/store/global-loging-store";
import Loading from "./loading";
import useBodyOverflow from "@/hooks/commons/useBodyOverflow";

export default function GlobalLoading() {
  const { isLoading } = useGlobalLoadingStore();
  useBodyOverflow({ isLocked: isLoading });
  return isLoading ? <Loading /> : null;
}
```

</details>

<br/>

#### ğŸ¯ SRP ì›ì¹™ì— ë”°ë¼ custom hook ì½”ë“œ ë¶„ë¦¬ ë° hookëª… ìˆ˜ì •

> **ì ìš©ì´ìœ **

- í˜„ì¬ ê° ì»´í¬ë„ŒíŠ¸ ë³„ë¡œ custom hookë¥¼ í†µí•´ ë¡œì§ì´ ë¶„ë¦¬ë˜ì–´ìˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ SRP ì›ì¹™ì— ë¶€í•©í•˜ë„ë¡ í•˜ë‚˜ì˜ ì±…ì„ì„ ì§€ë„ë¡ custom hookì´ ë¶„ë¦¬ë˜ì–´ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.
- ë˜í•œ, custom hookì˜ ëª…ëª…ì´ use+ì»´í¬ë„ŒíŠ¸ëª…ìœ¼ë¡œ ë˜ì–´ ìˆì–´ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ” í›…ì¸ì§€ ì •í™•íˆ ì¸ì§€í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ ê° hookì„ í•˜ë‚˜ì˜ ì±…ì„ì„ ì§€ë„ë¡ ë¶„ë¦¬í•˜ê³ , hookì˜ ì´ë¦„ì„ ìˆ˜í–‰í•  ì—­í• ì— ë§ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

ì•„ë˜ ê·œì¹™ì— ë”°ë¼ custom hookë¥¼ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤:

- í˜„ì¬ì˜ custom hook ë¡œì§ì´ ë³µì¡í•œ ê²½ìš° ë³„ë„ì˜ custom hookìœ¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.
- ì¬ì‚¬ìš©ì˜ ì—¬ì§€ê°€ ìˆëŠ” ê²½ìš° ë³„ë„ì˜ custom hookìœ¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.
- ë‚´ë¶€ ë¡œì§ì´ ë³µì¡í•˜ì§€ ì•Šê±°ë‚˜ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë‚®ê³  ì¬ì‚¬ìš© í•˜ì§€ ì•ŠëŠ” ë¡œì§ì€ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ìœ ì§€ë³´ìˆ˜ì„± ì¦ê°€: ë¡œì§ì´ ì±…ì„ ë‹¨ìœ„ë¡œ ë¶„ë¦¬ë˜ì–´ ê° ê¸°ëŠ¥ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¬ì‚¬ìš©ì„± í–¥ìƒ: í•˜ë‚˜ì˜ ì±…ì„ì„ ê°–ëŠ” hookì€ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‰½ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- íŒŒì¼ëª…ì„ í†µí•´ ì—­í•  íŒŒì•… ê°€ëŠ¥: ëª…í™•í•œ ë„¤ì´ë°ìœ¼ë¡œ hookì˜ ê¸°ëŠ¥ì„ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br/>

**useSendToVerifyEmail.ts**

ê¸°ì¡´ ì½”ë“œì—ì„œëŠ” ì—¬ëŸ¬ ê°€ì§€ ì±…ì„ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.

- ì¸ì¦ ë©”ì¼ ì „ì†¡ ë¡œì§
- ì¸ì¦ ë©”ì¼ ì „ì†¡ ë¡œì§ ë‚´ë¶€ ì´ë©”ì¼ ìœ íš¨ì„± ê²€ì‚¬
- ì´ë©”ì¼ input focus
- ì–¸ë§ˆìš´íŠ¸ ì‹œ ì¸ì¦ ë©”ì¼ ì „ì†¡ ì´ˆê¸°í™”

```javascript
import { useCallback, useEffect, useRef } from "react";
import { toast } from "react-toastify";
import { useFormContext } from "react-hook-form";
import useSendToVerifyEmailMutate from "../react-query/mutations/auth/useSendToVerifyEmailMutate";
import useEmailDuplicationMutate from "../react-query/mutations/auth/useEmailDuplicationMutate";
import useCheckEmailMutate from "../react-query/mutations/auth/useCheckEmailMutate";
import useSignupStore from "@/store/signup-store";

export default function useSendToVerifyEmail(isFindPw?: boolean) {
  const { getValues } = useFormContext();
  const actions = useSignupStore((state) => state.actions);
  const isSendToVerifyEmail = useSignupStore(
    (state) => state.isSendToVerifyEmail
  );
  const emailRef = useRef<HTMLInputElement | null>(null);

  const { sendToVerifyEmailMutate } = useSendToVerifyEmailMutate();
  const { emailDuplicationMuate } = useEmailDuplicationMutate();
  const { checkEmailMutate } = useCheckEmailMutate();

  const handleClickSendToVerifyEmail = useCallback(async () => {
    const email = getValues("email");

    if (!email) {
      toast.warn("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }

    if (isFindPw) {
      try {
        await checkEmailMutate(email);
      } catch {
        return;
      }
    } else {
      try {
        await emailDuplicationMuate(email);
      } catch (error) {
        console.error(error);
        return;
      }
    }

    actions.sendToVerifyEmail();
    actions.resetTimer();
    actions.setSendToVerifyEmailLoading(true);
    sendToVerifyEmailMutate({ email, isFindPw });
  }, []);

  useEffect(() => {
    if (!isSendToVerifyEmail) {
      if (!emailRef.current) return;
      emailRef.current.focus();
    }
  }, [isSendToVerifyEmail]);

  useEffect(() => {
    return () => {
      actions.resetIsSendToVerifyEmail();
    };
  }, []);

  return {
    isSendToVerifyEmail,
    handleClickSendToVerifyEmail,
    emailRef
  };
}
```

ìœ„ì˜ ì±…ì„ë“¤ì„ ì±…ì„ë³„ë¡œ custom hookìœ¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.

**useEmailVerificationHandler.ts**

```javascript
import { useFormContext } from "react-hook-form";
import useVerificationEmailMutate from "../../react-query/mutations/auth/useVerificationEmailMutate";
import { toast } from "react-toastify";
import { useCallback } from "react";
import { EmailVerificationType } from "@/types/auth-types";

export default function useEmailVerificationHandler(
  type: EmailVerificationType
) {
  const { getValues } = useFormContext();

  const { verificationEmailMuate, verificationEmailLoading } =
    useVerificationEmailMutate();

  const handleClickVerificationEmail = useCallback(async () => {
    const email = getValues("email");
    const verificationCode = getValues("verificationCode");
    if (!verificationCode) {
      toast.warn("ì¸ì¦ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }

    verificationEmailMuate({ email, verificationCode, type });
  }, [getValues, type, verificationEmailMuate]);

  return { verificationEmailLoading, handleClickVerificationEmail };
}
```

**useEmailVerificationValidator**

```javascript
import { useFormContext } from 'react-hook-form';
import useCheckEmailMutate from '@/hooks/react-query/mutations/auth/useCheckEmailMutate';
import useEmailDuplicationMutate from '@/hooks/react-query/mutations/auth/useEmailDuplicationMutate';
import { toast } from 'react-toastify';
import { EmailVerificationType } from '@/types/auth-types';

export function useEmailVerificationValidator(type: EmailVerificationType) {
  const { getValues } = useFormContext();
  const { checkEmailMutate } = useCheckEmailMutate();
  const { emailDuplicationMuate } = useEmailDuplicationMutate();

  const validate = async () => {
    const email = getValues("email");
    if (!email) {
      toast.warn("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return false;
    }

    try {
      if (type==="resetPw") {
        await checkEmailMutate(email);
      } else {
        await emailDuplicationMuate(email);
      }
      return true;
    } catch {
      return false;
    }
  };

  return { validate };
}

```

**useFocusEmailVerificationInput.ts**

```javascript
export function useFocusEmailVerificationInput() {
  const emailRef = (useRef < HTMLInputElement) | (null > null);
  const { emailStatus } = useContext(EmailVerificationContext);

  useEffect(() => {
    if (emailStatus === "INITIAL" && emailRef.current) {
      emailRef.current.focus();
    }
  }, [emailRef, emailStatus]);

  return { emailRef };
}
```

**useResetVerificationEmail**

```javascript
import { EmailVerificationContext } from "@/store/EmailVerificationProvider";
import { useContext } from "react";

export default function useResetVerificationEmail() {
  const { setEmailStatus } = useContext(EmailVerificationContext);

  const resetSendToVerificationEmail = () => {
    setEmailStatus("INITIAL");
  };

  return { resetSendToVerificationEmail };
}
```

</details>

<br/>

#### ğŸ” Zustand ì´ë©”ì¼ ì¸ì¦ ìƒíƒœ Context APIë¡œ ì „í™˜

> **ì ìš©ì´ìœ **

- ì´ë©”ì¼ ì¸ì¦ ìƒíƒœëŠ” íšŒì›ê°€ì…ê³¼ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ê³¼ì •ì—ì„œë§Œ ì‚¬ìš©ë˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ê³µìœ í•  í•„ìš”ê°€ ì—†ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
- ZustandëŠ” ì „ì—­ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ë•Œë¬¸ì—, í˜ì´ì§€ ì „í™˜ ì‹œ ìƒíƒœê°€ ì˜ë„ì¹˜ ì•Šê²Œ ìœ ì§€ë˜ê±°ë‚˜ ì§ì ‘ ì´ˆê¸°í™”í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
- ë°˜ë©´ Context APIëŠ” ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ìƒíƒœ ë²”ìœ„ë¥¼ ì œí•œí•  ìˆ˜ ìˆì–´, íŠ¹ì • íë¦„(íšŒì›ê°€ì…/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°)ì— í•„ìš”í•œ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ìº¡ìŠí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ì´ë©”ì¼ ì¸ì¦ ì „ìš© Context APIë¥¼ ìƒì„±í•˜ì—¬ íšŒì›ê°€ì…, ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í˜ì´ì§€ì—ì„œ ê³µìœ  ìƒíƒœë¥¼ ì‚¬ìš©í•  ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¥¼ Providerë¡œ ê°ìŒˆë‹ˆë‹¤.
- ê¸°ì¡´ Zustand ê¸°ë°˜ ì»¤ìŠ¤í…€ í›… ë° ìƒíƒœ ë¡œì§ ì œê±° ë° Context API ìƒíƒœ ë¡œì§ ì ìš©í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- í˜ì´ì§€ ì „í™˜ ì‹œ ìƒíƒœ ì´ˆê¸°í™” ì½”ë“œ ì œê±°
- ì¸ì¦ ê´€ë ¨ ìƒíƒœì˜ ì±…ì„ ë²”ìœ„ê°€ ëª…í™•í•´ì§€ê³  ì‘ì§‘ë ¥ í–¥ìƒ
- ë©”ëª¨ë¦¬ ì‚¬ìš© ìµœì í™” (í•„ìš”í•  ë•Œë§Œ Contextê°€ ìƒì„±ë˜ê³  í•´ì œë¨)

> **ì ìš© ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br/>

**EmailVerificationContext**

```javascript
// ...
export const EmailVerificationContext =
  createContext<EmailVerificationContextType>({
    emailStatus: "INITIAL",
    isLoading: false,
    isError: false,
    timer: VERIFICATION_EMAIL_EXP,
    setEmailStatus: () => {},
    setIsLoading: () => {},
    setIsError: () => {},
    countDown: () => {},
    resetTimer: () => {},
    reset: () => {},
    send: () => {}
  });

export function EmailVerificationContextProvider({
  children
}: {
  children: ReactNode;
}) {
  const [emailStatus, setEmailStatus] =
    useState<EmailVerificationStatus>("INITIAL");
  const [isLoading, setIsLoading] = useState(false);
  const [isError, setIsError] = useState(false);
  const [timer, setTimer] = useState(VERIFICATION_EMAIL_EXP);

  const countDown = () => {
    setTimer((prev) => prev - 1);
  };
  const resetTimer = () => {
    setTimer(VERIFICATION_EMAIL_EXP);
  };

  const reset = () => {
    setEmailStatus("INITIAL");
    setTimer(VERIFICATION_EMAIL_EXP);
    setIsLoading(false);
    setIsError(false);
  };

  const send = () => {
    resetTimer();
    setEmailStatus("SEND");
    setIsLoading(true);
    setIsError(false);
  };

  return (
    <EmailVerificationContext.Provider
      value={{
        emailStatus,
        isLoading,
        isError,
        timer,
        setEmailStatus,
        setIsLoading,
        setIsError,
        countDown,
        resetTimer,
        reset,
        send
      }}
    >
      {children}
    </EmailVerificationContext.Provider>
  );
}
```

</details>

<br/>

#### ğŸ—‚ ë„ë©”ì¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì ìš©

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ íŒŒì¼ êµ¬ì¡°ëŠ” `components`, `constants`, `hooks`, `types` ë“± ì—­í• ë³„ë¡œ ë¶„ì‚°ë˜ì–´ ìˆì–´, ìˆ˜ì •ì´ë‚˜ ì‚­ì œ ì‹œ ê´€ë ¨ëœ íŒŒì¼ë“¤ì„ ì¼ì¼ì´ ì°¾ì•„ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆìŠµë‹ˆë‹¤.
- ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ê´€ë ¨ëœ ì½”ë“œë“¤ì´ í•˜ë‚˜ì˜ ë„ë©”ì¸ì•ˆì—ì„œ ê´€ë¦¬ë˜ë„ë¡ ë„ë©”ì¸ë³„ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¡œ íŒŒì¼ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ê³µí†µ ìš”ì†ŒëŠ” ê¸°ì¡´ì²˜ëŸ¼ ìƒìœ„ì— ë‘ë˜, `domains` í´ë” í•˜ìœ„ì— ë„ë©”ì¸ë³„ í´ë”ë¥¼ ìƒì„±í•˜ê³ , ê° ë„ë©”ì¸ ë‚´ë¶€ì— `components`, `constansts`, `hooks`, `types`, `utils` ë“± í´ë”ë¥¼ ìƒì„±í•˜ì—¬ ê´€ë ¨ëœ ì½”ë“œë“¤ì´ í•˜ë‚˜ì˜ ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ê´€ë¦¬ë˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ê´€ë ¨ ì½”ë“œë“¤ì´ ëª¨ì—¬ ìˆì–´ ì˜ì¡´ ê´€ê³„ íŒŒì•…ì´ ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤.
- ë„ë©”ì¸ ë‹¨ìœ„ì˜ ë””ë ‰í† ë¦¬ ì‚­ì œë¡œ ê¹”ë”í•œ ì½”ë“œ ì •ë¦¬ê°€ëŠ¥í•©ë‹ˆë‹¤.
- import ê²½ë¡œë§Œ ë³´ë”ë¼ë„ íŒŒì¼ ìœ„ì¹˜ ë° ì—­í•  íŒŒì•… ê°€ëŠ¥í•©ë‹ˆë‹¤.

> **í´ë” êµ¬ì¡° ë¹„êµ**

<details>
<summary>í´ë” êµ¬ì¡° ë³´ê¸°</summary>

<br/>

**ì ìš© ì „ í´ë” êµ¬ì¡°**

```text
 â”£ ğŸ“‚app
 â”£ ğŸ“‚components
 â”£ ğŸ“‚constants
 â”£ ğŸ“‚hooks
 â”£ ğŸ“‚lib
 â”£ ğŸ“‚types
 â”£ ...
```

**ì ìš© í›„ í´ë” êµ¬ì¡°**

- ìƒìœ„ components, contstants, hooks, utils, types ë“± ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ë“¤ì„ ë‘ë©°, domains í´ë” í•˜ìœ„ì— domain í´ë”ë¥¼ ìƒì„±í•˜ì—¬ ê´€ë ¨ëœ ì½”ë“œë“¤ì´ í•˜ë‚˜ì˜ ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ê´€ë¦¬ë˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

```text
 â”£ ğŸ“‚app
 â”£ ğŸ“‚components
 â”£ ğŸ“‚constants
 â”£ ğŸ“‚hooks
 â”£ ğŸ“‚utils
 â”£ ğŸ“‚types
 â”£ ğŸ“‚domains
 â”ƒ â”£ ğŸ“‚auth
 â”ƒ â”£ â”£ ğŸ“‚api
 â”ƒ â”£ â”£ ğŸ“‚components
 â”ƒ â”£ â”£ ğŸ“‚hooks
 â”ƒ â”£ â”£ ğŸ“‚models
 â”ƒ â”£ â”— ...
 â”ƒ â”£ ğŸ“‚chat
 â”ƒ â”£ â”£ ğŸ“‚api
 â”ƒ â”£ â”£ ğŸ“‚components
 â”ƒ â”£ â”£ ğŸ“‚hooks
 â”ƒ â”£ â”£ ğŸ“‚models
 â”ƒ â”£ â”— ...
 â”ƒ â”£ ğŸ“‚home
 â”ƒ â”£ ğŸ“‚notification
 â”ƒ â”£ ğŸ“‚product
 â”ƒ â”£ ğŸ“‚search
 â”ƒ â”— ğŸ“‚user
 â”£ ...
```

</details>

<br/>

#### ğŸ—ƒ ë„ë©”ì¸ ë””ë ‰í† ë¦¬ ë‚´ë¶€ êµ¬ì¡° í˜ì´ì§€ë³„ ì„¸ë¶„í™” ë° ë„¤ì´ë° ê·œì¹™ ì¼ê´€í™”

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ ë„ë©”ì¸ ë‹¨ìœ„ ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” ê´€ë ¨ëœ ê¸°ëŠ¥ì´ í•œê³³ì— ëª¨ì—¬ ìˆì–´ ìœ ì§€ë³´ìˆ˜ì— ìœ ë¦¬í•˜ì§€ë§Œ, ë„ë©”ì¸ ë‚´ ê¸°ëŠ¥ ìˆ˜ê°€ ë§ì•„ì§ˆ ê²½ìš° íŒŒì¼ì´ í˜¼ì¡í•´ì§€ê³  íƒìƒ‰ì´ ì–´ë ¤ì›Œì§€ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ í˜ì´ì§€ ë‹¨ìœ„ë¡œ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì„¸ë¶„í™”í•©ë‹ˆë‹¤.
- í˜„ì¬ íŒŒì¼ëª…ì´ PascalCaseì™€ kebab-caseê°€ ì„ì—¬ ìˆì–´ ì¼ê´€ì„±ìˆì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ í´ë”ëª…ì„ ì œì™¸í•œ íŒŒì¼ëª…ì€ PascalCaseë¡œ ëª…ëª…í•©ë‹ˆë‹¤.
- ê¸°ì¡´ì—ëŠ” ì»´í¬ë„ŒíŠ¸ëª…ì— í˜ì´ì§€ëª…ì„ prefixë¡œ ë¶™ì—¬ ì‚¬ìš©í–ˆìœ¼ë‚˜,ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ í†µí•´ ì´ë¯¸ ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ê³¼ ìœ„ì¹˜ê°€ ëª…í™•íˆ ë“œëŸ¬ë‚˜ë¯€ë¡œë¶ˆí•„ìš”í•œ prefixëŠ” ì œê±°í•©ë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- ë„ë©”ì¸ ë‚´ë¶€ë¥¼ í˜ì´ì§€ ë‹¨ìœ„ë¡œ ì„¸ë¶„í™”ëœ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤.
- ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì½”ë“œ(components, hooks, utils ë“±)ëŠ” shared ë””ë ‰í† ë¦¬ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
- shared ë””ë ‰í† ë¦¬ ë‚´ì—ì„œë„ ì„œë¡œ ê´€ë ¨ì´ ê¹Šê³  í•¨ê»˜ ë³€ê²½ë˜ëŠ” ê²½í–¥ì´ ìˆëŠ” ì½”ë“œë“¤ì€ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•©ë‹ˆë‹¤.
- í´ë”ëª…ì„ ì œì™¸í•œ ëª¨ë“  íŒŒì¼ëª…ì€ PascalCaseë¡œ í†µì¼í•©ë‹ˆë‹¤.
- ì»´í¬ë„ŒíŠ¸ëª…ì˜ ë¶ˆí•„ìš”í•œ prefixë¥¼ ì œê±°í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ë„ë©”ì¸ ë‚´ í˜ì´ì§€ë³„ íë¦„ íŒŒì•…ì´ ëª…í™•í•´ì§‘ë‹ˆë‹¤.
- import ê²½ë¡œê°€ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ê°€ë…ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.
- í˜ì´ì§€ë³„ë¡œ ì„¸ë¶„í™”ë˜ì–´ ìœ ì§€ë³´ìˆ˜ê°€ í¸ë¦¬í•´ì§‘ë‹ˆë‹¤.
- ì½”ë“œ ë„¤ì´ë°ì˜ ì¼ê´€ì„± ìœ ì§€ë©ë‹ˆë‹¤.

> **í´ë” êµ¬ì¡° ë¹„êµ**

<details>
<summary>í´ë” êµ¬ì¡° ë³´ê¸°</summary>

<br/>

**ì ìš© ì „ í´ë” êµ¬ì¡°**

```text
 â”£ ğŸ“‚app
 â”£ ğŸ“‚components
 â”£ ğŸ“‚constants
 â”£ ğŸ“‚hooks
 â”£ ğŸ“‚utils
 â”£ ğŸ“‚types
 â”£ ğŸ“‚domains
 â”ƒ â”£ ğŸ“‚auth
 â”ƒ â”£ â”£ ğŸ“‚api
 â”ƒ â”£ â”£ ğŸ“‚components
 â”ƒ â”£ â”£ ğŸ“‚hooks
 â”ƒ â”£ â”£ ğŸ“‚models
 â”ƒ â”£ â”— ...
 â”ƒ â”£ ğŸ“‚chat
 â”ƒ â”£ â”£ ğŸ“‚api
 â”ƒ â”£ â”£ ğŸ“‚components
 â”ƒ â”£ â”£ ğŸ“‚hooks
 â”ƒ â”£ â”£ ğŸ“‚models
 â”ƒ â”£ â”— ...
 â”ƒ â”£ ğŸ“‚home
 â”ƒ â”£ ğŸ“‚notification
 â”ƒ â”£ ğŸ“‚product
 â”ƒ â”£ ğŸ“‚search
 â”ƒ â”— ğŸ“‚user
 â”£ ...
```

**ì ìš© í›„ í´ë” êµ¬ì¡°**

```text
 â”£ ğŸ“‚app
 â”£ ğŸ“‚shared
 â”£ ğŸ“‚domains
 â”ƒ â”£ ğŸ“‚auth
 â”ƒ â”£ â”£ ğŸ“‚change-password
 â”ƒ â”£ â”£ â”£ ğŸ“‚api
 â”ƒ â”£ â”£ â”£ ğŸ“‚components
 â”ƒ â”£ â”£ â”£ ğŸ“‚hooks
 â”ƒ â”£ â”£ â”— ...
 â”ƒ â”£ â”£ ğŸ“‚reset-password
 â”ƒ â”£ â”£ ğŸ“‚shared
 â”ƒ â”£ â”— ...
 â”ƒ â”£ ğŸ“‚chat
 â”ƒ â”£ â”£ ğŸ“‚room
 â”ƒ â”£ â”— ğŸ“‚room-list
 â”ƒ â”£ ğŸ“‚home
 â”ƒ â”£ ğŸ“‚notification
 â”ƒ â”£ ğŸ“‚product
 â”ƒ â”£ ğŸ“‚search
 â”ƒ â”— ğŸ“‚user
 â”£ ...
```

</details>

<br/>

#### ğŸ§ª ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

> **ì ìš©ì´ìœ **

- ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ì— ëŒ€í•œ ì‹ ë¢°ì„± í™•ë³´ë¥¼ ìœ„í•´ì„œì…ë‹ˆë‹¤.
- ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì—†ì´ ìë™ ê²€ì¦ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
- ë‹¤ë¥¸ ì‚¬ëŒì´ ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì‰¬ì›Œì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
- ë²„ê·¸ë‚˜ ì˜¤ë¥˜ ë°œìƒì‹œ ìœ„ì¹˜ë¥¼ íŒŒì•…ì´ ìš©ì´í•˜ë©° ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- jestì™€ react-testing-libraryë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ í‹¸ í•¨ìˆ˜, API í•¨ìˆ˜, ì»¤ìŠ¤í…€ í›… ì¤‘ì‹¬ìœ¼ë¡œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ê¸°ì¡´ì— ë°œê²¬í•˜ì§€ ëª»í–ˆë˜ ë²„ê·¸ì™€ ë¡œì§ ì˜¤ë¥˜ë¥¼ ì‚¬ì „ì— ìˆ˜ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- ë¡œì§ì„ ìˆ˜ë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ê²€ì¦í•  ìˆ˜ ìˆì–´ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤.
- ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œì— ëŒ€í•œ ì‹ ë¢°ì„±ê³¼ ì•ˆì •ì„±ì´ í™•ë³´ë˜ì—ˆìŠµë‹ˆë‹¤.

> **í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ë°œê²¬í•œ ì˜¤ë¥˜**

<details>
<summary>ë¬¸ì œ ì½”ë“œ ë° ìˆ˜ì • ê³¼ì • ë³´ê¸°</summary>

<br/>

**ë¬¸ì œ ë°œìƒ í…ŒìŠ¤íŠ¸ ì½”ë“œ**

```javascript
//...
it("onMutateì—ì„œ product, myProfile ìºì‹œ cancelQueries, setQueryDataê°€ í˜¸ì¶œë©ë‹ˆë‹¤.", async () => {
  const cancelQueriesSpy = jest.spyOn(queryClient, "cancelQueries");
  const setQueryDataSpy = jest.spyOn(queryClient, "setQueryData");

  const { result } = renderHook(
    () => useProductDetailFollowMutate("targetUser123"),
    { wrapper }
  );

  act(() => {
    result.current.productDetailfollowMutate();
  });

  await waitFor(() => {
    expect(cancelQueriesSpy).toHaveBeenCalledWith({ queryKey: productKey });
    expect(cancelQueriesSpy).toHaveBeenCalledWith({ queryKey: myProfileKey });

    expect(setQueryDataSpy).toHaveBeenCalledWith(productKey, {
      _id: "123",
      auth: {
        followers: ["user1", "user123"]
      }
    });

    expect(setQueryDataSpy).toHaveBeenCalledWith(myProfileKey, {
      uid: "user123",
      followings: ["user2", "targetUser123"]
    });
  });
});
//...
```

ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ì•„ë˜ ë¶€ë¶„ ë¶ˆì¼ì¹˜í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ì§€ ëª»í•˜ì˜€ìŠµë‹ˆë‹¤.

```javascript
expect(setQueryDataSpy).toHaveBeenCalledWith(productKey, {
  _id: "123",
  auth: {
    followers: ["user1", "user123"]
  }
});
```

**í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì›ì¸**

- ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ì½”ë“œì—ì„œ auth.followersë¥¼ ìˆ˜ì •í•´ì•¼ í–ˆìœ¼ë‚˜, ì˜ëª»í•˜ì—¬ auth.followingsë¥¼ ìˆ˜ì •í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
- ë˜í•œ previousProduct.authê°€ ì•„ë‹Œ previousMyProfileì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ëª»ëœ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
- ì‹¤ì œ ì‹¤í–‰ ì‹œ ëˆˆì— ë„ëŠ” ì˜¤ë¥˜ëŠ” ì—†ì—ˆì§€ë§Œ, ì´ëŠ” onSettled ë‚´ì˜ invalidateQueriesê°€ ì„œë²„ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë“œëŸ¬ë‚˜ì§€ ì•Šì•˜ë˜ ê²ƒì…ë‹ˆë‹¤.

```javascript
//...
  onMutate: async () => {
    await queryClient.cancelQueries({ queryKey: productQueryKey });
    await queryClient.cancelQueries({ queryKey: myProfileQueryKey });
    const previousProduct = queryClient.getQueryData(
      productQueryKey
    ) as ProductDetailData;
    const previousMyProfile = queryClient.getQueryData(
      myProfileQueryKey
    ) as ProfileData;
    const newProduct = {
      ...previousProduct,
      auth: {
        ...previousProduct.auth,
        followings: [
          ...previousMyProfile.followings.filter(
            (id) => id !== previousMyProfile.uid
          )
        ]
      }
    };
    const newMyProfile = {
      ...previousMyProfile,
      followings: [...previousMyProfile.followings.filter((id) => id !== uid)]
    };
    //...
  }
  //...
  onSettled: () => {
    queryClient.invalidateQueries({ queryKey: productQueryKey });
    queryClient.invalidateQueries({ queryKey: myProfileQueryKey });
  }
 //...
```

**ìˆ˜ì • í›„ ì½”ë“œ**

- auth.followings â†’ auth.followersë¡œ í‚¤ ê°’ì„ ì˜¬ë°”ë¥´ê²Œ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
- í•„í„°ë§ ê¸°ì¤€ ì—­ì‹œ previousProduct.auth.followersë¡œ ì •ìƒì ìœ¼ë¡œ ì°¸ì¡°í•˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
- ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ í†µê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.

```javascript
    //...
    onMutate: async () => {
      await queryClient.cancelQueries({ queryKey: productQueryKey });
      await queryClient.cancelQueries({ queryKey: myProfileQueryKey });
      const previousProduct = queryClient.getQueryData(
        productQueryKey
      ) as ProductDetailData;
      const previousMyProfile = queryClient.getQueryData(
        myProfileQueryKey
      ) as ProfileData;
      const newProduct = {
        ...previousProduct,
        auth: {
          ...previousProduct.auth,
          followers: [
            ...previousProduct.auth.followers.filter(
              (id) => id !== previousMyProfile.uid
            )
          ]
        }
      };
      const newMyProfile = {
        ...previousMyProfile,
        followings: [...previousMyProfile.followings.filter((id) => id !== uid)]
      };
      //...
    }
    //...
    onSettled: () => {
      queryClient.invalidateQueries({ queryKey: productQueryKey });
      queryClient.invalidateQueries({ queryKey: myProfileQueryKey });
    }
     //...
```

</details>

<br/>

#### ğŸ‘¾ GitHub Actionsë¥¼ í™œìš©í•œ CI/CD êµ¬ì¶•ì„ í†µí•œ ê°œë°œí™˜ê²½ ê°œì„ 

> **ì ìš©ì´ìœ **

- ì½”ë“œ ìˆ˜ì • ì‹œ í…ŒìŠ¤íŠ¸ì™€ ë°°í¬ë¥¼ ìë™í™”í•˜ì—¬ ê°œë°œ íš¨ìœ¨ì„ ë†’ì´ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.
- dev â†’ main ë¸Œëœì¹˜ ë¨¸ì§€ë¥¼ ìë™í™”í•˜ì—¬ ì‘ì—… íë¦„ì„ ë‹¨ìˆœí™”í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- dev ë¸Œëœì¹˜ì— pushê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì´ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤:
  - í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œì˜ ì•ˆì •ì„±ì„ í™•ì¸í•©ë‹ˆë‹¤. (CI)
  - Vercelì„ í†µí•´ Preview í™˜ê²½ì— ìë™ìœ¼ë¡œ ë°°í¬í•©ë‹ˆë‹¤.
  - í…ŒìŠ¤íŠ¸ ë° ë°°í¬ê°€ ì„±ê³µí•˜ë©´ main ë¸Œëœì¹˜ë¡œ ìë™ ë¨¸ì§€ë©ë‹ˆë‹¤.
- main ë¸Œëœì¹˜ì— push ë°œìƒ ì‹œ:
  - Vercelì„ í†µí•´ Production í™˜ê²½ì— ìë™ìœ¼ë¡œ ë°°í¬ë©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- npm test ë° ë°°í¬ ê³¼ì •ì´ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ì–´ ì‚¬ì†Œí•œ ì‘ì—…ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- dev ë¸Œëœì¹˜ ì‘ì—… ë‚´ìš©ì„ ìˆ˜ë™ìœ¼ë¡œ mainì— ë¨¸ì§€í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.
- Preview â†’ Production íë¦„ì´ ìë™í™”ë˜ì–´ ë°°í¬ ì‹¤ìˆ˜ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.

> **Workflow êµ¬ì„± ë° ì½”ë“œ**

<details>
<summary><strong>ğŸ“ ci-dev.yml â€“ í…ŒìŠ¤íŠ¸ & Preview ë°°í¬ & ìë™ Merge</strong></summary>

```yml
  name: Test and Auto-Merge to Main

  on:
  push:
  branches: - dev

  permissions:
  contents: write

  jobs:
  test:
  runs-on: ubuntu-latest
  env:
  TZ: Asia/Seoul
  MONGODB_URI: ${{ secrets.MONGODB_URI }}

      steps:
        - uses: actions/checkout@v3
        - uses: actions/setup-node@v3
          with:
            node-version: "18"

        - run: npm install
        - run: npm test

  deploy:
  needs: test
  runs-on: ubuntu-latest
  if: success()

      steps:
        - uses: actions/checkout@v3

        - name: Deploy to Vercel (Preview)
          uses: amondnet/vercel-action@v25
          with:
            vercel-token: ${{ secrets.VERCEL_TOKEN }}
            vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
            vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
            github-comment: false

  merge:
  needs: deploy
  runs-on: ubuntu-latest

      steps:
        - name: Checkout main branch
          uses: actions/checkout@v3
          with:
            ref: main

        - name: Merge dev into main
          run: |
            git fetch origin dev
            git merge origin/dev --ff-only
            git push origin main
```

<br/>

</details>

<details>
<summary><strong>ğŸ“ cd-prod.yml â€“ Production ìë™ ë°°í¬</strong></summary>

```yml
name: Deploy to Production

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Deploy to Vercel (Production)
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: "--prod"
          github-comment: false
```

<br/>

</details>

<br/>

#### ğŸ Sentry ì—°ë™ì„ í†µí•œ ì—ëŸ¬ ê´€ë¦¬ ê°œì„ 

> **ì ìš©ì´ìœ **

- ê¸°ì¡´ì—ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ë¡œê·¸ë§Œìœ¼ë¡œëŠ” ë””ë²„ê¹…ì´ ì–´ë ¤ì› ìœ¼ë©°, ì—ëŸ¬ ë°œìƒ ì‹œì , ì‚¬ìš©ì ì •ë³´, ì¬í˜„ íë¦„ ë“±ì„ íŒŒì•…í•˜ê¸° í˜ë“¤ì—ˆìŠµë‹ˆë‹¤.
- Sentry ë„ì…ì„ í†µí•´ ì—ëŸ¬ë¥¼ ë¶„ì„í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì— ì˜í–¥ì„ ì£¼ëŠ” ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ ì¸ì§€í•˜ê³  í•´ê²°í•  ìˆ˜ ìˆëŠ” ê¸°ë°˜ì„ ë§ˆë ¨í•©ë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- í´ë¼ì´ì–¸íŠ¸, ì„œë²„, ì—£ì§€ í™˜ê²½ë³„ë¡œ Sentryë¥¼ ë¶„ë¦¬ ì´ˆê¸°í™”í•˜ì—¬ ê° í™˜ê²½ì˜ ì—ëŸ¬ë¥¼ êµ¬ë¶„í•´ì„œ ì¶”ì í•©ë‹ˆë‹¤.
- 400ë²ˆëŒ€ ì—ëŸ¬ëŠ” Sentryë¡œ ì „ì†¡í•˜ì§€ ì•Šë„ë¡ beforeSend í›…ì—ì„œ í•„í„°ë§í•©ë‹ˆë‹¤.
- ê° í™˜ê²½ë³„ë¡œ íƒœê·¸(client/server/edge)ë¥¼ ì¶”ê°€í•˜ì—¬ ì—ëŸ¬ ë°œìƒ ìœ„ì¹˜ë¥¼ ëª…í™•íˆ êµ¬ë¶„í•©ë‹ˆë‹¤.
- ì„¸ì…˜ ë¦¬í”Œë ˆì´ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ì—¬ ì‹¤ì œ ì‚¬ìš©ì íë¦„ì„ ì¶”ì í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.
- ErrorBoundary ì»´í¬ë„ŒíŠ¸ì—ì„œ Sentry.captureExceptionì„ í™œìš©í•´ í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ ì—ëŸ¬ë„ Sentryë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
- api routesì˜ catehë¬¸ì— Sentry.captureExceptionì„ í™œìš©í•´ ì„œë²„ ì¸¡ ì—ëŸ¬ë„ Sentryë¡œ ì „ì†¡í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì—ëŸ¬ ë°œìƒ ìœ„ì¹˜, ì½”ë“œ ë¼ì¸, ë¸Œë¼ìš°ì € í™˜ê²½ ë“± ìƒì„¸ ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
- ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬, í´ë¼ì´ì–¸íŠ¸ JavaScript ì—ëŸ¬, ì„œë²„ API ì—ëŸ¬ë¥¼ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì„¸ì…˜ ë¦¬í”Œë ˆì´ ê¸°ëŠ¥ì„ í†µí•´ ì‚¬ìš©ìì˜ ì‹¤ì œ íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë²„ì „ë³„ ì—ëŸ¬ ë°œìƒ í˜„í™©ì„ ì¶”ì í•  ìˆ˜ ìˆì–´, ë°°í¬ ì´í›„ ì‹ ê·œ ì—ëŸ¬ë¥¼ ë¹ ë¥´ê²Œ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì—ëŸ¬ ë°œìƒ ì‹œì ì— ëŒ€í•œ ì•Œë¦¼ ë° ëŒ€ì‹œë³´ë“œ ì œê³µìœ¼ë¡œ, ì‹¤ì‹œê°„ ëŒ€ì‘ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.

> **ì ìš© ì½”ë“œ**

<details>
<summary>instrumentation-client.ts (í´ë¼ì´ì–¸íŠ¸ Sentry ì„¤ì •)</summary>

```typescript
import * as Sentry from "@sentry/nextjs";

function isNetworkResponseError(error: unknown): boolean {
  const networkError = error as {
    isAxiosError?: boolean;
    response?: unknown;
    message?: string;
  };

  // Axios ì—ëŸ¬
  if (networkError.isAxiosError && networkError.response) {
    return true;
  }

  const message =
    typeof error === "string" ? error : (networkError.message ?? "");

  // fetch ë“±ì˜ ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë©”ì‹œì§€
  const networkErrorPatterns = [
    /Request failed with status code \d+/,
    /\b4\d\d\b/,
    /\b5\d\d\b/,
    /Failed to fetch/,
    /NetworkError/,
    /Load failed/,
    /Network request failed/
  ];

  return networkErrorPatterns.some((pattern) => pattern.test(message));
}

if (process.env.NODE_ENV === "production") {
  Sentry.init({
    dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
    integrations: [Sentry.replayIntegration()],
    tracesSampleRate: 1,
    replaysSessionSampleRate: 0.1,
    replaysOnErrorSampleRate: 1.0,
    debug: false,

    beforeSend(event, hint) {
      // ì„œë²„ ì¸¡ì—ì„œ ì—ëŸ¬ë¥¼ ì „ì†¡í•˜ë¯€ë¡œ
      // ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê²°ê³¼ë¡œ ë°›ì€ ì—ëŸ¬ëŠ” Sentryë¡œ ì „ì†¡í•˜ì§€ ì•ŠìŒ
      if (isNetworkResponseError(hint.originalException)) {
        return null;
      }
    
      // client tagë¥¼ ë„£ì–´ ì—ëŸ¬ë¥¼ êµ¬ë¶„
      event.tags = {
        ...event.tags,
        client: true,
      };

        // ê·¸ ì™¸ì˜ í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ë§Œ ì „ì†¡
      return event;
    }
  });
}

export const onRouterTransitionStart = Sentry.captureRouterTransitionStart;
```

</details>

<details>
<summary>instrumentation.ts (í™˜ê²½ë³„ Sentry ë¶„ê¸° ë¡œë”©)</summary>

```typescript
import * as Sentry from "@sentry/nextjs";

export async function register() {
  if (process.env.NODE_ENV === "production") {
    if (process.env.NEXT_RUNTIME === "nodejs") {
      await import("./sentry.server.config");
    }
    if (process.env.NEXT_RUNTIME === "edge") {
      await import("./sentry.edge.config");
    }
  }
}

export const onRequestError = Sentry.captureRequestError;
```

</details>

<details>
<summary>sentry.server.config.ts (ì„œë²„ Sentry ì„¤ì •)</summary>

```typescript
import * as Sentry from "@sentry/nextjs";

function isExcludedClientError(error: any): boolean {
  const status = error?.response?.status ?? error?.status;
  return typeof status === "number" && status >= 400 && status < 500;
}

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 1,
  debug: false,
  beforeSend(event, hint) {
    // 400ë²ˆëŒ€ ì—ëŸ¬ëŠ” ì „ì†¡í•˜ì§€ ì•ŠìŒ
    if (isExcludedClientError(hint?.originalException)) return null;
    // server íƒœê·¸ ì¶”ê°€
    event.tags = { ...event.tags, server: true };
    return event;
  }
});
```

</details>

<details>
<summary>sentry.edge.config.ts (ì—£ì§€ Sentry ì„¤ì •)</summary>

```typescript
import * as Sentry from "@sentry/nextjs";

function isExcludedClientError(error: any): boolean {
  const status = error?.response?.status ?? error?.status;
  return typeof status === "number" && status >= 400 && status < 500;
}

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 1,
  debug: false,
  beforeSend(event, hint) {
    // 400ë²ˆëŒ€ ì—ëŸ¬ëŠ” ì „ì†¡í•˜ì§€ ì•ŠìŒ
    if (isExcludedClientError(hint?.originalException)) return null;
    // edge íƒœê·¸ ì¶”ê°€
    event.tags = { ...event.tags, edge: true };
    return event;
  }
});
```

</details>

<details>
<summary>ErrorBoundary.tsx (í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ ì—ëŸ¬ Sentry ì „ì†¡)</summary>

```tsx
import * as Sentry from "@sentry/nextjs";
import { toast } from "react-toastify";

class ErrorBoundary extends React.Component<
  { errorMessage?: string },
  { hasError: boolean }
> {
  // ...

  componentDidCatch(error: Error): void {
    if (this.props.errorMessage) {
      toast.warn(this.props.errorMessage);
    }
    // Sentryë¡œ í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ ì „ì†¡
    Sentry.captureException(error);
  }

  // ...
}
```

</details>

<details>
<summary>route.ts (api routes ì—ëŸ¬ Sentry ì „ì†¡)</summary>

```tsx
//...
import * as Sentry from "@sentry/nextjs";
export async function GET(req: NextRequest) {
  try {
    //...
  } catch (error) {
    console.error(error);
    Sentry.captureException(error);
    //...
  }
}
```

</details>

<br/>

#### ğŸª„ ë¶ˆí•„ìš”í•œ SSR í˜ì´ì§€ SSG/ISR í˜ì´ì§€ë¡œ ì „í™˜

> **ì ìš©ì´ìœ **

ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ì²˜ëŸ¼ ë°ì´í„° ë³€ê²½ ë¹ˆë„ê°€ ë‚®ê³  ì¡°íšŒìˆ˜ê°€ ë†’ì€ í˜ì´ì§€ê¹Œì§€ ë§¤ ìš”ì²­ë§ˆë‹¤ ì„œë²„ì—ì„œ ë Œë”ë§(SSR)í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë¼ íŒë‹¨í–ˆìŠµë‹ˆë‹¤. 
ì´ì— ë¶ˆí•„ìš”í•œ ì„œë²„ ë¶€í•˜ë¥¼ ì¤„ì´ê³  ì‘ë‹µ ì†ë„ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ì •ì  ìƒì„± ë°©ì‹(SSG/ISR)ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤.

> **ì ìš© ë°©ë²•**

- Data Fetching ì „í™˜: axios ëŒ€ì‹  Next.jsì˜ Extended Fetch APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìºì‹±(Caching) ë° ì¬ê²€ì¦(Revalidation) ì˜µì…˜ì„ í™œìš©í–ˆìŠµë‹ˆë‹¤.
- ì •ì  íŒŒë¼ë¯¸í„° ìƒì„±: generateStaticParams í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì—¬ ë¹Œë“œ ì‹œì ì— ì •ì  ê²½ë¡œë¥¼ ë¯¸ë¦¬ ìƒì„±í•˜ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
- ë™ì  ë Œë”ë§ ìš”ì†Œ ì œê±°: í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ searchParams ì‚¬ìš©ì„ ì œê±°í•˜ì—¬ Next.jsê°€ í•´ë‹¹ í˜ì´ì§€ë¥¼ ì •ì  í˜ì´ì§€(Static Page)ë¡œ ë¹Œë“œí•˜ë„ë¡ ìœ ë„í–ˆìŠµë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

- ì„œë²„ ë¶€í•˜ ê°ì†Œ: ìš”ì²­ë§ˆë‹¤ ë Œë”ë§í•˜ì§€ ì•Šê³  ìºì‹œëœ HTMLì„ ë°˜í™˜í•˜ì—¬ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ ì ˆì•½í–ˆìŠµë‹ˆë‹¤.
- TTFB(Time To First Byte) ê°œì„ : ì •ì  íŒŒì¼ ì œê³µìœ¼ë¡œ ì‘ë‹µ ì†ë„ê°€ íšê¸°ì ìœ¼ë¡œ ë¹¨ë¼ì¡ŒìŠµë‹ˆë‹¤.
- íŠ¸ë˜í”½ ì•ˆì •ì„± í™•ë³´: íŠ¸ë˜í”½ ê¸‰ì¦ ì‹œì—ë„ ì¼ì •í•œ ì‘ë‹µ ì†ë„ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

> **Artillery SSR/ISR ë¶€í•˜ í…ŒìŠ¤íŠ¸ ë¹„êµ(ìƒí’ˆ ìƒì„¸ í˜ì´ì§€)**

**í…ŒìŠ¤íŠ¸ yml íŒŒì¼**
```yml
config:
  target: "http://localhost:3000"
  phases:
    - duration: 10
      arrivalRate: 50 # ì´ˆë‹¹ 50ëª… ì ‘ì†

scenarios:
  - name: "Product detail page load"
    flow:
      - get:
          url: "/product/668ad20ace70c4eb38bd8575"
```

**í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¹„êµ í‘œ**
| í•­ëª© | SSR í˜ì´ì§€ | ISR í˜ì´ì§€ | ê°œì„ ìœ¨|
|---|---|---|---|
| í‰ê·  ì‘ë‹µ ì‹œê°„ | 59.2ms | 3.4ms | ì•½ 17ë°° ë‹¨ì¶• |
| p95 ì‘ë‹µ ì‹œê°„ | 172.5ms | 4ms | ì•½ 43ë°° ë‹¨ì¶• |
| ìµœëŒ€ ì‘ë‹µ ì‹œê°„ | 279ms | 86ms | ì•½ 3ë°° ë‹¨ì¶• |
| ìš”ì²­ ì²˜ë¦¬ ì†ë„ | 31 req/sec | 60 req/sec |ì•½ 2ë°° ì¦ê°€|
| ì‹¤íŒ¨ ìš”ì²­ | 1ê±´ (ETIMEDOUT) | 0ê±´ | ì•ˆì •ì„± í™•ë³´ |

ê¸°ì¡´ SSR ë°©ì‹ì€ ì´ˆë‹¹ 50ëª…ì˜ ë™ì‹œ ì ‘ì† ìƒí™©ì—ì„œ ì¼ë¶€ íƒ€ì„ì•„ì›ƒ(Timeout)ì´ ë°œìƒí•˜ê³  ì‘ë‹µ ì‹œê°„ì´ ë¶ˆì•ˆì •í–ˆìŠµë‹ˆë‹¤. 
ë°˜ë©´, ISRë¡œ ì „í™˜ í›„ì—ëŠ” ëª¨ë“  ìš”ì²­ì„ 4ms ì´ë‚´(p95 ê¸°ì¤€)ë¡œ ì²˜ë¦¬í•˜ë©°, íŠ¸ë˜í”½ì´ ëª°ë¦¬ëŠ” ìƒí™©ì—ì„œë„ ë§¤ìš° ì•ˆì •ì ì´ê³  ë¹ ë¥¸ ì„±ëŠ¥ì„ ì…ì¦í–ˆìŠµë‹ˆë‹¤.

> **ì°¸ê³ **

[velog-Next.js SSRì€ ë°˜ë“œì‹œ í•„ìš”í• ê¹Œ? SSR, ISR ë¶€í•˜ í…ŒìŠ¤íŠ¸ í›„ê¸°](https://velog.io/@njt6419/Next.js-SSR%EC%9D%80-%EB%B0%98%EB%93%9C%EC%8B%9C-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C-SSR-ISR-%EB%B6%80%ED%95%98-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%9B%84%EA%B8%B0)

<br/>

#### ğŸ” JWT ë¡œê·¸ì¸ ì¸ì¦ DB Session ë¡œê·¸ì¸ ì¸ì¦ ë°©ì‹ìœ¼ë¡œ ë³€ê²½
> **ì ìš©ì´ìœ **
 
**1. JWT ë¬´ìƒíƒœì„±ì˜ ì‹¤ì§ˆì  ìƒì‹¤**

í˜„ì¬ êµ¬ì¡°ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ JWTì˜ í•µì‹¬ ì¥ì ì¸ ë¬´ìƒíƒœì„±(stateless) ì´ ì´ë¯¸ ê¹¨ì§„ ìƒíƒœì…ë‹ˆë‹¤.
- refreshTokenì„ Redisì— ì €ì¥í•˜ì—¬ í† í° ìœ íš¨ì„± ê²€ì¦ ë° ì¤‘ë³µ ë¡œê·¸ì¸ ì œì–´
- ë¡œê·¸ì•„ì›ƒ / ê°•ì œ ë¡œê·¸ì•„ì›ƒì„ ìœ„í•´ redisì—ì„œ accessTokenë¥¼ ê´€ë¦¬
  
ê²°ê³¼ì ìœ¼ë¡œ JWT + Redis + ì¿ í‚¤ ì¡°í•©ì˜ ìƒíƒœ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ê°€ ë©ë‹ˆë‹¤.

**2. ê³¼ë„í•œ ì¸ì¦ ë¡œì§ ë³µì¡ë„**

JWT ë°©ì‹ìœ¼ë¡œ ì¸í•´ ë‹¤ìŒê³¼ ê°™ì€ ë¶€ê°€ ë¡œì§ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.
- accessToken ë§Œë£Œ â†’ refreshToken ê²€ì¦ â†’ ì¬ë°œê¸‰
- Axios interceptorì—ì„œ ì¬ìš”ì²­ ì²˜ë¦¬
- refreshToken ë§Œë£Œì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬
  

> **ì ìš© ë°©ë²•**

- **MongoDB Session ë„ì…**: MongoDBì˜ **TTL(Time To Live)** ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì„¸ì…˜ ë¬¸ì„œë¥¼ ê´€ë¦¬í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
- **ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦**: ë¡œê·¸ì¸ ì‹œ ë°œê¸‰ëœ Session IDë¥¼ ì¿ í‚¤(HttpOnly)ì— ì €ì¥í•˜ê³ , ì„œë²„ëŠ” ì´ë¥¼ í†µí•´ DBì—ì„œ ìœ íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.

> **ì ìš©ìœ¼ë¡œ ì–»ì€ ì´ì **

**1. ì¸ì¦ êµ¬ì¡° ë‹¨ìˆœí™”**

- accessToken / refreshToken ì œê±°
- Redis ê¸°ë°˜ í† í° ê´€ë¦¬ ì œê±°
- Axios í† í° ì¬ë°œê¸‰ ì¸í„°ì…‰í„° ì œê±°
  
**2. ì¸ì¦ íë¦„ ê°€ì‹œì„± ë° ìœ ì§€ë³´ìˆ˜ í–¥ìƒ**

- ë¡œê·¸ì¸ â†’ ì„¸ì…˜ ìƒì„± â†’ ì¿ í‚¤ ì €ì¥
- ìš”ì²­ â†’ ì„¸ì…˜ ì¡°íšŒ â†’ ì‚¬ìš©ì ì¸ì¦
- ë¡œê·¸ì•„ì›ƒ â†’ ì„¸ì…˜ ì‚­ì œ
- ë³µì¡í•œ ì¸ì¦ ê´€ë ¨ ì½”ë“œëŸ‰ ê°ì†Œ

<br/>

### ğŸ”« íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

#### ğŸª Client to SSR cookie ì „ë‹¬ ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- SSRì—ì„œ prefetchë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ, ìœ ì € í† í°ì´ ë§Œë£Œë˜ì—ˆì„ ê²½ìš° ë¦¬í”„ë ˆì‰¬ í† í°ì„ í†µí•´ ì—‘ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰ ë°›ëŠ” ë¡œì§ì´ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ, í† í°ì´ ë§Œë£Œë˜ê³ ë‚˜ë©´ prefetchê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- SSRì—ì„œ api ì‹¤í–‰ì‹œ í—¤ë”ì— ì¿ í‚¤ê°€ ì „ë‹¬ë˜ì§€ ì•Šì•„ ë°œìƒí•œ ë¬¸ì œì…ë‹ˆë‹¤.
- SSRì—ì„œëŠ” ì„œë²„ì‚¬ì´ë“œì˜ ì¿ í‚¤ë§Œì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì˜ ì¿ í‚¤ë¥¼ ì „ë‹¬ ë°›ì„ ìˆ˜ ì—†ì–´ ë°œìƒí•œ ë¬¸ì œì…ë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- SSRì—ì„œ **context.req.cookies** ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì˜ ì¿ í‚¤ë¥¼ ì§ì ‘ ì„œë²„ ì‚¬ì´ë“œë¡œ ì „ë‹¬í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```javascript
export const getServerSideProps: GetServerSideProps = async (context) => {
  const queryClient = new QueryClient();
  const { getIronSession } = await import("iron-session");
  const session = await getIronSession<IronSessionData>(
    context.req,
    context.res,
    sessionOptions
  );
  const cookie = context.req.headers.cookie;
  const myProfuileQueryKeyConfig = queryKeys.profile.my;

  if (session.refreshToken) {
    // headersì— ì¿ í‚¤ë¥¼ ì§ì ‘ ì „ë‹¬
    customAxios.
    await queryClient.prefetchQuery({
      queryKey: myProfuileQueryKeyConfig.queryKey,
      queryFn: async () => {
        try {
          const response = await customAxios("/api/profile", {
            headers: {
              Cookie: cookie,
            },
          });
          return response.data.profile;
        } catch (error) {
          console.error(error);
        }
      },
    });
  }
  return {
    props: { dehydratedState: dehydrate(queryClient) },
  };
};
```

</details>

<br>

#### ğŸ’« Hydrate Redux state ì´ˆê¸°í™” ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- ìœ ì € ë¡œê·¸ì¸ ì¸ì¦ ë¡œì§ì„ SSRë¥¼ ì´ìš©í•˜ì—¬ prefetchí•˜ì—¬ ìœ ì € ì •ë³´ë¥¼ HYDRATEë¡œ Redux stateì— ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ ê¸°ì¡´ ë‹¤ë¥¸ Redux stateê°€ ì´ˆê¸°í™” ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- reducer ì„¤ì •ì—ì„œ HYDRATEê°€ Reduxì˜ ëª¨ë“  stateë¥¼ ë®ì–´ì“°ë„ë¡ ì„¤ì •ë˜ì–´ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- 1 ) `redux-persist`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ì¡´ redux state ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•
- 2 ) rootReducerì—ì„œ HYDRATEë¥¼ ì ìš©í•˜ì§€ ì•Šê³ , ê° sliceì—ì„œ `extraReducers`ë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ìš”í•œ actionì—ë§Œ HYDRATEë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•
- ë‘ ë²ˆì§¸ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

<br>

**1 ) rootReducer HYDRATE ì œê±°**
**ê¸°ì¡´ ì½”ë“œ**

```javascript
// store/reducers/index.ts
import { combineReducers, AnyAction } from "@reduxjs/toolkit";
import { signupSlice } from "../signupSlice";
import { authSlice } from "../authSlice";
import { locationSlice } from "../locationSlice";
import { chatSlice } from "../chatSlice";

const combinedReducer = combineReducers({
  signup: signupSlice.reducer,
  auth: authSlice.reducer,
  location: locationSlice.reducer,
  chat: chatSlice.reducer,
});

type CombinedState = ReturnType<typeof combinedReducer>;

const rootReducer = (
  state: CombinedState | undefined,
  action: AnyAction
): CombinedState => {
  if (action.type === HYDRATE) {
    const nextState = {
      ...state,
      ...action.payload,
    };
    return nextState;
  } else {
    return combinedReducer(state, action);
  }
};

export default rootReducer;
```

<br>

**ìˆ˜ì • ì½”ë“œ**

```javascript
// store/reducers/index.ts
import { combineReducers, AnyAction } from "@reduxjs/toolkit";
import { signupSlice } from "../signupSlice";
import { authSlice } from "../authSlice";
import { locationSlice } from "../locationSlice";
import { chatSlice } from "../chatSlice";

const combinedReducer = combineReducers({
  signup: signupSlice.reducer,
  auth: authSlice.reducer,
  location: locationSlice.reducer,
  chat: chatSlice.reducer,
});

type CombinedState = ReturnType<typeof combinedReducer>;

const rootReducer = (
  state: CombinedState | undefined,
  action: AnyAction
): CombinedState => {
  return combinedReducer(state, action);
};

export default rootReducer;
```

- rootReducerì˜ HYDRATEë¥¼ ì œê±°í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

**2 ) HYDRATEê°€ í•„ìš”í•œ sliceì— extraReducerë¥¼ ì´ìš©í•˜ì—¬ ë³€ê²½**

```javascript
import { AuthData } from "@/types/authTypes";
import { AnyAction, createSlice } from "@reduxjs/toolkit";
import { HYDRATE } from "next-redux-wrapper";

const isClient = typeof window !== "undefined";

// í´ë¼ì´ì–¸íŠ¸ í™˜ê²½ì—ì„œë§Œ localStorageì— ì ‘ê·¼í•©ë‹ˆë‹¤.
const storedUser = isClient
  ? JSON.parse(localStorage.getItem("uid") || "null")
  : null;

export const authSlice = createSlice({
  name: "authSlice",
  initialState: {
    user: storedUser as AuthData | null,
    isLoading: true,
  },
  reducers: {
    saveAuth: (
      state,
      action: {
        payload: {
          uid: string;
          nickname: string;
          email: string;
          profileImg: string;
        };
        type: string;
      }
    ) => {
      state.user = action.payload;
      if (isClient) {
        localStorage.setItem("uid", JSON.stringify(action.payload));
      }
    },
    resetAuth: (state) => {
      state.user = null;
      if (isClient) {
        localStorage.removeItem("uid");
      }
    },
    setIsLoading: (state, action: { payload: boolean; type: string }) => {
      state.isLoading = action.payload;
    },
  },
  extraReducers(builder) {
    builder.addCase(HYDRATE, (state, action: AnyAction) => {
      return {
        ...state,
        ...action.payload.auth,
      };
    });
  },
});

```

- `extraReducers`ë¥¼ í†µí•´ HYDRATE ì ìš©

</details>

<br>

#### ğŸŒ vercel ë°°í¬ ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- vercelì— í”„ë¡œì íŠ¸ ë°°í¬í›„ 504 gateway timeoutê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- vercelì˜ ë¬´ë£Œ ë²„ì „ì˜ ê²½ìš° ì‘ë‹µ ì‹œê°„ì´ 10s ì´ìƒì¼ ê²½ìš° nextjsì—ì„œëŠ” 504 ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ê³  ì„œë²„ë¥¼ ì¤‘ë‹¨í•˜ê²Œë©ë‹ˆë‹¤.
- í˜„ì¬ vercel CDN ì§€ì—­ì´ ë¯¸êµ­ ì›Œì‹±í„´ DCë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ì‘ë‹µ ì‹œê°„ ì§€ì—°ì´ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- í•´ê²°ë°©ë²•ì€ ì‘ë‹µ ì§€ì—°ì‹œê°„ì„ ëŠ˜ë ¤ì£¼ëŠ” pro ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œì™€ ì„œë²„ ìœ„ì¹˜ ë³€ê²½ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
- í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— vercel.json íŒŒì¼ ìƒì„±í•˜ì—¬ ì§€ì—­ ì„¤ì • ì½”ë“œë¥¼ ë„£ìœ¼ë©´ ì§€ì—­ì„ ë³€ê²½í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- vercel CDN ì§€ì—­ì„ ì„œìš¸ë¡œ ë³€ê²½í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
// vercel.json
{
  "regions": ["icn1"],
}
```

- í”„ë¡œì íŠ¸ ìµœìƒë‹¨ vercel.jsonë¥¼ ì¶”ê°€í•´ì£¼ê³  ì§€ì—­ì„¤ì •ì„ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.
</details>

<br>

#### â— 504 Gateway Timeout Error

> **ë¬¸ì œ ìƒí™©**

- vercelì— í”„ë¡œì íŠ¸ ë°°í¬í›„ 504 gateway timeoutë¥¼ í•´ê²°ë¥¼ ìœ„í•´ regionì„ ë³€ê²½í•˜ì˜€ì§€ë§Œ ë¡œê·¸ì¸ ì´í›„ ë¹ˆë²ˆí•˜ê²Œ 504 Gateway Timeout ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- MongoDBì˜ DB ì—°ê²°ì„ ìºì‹±í•˜ì—¬ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ìœ ì € ì¸ì¦ API Routerì—ì„œ dbConnect í•¨ìˆ˜ë¥¼ ë¹ íŠ¸ë ¤ ë°°í¬í•˜ì—¬ ì´ˆê¸° DB ì—°ê²°ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šì€ ìƒíƒœì—ì„œ DBì— ì ‘ê·¼í•˜ë ¤ê³  í–ˆê¸° ë•Œë¬¸ì— DBì—ì„œ ì—°ê²°ì´ ì´ë£¨ì–´ì§ˆ ë•Œê¹Œì§€ ê³„ì† ìš”ì²­ì„ ë³´ëƒˆê³ , ê²°êµ­ 10ì´ˆ ì§€ì—° ì‹œê°„ì„ ì´ˆê³¼í•˜ì—¬ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
- ì¢…ì¢… ì œëŒ€ë¡œ ë™ì‘í–ˆë˜ ì´ìœ ëŠ” ìºì‹±ëœ DB ì—°ê²°ì„ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— ì—°ê²°ì´ í•œ ë²ˆ ì´ë£¨ì–´ì§„ ë’¤ì—ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- í•´ê²°ë°©ë²•ì€ ìœ ì € ì¸ì¦ api routerì— dbConnect í•¨ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
// /api/auth/user
import User from "@/lib/db/models/User";
import mongoose from "mongoose";
import { checkAuthorization } from "@/lib/server";
import { NextApiRequest, NextApiResponse } from "next";
import dbConnect from "@/lib/db";

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  if (req.method === "GET") {
    try {
      const isValidAuth = await checkAuthorization(req, res);

      if (!isValidAuth.isValid) {
        res.status(401).json({
          message: isValidAuth.message,
        });
        return;
      }

      const myUid = isValidAuth?.auth?.uid;

      await dbConnect(); // dbConnect ì¶”ê°€ => ì—ëŸ¬ í•´ê²°

      const user = await User.findOne({
        _id: new mongoose.Types.ObjectId(myUid),
      });

      res.status(200).json({
        message: "ìœ ì €ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ì–´ìš”.",
        user: {
          uid: user._id,
          nickname: user.nickname,
          profileImg: user.profileImg,
          email: user.email,
        },
      });
    } catch (error) {
      console.error(error);
      res.status(500).json({
        message: "ìœ ì € ì¸ì¦ì— ì‹¤íŒ¨í–ˆì–´ìš”.\nì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
      });
    }
  }
}
```

</details>

<br>

#### ğŸ—œ middleware í† í° ì¸ì¦ ë¡œì§ êµ¬í˜„ ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- nextjsì—ì„œ ì œê³µí•˜ëŠ” middlewareë¡œ api í•¨ìˆ˜ ìš”ì²­ì‹œ ë§ˆë‹¤ í† í° ì¸ì¦ ë¡œì§ì„ ë§Œë“¤ì–´ ì ìš©í•˜ë ¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ nextjsì—ì„œ ì œê³µí•˜ëŠ” middlewareì—ì„œ í† í° ì¸ì¦ í›„ ë§Œë£Œëœ í† í° ì¬ë°œê¸‰ ë¡œì§, í† ê¸‰ ì¬ë°œê¸‰ í›„ ê¸°ì¡´ ìš”ì²­ ì¬ì‹¤í–‰ êµ¬í˜„ì— í•œê³„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- middlewareì—ì„œ í† í° ì¸ì¦ ë¡œì§ì„ ì‹¤í–‰ í•˜ì§€ ì•Šê³ , ë¼ìš°í„° ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬ë§Œì„ ë‹´ë‹¹í•˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.
- ëŒ€ì‹  í† í° ì¸ì¦ì´ í•„ìš”í•œ api routerë§ˆë‹¤ í† í° ì¸ì¦ ë¡œì§ì´ í¬í•¨ ë³„ë„ì˜ ìœ í‹¸ í•¨ìˆ˜ë¥¼ ì ìš©í•˜ì—¬ ì¸ì¦ì´ ì²˜ë¦¬ë˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- axios intercetorë¥¼ ì´ìš©í•˜ì—¬ api ìš”ì²­ì‹œ í† í° ë§Œë£Œ ì—ëŸ¬ ë°œìƒì‹œ ë¦¬í”„ë ˆì‰¬ í† í°ì„ í†µí•´ ì—‘ì„¸ìŠ¤ í† í°ì„ ì¬ë°œê¸‰í•˜ê³ , ê¸°ì¡´ ìš”ì²­ì„ ì‹¤í–‰í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

**1 ) ì¸ì¦ ë¡œì§ ìœ í‹¸ í•¨ìˆ˜**

```javascript
export async function checkAuthorization(
  req: NextApiRequest,
  res: NextApiResponse
) {
  const { getIronSession } = await import("iron-session");
  const session = await getIronSession<IronSessionType>(
    req,
    res,
    sessionOptions
  );
  const accessToken = session.accessToken;

  const decodeAccessToken = await verifyToken(
    accessToken as string,
    process.env.NEXT_SECRET_ACCESS_TOKEN_KEY as string
  );

  if (!decodeAccessToken?.isValid) {
    return { isValid: false, message: "ë§Œë£Œëœ í† í°ì´ì—ìš”." };
  }

  const redisAccessToken = await getToken(
    decodeAccessToken?.data?.user.uid as string,
    "accessToken"
  );

  if (accessToken && accessToken !== redisAccessToken) {
    return { isValid: false, message: "ë§Œë£Œëœ í† í°ì´ì—ìš”." };
  } else {
    return {
      isValid: true,
      auth: decodeAccessToken.data?.user,
      message: "ìœ íš¨í•œ í† í°ì´ì—ìš”.",
    };
  }
}
```

<br>

**2 ) axios interceptor ì„¤ì •**

```javascript
const BASE_URL = process.env.NEXT_PUBLIC_BASE_URL as string;
const customAxios = axios.create({
  baseURL: BASE_URL,
});

customAxios.interceptors.response.use(
  (response) => {
    return response;
  },
  async (error: AxiosError) => {
    const originalRequest = error.config;
    if (isAxiosError<RegenerateAccessTokenResponseData>(error)) {
      if (
        error.response?.status === 401 &&
        error.response?.data.message === "ë§Œë£Œëœ í† í°ì´ì—ìš”."
      ) {
        try {
          const cookies = originalRequest?.headers["Cookie"];
          const response = await axios(`${BASE_URL}/api/auth/refreshToken`, {
            headers: {
              Cookie: cookies,
            },
          });
          const reposeCookies = response.headers["set-cookie"];
          if (reposeCookies) {
            originalRequest!.headers["Cookie"] = reposeCookies.join("; ");
          }
          if (originalRequest) return axios(originalRequest);
        } catch (refreshError) {
          if (isAxiosError<RegenerateAccessTokenResponseData>(refreshError)) {
            if (refreshError.response?.status === 401) {
              if (typeof window !== "undefined") {
                toast.warn("ë¡œê·¸ì¸ì´ ë§Œë£Œë¬ì–´ìš”.", {
                  autoClose: 3000,
                });
                window.location.replace("/signin");
              }
            }
            return Promise.reject(refreshError);
          }
        }
      }
    }

    return Promise.reject(error);
  }
);

export default customAxios;
```

</details>

<br>

#### ğŸ–Œ tailwindCSS ë™ì  ìŠ¤íƒ€ì¼ë§ ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- tailwindCSSì—ì„œ ë™ì ìœ¼ë¡œ ìŠ¤íƒ€ì¼ë§ ì ìš©ì‹œ ì ìš©ì´ ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- tailwindCSSëŠ” ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ì˜ CSS í”„ë ˆì„ì›Œí¬ë¡œ, ê¸°ë³¸ì ìœ¼ë¡œ ì •ì  í´ë˜ìŠ¤ ì´ë¦„ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë™ì ìœ¼ë¡œ í´ë˜ìŠ¤ëª…ì´ ì ìš©ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- ë™ì ìœ¼ë¡œ ì ìš©í•  í´ë˜ìŠ¤ëª…ì„ safelistì— ë¯¸ë¦¬ ì¶”ê°€ ì„¤ì •í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
  safelist: [
    "animate-slideOutRight",
    "animate-slideOutLeft",
    "animate-entering",
    "animate-leaving",
    "animate-slideFadeOutRight",
    "animate-bounceOpacity",
    "animate-slideUp",
    "animate-slideDown",
    "bg-red-400",
    "before:content-['íŒë§¤ì™„ë£Œ']",
    "before:content-['ê±°ë˜ì¤‘']",
    "before:text-3xl",
  ],

```

</details>

<br/>

#### âŒ ë°°í¬ í›„ Hydrate ë¶ˆì¼ì¹˜ ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- ë¡œì»¬ í™˜ê²½ì—ì„œëŠ” Hydrate ë¶ˆì¼ì¹˜ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ëŠ”ë° Vercel ë°°í¬ í›„ Hydrate ë¶ˆì¼ì¹˜ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- ìƒí’ˆ ëª©ë¡ ë‚ ì§œ í˜•ì‹ì—ì„œ Hydreate ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
- ë‚ ì§œ í˜•ì‹ì„ í¬ë§·íŒ… í•˜ëŠ” í•¨ìˆ˜ì—ì„œ Vercel ë°°í¬ ì„œë²„ì—ì„œëŠ” UTCë¥¼ ì‚¬ìš© ì¤‘ì´ì§€ë§Œ KST ì‹œê°„ ì°¨ì´ë¥¼ ê³„ì‚°í•˜ì§€ ì•Šì•„ ë‚ ì§œ í˜•ì‹ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- ë‚ ì§œ í˜•ì‹ í¬ë§·íŒ… í•¨ìˆ˜ì— UTC -> KST ì‹œê°„ëŒ€ë¡œ ë³€í™˜í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

```javascript
  export const getDateFormat = (time: string) => {
  const now = new Date();
  const dataTime = new Date(time);

  // UTC â†’ KST ë³€í™˜ (ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ +9ì‹œê°„ ì¶”ê°€)
  const kstTime = new Date(dataTime.getTime() + 9 * 60 * 60 * 1000);
  //...
  }
```

</details>

<br>

#### ğŸª SSR to Client cookie ì „ë‹¬ ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- SSR í˜ì´ì§€ì—ì„œ í† í° ë§Œë£Œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´, cookieì— ì €ì¥ëœ refreshTokenë¥¼ í†µí•´ accessTokenë¥¼ ì¬ë°œê¸‰ ë°›ì€ cookieê°€ clientë¡œ ì „ë‹¬ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
- ì´ë¡œ ì¸í•´ Clientì—ì„œ ì¸ì¦ì´ í•„ìš”í•œ API ìš”ì²­ì‹œ í† í° ì¬ë°œê¸‰ ë¡œì§ì„ ì¤‘ë³µ ìš”ì²­í•œë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- App Routerì—ì„œëŠ” SSR í˜ì´ì§€ì˜ ì¿ í‚¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— SSR ì¸¡ì—ì„œ ìƒˆë¡œìš´ accessTokenë¥¼ ê°±ì‹ í•˜ì—¬ë„ í´ë¼ì´ì–¸íŠ¸ì—ëŠ” ê°±ì‹ ëœ accessTokenì´ í¬í•¨ëœ cookieê°€ ì „ë‹¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- SSR ì¸¡ì—ì„œ í† í° ë§Œë£Œì—ëŸ¬ë¥¼ ê°ì§€í•˜ë©´ í† í° ì¬ë°œê¸‰ í˜ì´ì§€ë¡œ redirectì‹œì¼œ í† í° ì¬ë°œê¸‰ì„ í´ë¼ì´ì–¸íŠ¸ê°€ ì²˜ë¦¬í•˜ë„ë¡ ìœ„ì„í•˜ì˜€ìŠµë‹ˆë‹¤.
- redirect í›„ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ í† í° ì¬ë°œê¸‰ì„ ì²˜ë¦¬í•˜ê³  ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ë„ë¡ í•˜ê¸° ìœ„í•´ middlewareì— í˜„ì¬ í˜ì´ì§€ë¥¼ ì €ì¥í•˜ëŠ” X-Requested-URL cookieë¥¼ ì¶”ê°€í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

#### profile page

accessToken ë§Œë£Œ ì—ëŸ¬ ê°ì§€ ì‹œ redirectë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ìœ¼ë¡œ aceessToken í† í° ì¬ë°œê¸‰ì„ ìœ„ì„í•©ë‹ˆë‹¤.

```javascript
//...
async function prefetchProfile() {
  const { getIronSession } = await import("iron-session");
  const session = await getIronSession<IronSessionData>(
    cookies(),
    sessionOptions
  );
  const allCookies = headers().get("cookie");

  if (session.refreshToken) {
    try {
      const response = await customAxios("/api/profile", {
        headers: {
          Cookie: allCookies
        }
      });
      return response.data.profile as ProfileData;
    } catch (error) {
      if (error instanceof Error) {
        if (error.message === "Expired AccessToken.") {
          const { cookies } = await import("next/headers");
          const cookie = cookies();
          const currentURL = cookie.get("X-Requested-URL")?.value || "/"; // í˜„ì¬ í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°
          redirect(`${BASE_URL}/refresh-token?next=${currentURL}`); // í´ë¼ì´ì–¸íŠ¸ ì¸¡ìœ¼ë¡œ aceessToken í† í° ì¬ë°œê¸‰ì„ ìœ„ì„
        }
      }
    }
  }
}
//...
```

**middleware.ts**

í˜„ì¬ í˜ì´ì§€ë¥¼ ì €ì¥í•˜ëŠ” X-Requested-URL cookie ì„¤ì • ë¡œì§ ì¶”ê°€í•©ë‹ˆë‹¤.

```javascript
//...
const { pathname } = req.nextUrl;

const response = NextResponse.next();
response.cookies.set("X-Requested-URL", pathname, {
  secure: process.env.NODE_ENV === "production",
  httpOnly: true,
  sameSite: "strict",
  path: "/"
});
//...
```

**refresh-token page**

accessToken ì¬ë°œê¸‰ì„ ìœ„ì„ë°›ì•„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```javascript
"use client";

import React, { useEffect } from "react";
import Loading from "../loading";
import { useRouter, useSearchParams } from "next/navigation";
import axios, { isAxiosError } from "axios";
import { BASE_URL } from "@/constants/constant";
import { RegenerateAccessTokenResponseData } from "@/types/api-types";

export default function RefreshToken() {
  const searchParams = useSearchParams();
  const next = searchParams.get("next") || "/";
  const router = useRouter();

  useEffect(() => {
    const fechAccessToken = async () => {
      try {
        await axios.post(`${BASE_URL}/api/auth/refresh-token`, {
          withCredentials: true
        });
        // SSR ì¬ìš”ì²­ì„ ìœ„í•œ ì„œë²„ ë¦¬ë‹¤ì´ë ‰íŠ¸
        window.location.href = next;
      } catch (error) {
        if (isAxiosError < RegenerateAccessTokenResponseData > error) {
          if (error.response?.status === 401) {
            router.replace("/session-expired");
          } else {
            throw error;
          }
        }
      }
    };

    fechAccessToken();
  }, []);

  return <Loading />;
}
```

</details>

<br>

#### ğŸ§¨ CustomAxios accessToken ì¬ë°œê¸‰ ì¤‘ë³µ ìš”ì²­ ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- ì¼ë¶€ í˜ì´ì§€ì—ì„œ accessTokenì´ ë§Œë£Œëœ ê²½ìš° accessToken ì¬ë°œê¸‰ ìš”ì²­ì´ ì¤‘ë³µìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- ì¼ë¶€ í˜ì´ì§€ì—ì„œ ì¸ì¦ì´ í•„ìš”í•œ API ìš”ì²­ì´ ì—¬ëŸ¬ ê°œ ë™ì‹œì— ì˜¬ ìˆ˜ ìˆì–´ accessTokenì´ ë§Œë£Œëœ ê²½ìš° accessToken ì¬ë°œê¸‰ ìš”ì²­ì´ ì¤‘ë³µìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- Observer Patternì„ ì‚¬ìš©í•˜ì—¬ accessToken ì¬ë°œê¸‰ ìš”ì²­ì´ ìˆë‹¤ë©´ í˜„ì¬ ìš”ì²­ì„ ì‹¤í–‰í•˜ì§€ì•Šê³  ìš”ì²­ì„ êµ¬ë…í•´ ë‘ì—ˆë‹¤ê°€ accessTokenì´ ì¬ë°œê¸‰ëœ ì´í›„ êµ¬ë…í•œ ìš”ì²­ë“¤ì„ ì‹¤í–‰í•˜ë„ë¡ í•˜ì—¬ ì¤‘ë³µ ìš”ì²­ì„ ë°©ì§€í•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

**Observable.tsx**

```javascript
type Callback = () => void;
class Observable {
  private observers: Observer[] = [];

  setObserver(callback: Callback) {
    const observer = new Observer(callback);
    this.observers.push(observer);

    return observer;
  }

  notifyAll() {
    this.observers.forEach((observer) => {
      observer.callback();
    });
  }

  removeAll() {
    this.observers = [];
  }
}

class Observer {
  callback: Callback;

  constructor(callback: Callback) {
    this.callback = callback;
  }
}

const tokenObservable = new Observable();
export default tokenObservable;

```

**customAxios.ts**

```javascript
import axios, {
  AxiosError,
  InternalAxiosRequestConfig,
  isAxiosError
} from "axios";
import { RegenerateAccessTokenResponseData } from "@/types/api-types";
import tokenObservable from "./Observable";

const BASE_URL = process.env.NEXT_PUBLIC_BASE_URL as string;

const customAxios = axios.create({
  baseURL: BASE_URL,
  withCredentials: true
});

// accessToken ì¬ë°œê¸‰ ìš”ì²­ í™•ì¸ flag
let isRefreshing = false;

customAxios.interceptors.response.use(
  (response) => response,
  async (error: AxiosError) => {
    const originalRequest = error.config as InternalAxiosRequestConfig & {
      _retry?: boolean;
    };

    if (typeof window === "undefined" &&
        isAxiosError<RegenerateAccessTokenResponseData>(error) &&
        error.response?.status === 401 &&
        error.response?.data.message === "ë§Œë£Œëœ í† í°ì´ì—ìš”."
      ) {
      throw new Error("Expired AccessToken.");
    }

    if (
      isAxiosError<RegenerateAccessTokenResponseData>(error) &&
      error.response?.status === 401 &&
      error.response?.data.message === "ë§Œë£Œëœ í† í°ì´ì—ìš”." &&
      originalRequest &&
      !originalRequest._retry
    ) {
      originalRequest._retry = true;


      if (!isRefreshing) {
        isRefreshing = true;

        try {
          const cookies = originalRequest.headers["Cookie"];

          const response = await axios.post(
            `${BASE_URL}/api/auth/refresh-token`,
            {
              headers: {
                Cookie: cookies
              },
              withCredentials: true
            }
          );

          const setCookies = response.headers["set-cookie"];
          if (setCookies) {
            originalRequest.headers["Cookie"] = setCookies.join("; ");
          }

          // ë¦¬í”„ë ˆì‹œ ì„±ê³µ â†’ ëŒ€ê¸°ì¤‘ì¸ ìš”ì²­ë“¤ ì‹¤í–‰
          tokenObservable.notifyAll();
          return customAxios(originalRequest);
        } catch (refreshError) {
          tokenObservable.removeAll(); // ì—ëŸ¬ ì‹œ êµ¬ë… ì œê±°
          if (
            isAxiosError<RegenerateAccessTokenResponseData>(refreshError) &&
            refreshError.response?.status === 401
          ) {
            if (typeof window !== "undefined") {
              window.location.replace("/session-expired");
            }
          }
          return Promise.reject(refreshError);
        } finally {
          isRefreshing = false;
        }
      }

      // accessToken ì¬ë°œê¸‰ ì¤‘ì´ë©´ ë°›ì€ ìš”ì²­ êµ¬ë…
      return new Promise((resolve) => {
        tokenObservable.setObserver(() => {
          resolve(customAxios(originalRequest));
        });
      });
    }

    return Promise.reject(error);
  }
);

export default customAxios;
```

</details>

<br>

#### ğŸ”´ Layout ì»´í¬ë„ŒíŠ¸ Invalid hook call ì—ëŸ¬

> **ë¬¸ì œ ìƒí™©**

- layout.tsxì—ì„œ 'Invalid hook call' ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- layout.tsxê°€ async í•¨ìˆ˜ë¡œ ì„ ì–¸ë˜ì–´ SSR ì²˜ë¦¬ë¡œ ì„œë²„ì—ì„œ í•´ë‹¹ í›…ì´ ì‹¤í–‰ë˜ë©´ì„œ 'Invalid hook call' ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
- ReactQueryProviderì—ì„œ ì„¤ì •ì„ ìœ„í•œ useState(() => new QueryClient()) ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œ í•´ë‹¹ í›…ì´ ì‹¤í–‰ë˜ë©´ì„œ 'Invalid hook call' ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- layout.tsxê°€ SSR ì²˜ë¦¬ë˜ì§€ ì•Šë„ë¡ asyncë¥¼ ì œê±°í•˜ì—¬ ë™ê¸° í•¨ìˆ˜ë¡œ ë³€ê²½í•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```javascript
//...
export default function RootLayout({
  children,
  signin
}: Readonly<{
  children: React.ReactNode;
  signin: React.ReactNode;
}>) {
  return (
  //...
  );
}
```

</details>

<br/>

#### ğŸ•³ ë¡œê·¸ì•„ì›ƒ ì‹œ ë¹ˆ ìœ ì € ì •ë³´ê°€ í˜ì´ì§€ì— ë…¸ì¶œë˜ëŠ” ë¬¸ì œ

> **ë¬¸ì œ ìƒí™©**

- ê¸°ì¡´ ë¡œê·¸ì•„ì›ƒì€ í´ë¼ì´ì–¸íŠ¸ ìœ ì € ì •ë³´ ë°ì´í„°ë¥¼ ì‚­ì œí•œ í›„ í˜ì´ì§€ë¥¼ ì „í™˜í•˜ëŠ” ë°©ì‹ì´ì—ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ìœ ì € ì •ë³´ê°€ í‘œì‹œë˜ëŠ” í˜ì´ì§€ì—ì„œ ë¡œê·¸ì•„ì›ƒ ì‹œ ë¹ˆ ìœ ì € ì •ë³´ê°€ ì¼ì‹œì ìœ¼ë¡œ ë…¸ì¶œë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> **ë¬¸ì œ ì›ì¸**

- ë°ì´í„° ì‚­ì œì™€ í˜ì´ì§€ ì „í™˜ ì‚¬ì´ì— ë”œë ˆì´ê°€ ë°œìƒí•˜ì—¬ ë¹ˆ ìœ ì € ì •ë³´ê°€ ì¼ì‹œì ìœ¼ë¡œ ë…¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**

- ë¡œê·¸ì•„ì›ƒ ì„±ê³µ ì‹œ /logout ì „ìš© í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜í•˜ê³ , í•´ë‹¹ í˜ì´ì§€ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ë°ì´í„° ì‚­ì œ ë¡œì§ì„ ì²˜ë¦¬í•˜ë„ë¡ ê°œì„ í•©ë‹ˆë‹¤.

> **í•´ê²° ì½”ë“œ**

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

<br/>

**useSignoutMutate.ts**

```javascript
//...
export default function useSignoutMutate() {
  const router = useRouter();
  const user = useAuthStore((state) => state.user);
  const globalLoadingActions = useGlobalLoadingStore((state) => state.actions);

  const { mutate: signoutMutate } = useMutation<
    AxiosResponse<SignoutResposeData>,
    AxiosError,
    void
  >({
    mutationFn: () => signout(user?.uid || ""),
    onMutate: () => {
      globalLoadingActions.startLoading();
    },
    onSuccess: (response) => {
      if (
        response.data.message === "ì¹´ì¹´ì˜¤ ê³„ì •ì€ ë³„ë„ì˜ ë¡œê·¸ì•„ì›ƒì´ í•„ìš”í•´ìš”."
      ) {
        router.replace(
          `https://kauth.kakao.com/oauth/logout?client_id=${process.env.NEXT_PUBLIC_KAKAO_REST_API_KEY}&logout_redirect_uri=${process.env.NEXT_PUBLIC_BASE_URL}/logout`
        );
      } else {
        router.replace("/logout");
      }
    }
    //...
  });
//...
}
```

**logout.tsx**

```javascript
//...
export default function Logout() {
  //...
  useEffect(() => {
    if (!user) return navigate({ type: "replace", url: "/" });

    queryClient.clear();
    authActions.resetAuth();
    chatActions.resetChatState();
    notificationActions.resetUnreadCount();
    navigate({ type: "replace", url: "/" });
  }, [
    authActions,
    chatActions,
    navigate,
    notificationActions,
    queryClient,
    user
  ]);

  return (
    <div className="fixed inset-0 bg-white z-[99]">
      <Loading />
    </div>
  );
}
```

</details>

<br/>

#### ğŸ›‘ useSuspenseQuery SSR í™˜ê²½ì—ì„œì˜ ë¬¸ì œ
> **ë¬¸ì œ ìƒí™©**

useSuspenseQueryë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸(ë§ˆì´í˜ì´ì§€ ë“±)ê°€ SSR ê³¼ì •ì—ì„œ ì‹¤í–‰ë  ë•Œ, ìœ ì € ì¸ì¦ì— ì‹¤íŒ¨í•˜ì—¬ 401 ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ Next.js ì„œë²„ ë Œë”ë§ì´ ì¤‘ë‹¨ë˜ê³  í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ìœ¼ë¡œ ì „í™˜ë˜ëŠ” ì—ëŸ¬ ë¡œê·¸ê°€ ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤. `Error: Switching to client-side rendering because the server rendering errored.`

> **ë¬¸ì œ ì›ì¸**

useSuspenseQueryëŠ” ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì‹œì ì— ë°ì´í„°ë¥¼ í•¨ê»˜ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. Next.jsëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¼ë„ ì´ˆê¸° ë¡œë”© ì„±ëŠ¥ì„ ìœ„í•´ ì„œë²„ì—ì„œ PreRenderingì„ ì‹œë„í•˜ëŠ”ë°, ì´ë•Œ ë¸Œë¼ìš°ì €ì˜ ì¿ í‚¤(ì„¸ì…˜ ID)ê°€ ì„œë²„ ìš”ì²­ í—¤ë”ì— í¬í•¨ë˜ì§€ ì•Šì•„ ì¸ì¦ ì‹¤íŒ¨(401)ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

> **í•´ê²° ë°©ë²•**
ì´ ë¬¸ì œëŠ” ë°ì´í„° í˜ì¹­ ì‹œì ì´ ì„œë²„ê°€ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ê°€ ë˜ë„ë¡ ì œì–´í•´ì•¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤..

**1. dynamic import + ssr: false**

í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ì  ì„í¬íŠ¸ë¡œ ë¶ˆëŸ¬ì˜¤ë©° ssr: false ì˜µì…˜ì„ ì£¼ì–´ ì„œë²„ ë Œë”ë§ ë‹¨ê³„ì—ì„œ ì•„ì˜ˆ ì œì™¸í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

```tsx
'use client'

import { Suspense } from 'react';
import ErrorBoundary from './ErrorBoundary';
import dynamic from "next/dynamic";

const UserInfo = dynamic(() => import("./UserInfo"), {
  ssr: false,
  loading: ()=> <p>ìœ ì € ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>,
});

export default function UserPage() {
  return (
    <div>
      <h1>ìœ ì € ì •ë³´</h1>
      <ErrorBoundary fallback={<p>ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>}>
        <Suspense fallback={<p>ìœ ì € ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>}>
          <UserInfo />
        </Suspense>
      </ErrorBoundary>
    </div>
  );
}
```

**2. CustomSuspense**

ë§ˆìš´íŠ¸ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì»¤ìŠ¤í…€ Suspenseë¥¼ ë§Œë“¤ì–´, ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œë§Œ Suspenseê°€ ë™ì‘í•˜ë„ë¡ ê°•ì œí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

```tsx
import { useEffect, useState, Suspense } from 'react';

function useMounted() {
  const [isMounted, setIsMounted] = useState(false);

  useEffect(() => {
    setIsMounted(true);
  }, []);

  return isMounted;
}

export default function CustomSuspense({ fallback, children }: {
  fallback: React.ReactNode;
  children: React.ReactNode;
}) {
  const isMounted = useMounted();

  if (isMounted) {
    return <Suspense fallback={fallback}>{children}</Suspense>;
  }

  return <>{fallback}</>;
}
```

**3. useQueryë¡œ ì „í™˜ (ì±„íƒ)** 

useSuspenseQuery ëŒ€ì‹  ì¼ë°˜ì ì¸ useQueryë¥¼ ì‚¬ìš©í•˜ë©´, Suspense ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ Next.jsê°€ ì„œë²„ ë Œë”ë§ ì‹œì ì— ë°ì´í„° í˜ì¹­ì„ ê°•ì œë¡œ ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```tsx
'use client';

import { useQuery } from '@tanstack/react-query';

async function fetchUser(): Promise<{ name: string }> {
  const res = await fetch('/api/user', {
    credentials: 'include',
  });

  if (!res.ok) {
    throw new Error('ìœ ì € ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
  }

  return res.json();
}

export default function UserInfo() {
  const { data, isLoading, isError } = useQuery({
    queryKey: ['user'],
    queryFn: fetchUser,
  });
  
  if (isLoading) return <p>loading...</p>;
  
  if (isError) return <p>ìœ ì € ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>;

  return <p>ì•ˆë…•í•˜ì„¸ìš”, {data?.name}ë‹˜!</p>;
}
```

ìœ„ ì„¸ê°€ì§€ ë°©ë²• ì¤‘ êµ³ì´ useSuspenseQueryë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤ê³  ìƒê°í•˜ì˜€ê¸° ë•Œë¬¸ì— useQueryë¡œ ì „í™˜í•˜ê¸° ë°©ì‹ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

useQueryë¡œ ì „í™˜í•œ ì´ìœ ?
- ì¸ì¦ì´ í•„ìš”í•œ ì‚¬ìš©ì ì „ìš© í˜ì´ì§€
- SEO ì¤‘ìš”ë„ ë‚®ìŒ
- SSRì—ì„œ ë°ì´í„° íŒ¨ì¹­ ë¶ˆí•„ìš”

> í•´ê²° ì½”ë“œ
ê¸°ì¡´ useSuspenseMyProfileQuery hook ëŒ€ì‹  useMyProfileQueryë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•˜ê³ , Suspense ë° ErrorBoundaryë¥¼ ì œê±°í•©ë‹ˆë‹¤.

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

<br/>

```tsx
"use client";

import UserInfo from "./user-info/UserInfo";
import Detail from "./detail/ProfileDetail";
import useProfileMenu from "../hooks/useProfileMenu";
import ProfileUserInfoSkeletonUI from "@/domains/user/profile/components/user-info/UserInfoSkeletonUI";
import Empty from "@/shared/common/components/Empty";
import useMyProfileQuery from "../hooks/queries/useMyProfileQuery";
import ProfileDetailSkeletonUI from "./detail/ProfileDetailSkeletonUI";

export default function MyProfilePage() {
  const { myProfileData, myProfilePending, myProfileError } = useMyProfileQuery();
  const { profileMenu, onClickMenu } = useProfileMenu();

  // ë¡œë”© ìƒíƒœ ì§ì ‘ í•¸ë“¤ë§
  if (myProfilePending) {
    return (
      <>
        <ProfileUserInfoSkeletonUI isMyProfile={true} />
        <ProfileDetailSkeletonUI isMyProfile={true} />
      </>
    );
  }

  if (!myProfileData || myProfileError) {
    return <Empty message="ë‚˜ì˜ í”„ë¡œí•„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤." />;
  }

  return (
    <>
      <UserInfo handleClickMenu={onClickMenu} profileData={myProfileData} />
      <Detail
        profileMenu={profileMenu}
        handleClickMenu={onClickMenu}
        profileData={myProfileData}
        isMyProfile={true}
      />
    </>
  );
}
```

</details>

> **ì°¸ê³ **

[velog-useSuspenseQuery Next.js SSR í™˜ê²½ì—ì„œì˜ ë¬¸ì œ](https://velog.io/@njt6419/useSuspenseQuery-Next.js-SSR-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%AC%B8%EC%A0%9C)

<br/>


### ğŸ‘€ êµ¬í˜„ ê¸°ëŠ¥ ë¯¸ë¦¬ë³´ê¸° ( ì œëª© í´ë¦­ ì‹œ í•´ë‹¹ ê¸°ëŠ¥ ìƒì„¸ì„¤ëª…ìœ¼ë¡œ ì´ë™ë©ë‹ˆë‹¤. )

| [ğŸ”— ë¡œê·¸ì¸](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EB%A1%9C%EA%B7%B8%EC%9D%B8) | [ğŸ”— ì†Œì…œ ë¡œê·¸ì¸](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8) | [ğŸ”— íšŒì›ê°€ì…](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85) |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| ![ë¡œê·¸ì¸](https://github.com/NamJongtae/ITtem/assets/113427991/78a943e8-6f8d-4410-b17f-2e12647216c2)                                                          | ![ì†Œì…œ ë¡œê·¸ì¸](https://github.com/NamJongtae/ITtem/assets/113427991/510277a1-d382-4321-bbf1-92aee174005b)                                                                             | ![íšŒì›ê°€ì…](https://github.com/NamJongtae/ITtem/assets/113427991/02a1501a-1ab6-4aa1-a54c-15aa4c46b7bf)                                                                   |

| [ğŸ”— ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%B0%BE%EA%B8%B0) | [ğŸ”— ìƒí’ˆ ì¡°íšŒ](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EC%A1%B0%ED%9A%8C) | [ğŸ”— ìƒí’ˆ ê²€ìƒ‰](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EA%B2%80%EC%83%89) |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°](https://github.com/NamJongtae/ITtem/assets/113427991/85348b11-9cba-4500-826a-6d9cf86c5bda)                                                                                      | ![ìƒí’ˆ ì¡°íšŒ](https://github.com/NamJongtae/ITtem/assets/113427991/d9fc36ba-849d-4a88-83b6-095d73b752f5)                                                                    | ![ìƒí’ˆ ê²€ìƒ‰](https://github.com/NamJongtae/ITtem/assets/113427991/4d542184-2eb0-42ed-b10c-2cca78b786f4)                                                                    |

| [ğŸ”— ìƒí’ˆ ì—…ë¡œë“œ](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EC%97%85%EB%A1%9C%EB%93%9C) | [ğŸ”— ìƒí’ˆ ìˆ˜ì •](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EC%88%98%EC%A0%95) | [ğŸ”— ìƒí’ˆ ìƒì„¸](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EC%83%81%EC%84%B8) |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![ìƒí’ˆ ì—…ë¡œë“œ](https://github.com/NamJongtae/ITtem/assets/113427991/997cb9cf-dadf-4263-baa2-f7e239f58893)                                                                             | ![ìƒí’ˆ ìˆ˜ì •](https://github.com/NamJongtae/ITtem/assets/113427991/76e46d07-62c9-4102-a8a2-d0238eecf68c)                                                                    | ![ìƒí’ˆ ìƒì„¸](https://github.com/NamJongtae/ITtem/assets/113427991/00123741-4675-4ad6-a910-d9e383e1f8a1)                                                                    |

| [ğŸ”— ìƒí’ˆ ì°œ/ì‹ ê³ ](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EC%B0%9C%EC%8B%A0%EA%B3%A0) | [ğŸ”— ìƒí’ˆ ì‚­ì œ](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EC%82%AD%EC%A0%9C) | [ğŸ”— ìƒí’ˆ ê´€ë¦¬](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EA%B4%80%EB%A6%AC) |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![ìƒí’ˆ ì‹ ê³ /ì°œ](https://github.com/NamJongtae/ITtem/assets/113427991/7a139fe0-28a4-426c-b3d4-692d89a169c2)                                                                             | ![ìƒí’ˆ ì‚­ì œ](https://github.com/NamJongtae/ITtem/assets/113427991/6a09ea99-e026-4e43-b673-85c777466fc9)                                                                    | ![ìƒí’ˆ ê´€ë¦¬](https://github.com/NamJongtae/ITtem/assets/113427991/8d7ec3a3-575c-4c80-ae75-0d0c1bce054e)                                                                    |

| [ğŸ”— ë¦¬ë·° ì‘ì„±](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EB%A6%AC%EB%B7%B0-%EC%9E%91%EC%84%B1) | [ğŸ”— í”„ë¡œí•„ í˜ì´ì§€](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%ED%94%84%EB%A1%9C%ED%95%84-%ED%8E%98%EC%9D%B4%EC%A7%80) | [ğŸ”— í”„ë¡œí•„ ìˆ˜ì •](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%ED%94%84%EB%A1%9C%ED%95%84-%EC%88%98%EC%A0%95) |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![ë¦¬ë·° ì‘ì„±](https://github.com/NamJongtae/ITtem/assets/113427991/f36c7183-7cd8-4c12-8ac6-9fdbc258b697)                                                                    | ![í”„ë¡œí•„ í˜ì´ì§€](https://github.com/NamJongtae/ITtem/assets/113427991/99f348be-3f95-40a1-bd6a-38992d5970e7)                                                                                      | ![ í”„ë¡œí•„ ìˆ˜ì •](https://github.com/NamJongtae/ITtem/assets/113427991/76e46d07-62c9-4102-a8a2-d0238eecf68c)                                                                            |

| [ğŸ”— ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EB%B3%80%EA%B2%BD) | [ğŸ”— ì‹¤ì‹œê°„ ì±„íŒ… ëª©ë¡](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%8B%A4%EC%8B%9C%EA%B0%84-%EC%B1%84%ED%8C%85-%EB%AA%A9%EB%A1%9D) | [ğŸ”— ì‹¤ì‹œê°„ ì±„íŒ…](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%8B%A4%EC%8B%9C%EA%B0%84-%EC%B1%84%ED%8C%85) |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![ë¹„ë°€ë²ˆí˜¸ ë³€ê²½](https://github.com/NamJongtae/ITtem/assets/113427991/6b08d762-d7c4-4174-afdf-b10d4a951298)                                                                                       | ![ì‹¤ì‹œê°„ ì±„íŒ… ëª©ë¡](https://github.com/NamJongtae/ITtem/assets/113427991/fa04a143-fb1b-49a3-8751-7a9376c9294e)                                                                                                | ![ì‹¤ì‹œê°„ ì±„íŒ…](https://github.com/NamJongtae/ITtem/assets/113427991/663ae48f-058a-4e4b-aafe-a1bbd47fa9cf)                                                                             |

<div align="center">

| [ğŸ”— ìƒí’ˆ ì‹¤ì‹œê°„ ì•Œë¦¼/ë©”ì„¸ì§€](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EC%83%81%ED%92%88-%EC%8B%A4%EC%8B%9C%EA%B0%84-%EC%95%8C%EB%A6%BC%EB%A9%94%EC%84%B8%EC%A7%80) | [ğŸ”— ë¡œê·¸ì•„ì›ƒ](https://github.com/NamJongtae/ITtem/wiki/%EA%B5%AC%ED%98%84-%EA%B8%B0%EB%8A%A5-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85#%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83) |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| ![ìƒí’ˆ ì‹¤ì‹œê°„ ì•Œë¦¼/ë©”ì„¸ì§€](https://github.com/NamJongtae/ITtem/assets/113427991/af33565e-a0c3-4e20-8192-b380857873a7)                                                                                                                           | ![ë¡œê·¸ì•„ì›ƒ](https://github.com/NamJongtae/ITtem/assets/113427991/9368904e-2cd7-4772-8549-e8c0e151a3be)                                                                   |

<p align="right"><a href="#top">TOP ğŸ”¼</a></p>

</div>
